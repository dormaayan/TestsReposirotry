/** 
 * Tests interactions with SDK and ensures configuration is having the desired effect.
 */
public class TestAdlSdkConfiguration {
  @Test public void testDefaultTimeout() throws IOException {
    AdlFileSystem fs=null;
    Configuration conf=null;
    int effectiveTimeout;
    conf=AdlStorageConfiguration.getConfiguration();
    conf.setInt(ADL_HTTP_TIMEOUT,-1);
    try {
      fs=(AdlFileSystem)(AdlStorageConfiguration.createStorageConnector(conf));
    }
 catch (    URISyntaxException e) {
      throw new IllegalStateException("Can not initialize ADL FileSystem. " + "Please check test.fs.adl.name property.",e);
    }
    Assume.assumeNotNull(fs);
    effectiveTimeout=fs.getAdlClient().getDefaultTimeout();
    Assert.assertFalse("A negative timeout is not supposed to take effect",effectiveTimeout < 0);
    conf=AdlStorageConfiguration.getConfiguration();
    conf.setInt(ADL_HTTP_TIMEOUT,17);
    try {
      fs=(AdlFileSystem)(AdlStorageConfiguration.createStorageConnector(conf));
    }
 catch (    URISyntaxException e) {
      throw new IllegalStateException("Can not initialize ADL FileSystem. " + "Please check test.fs.adl.name property.",e);
    }
    effectiveTimeout=fs.getAdlClient().getDefaultTimeout();
    Assert.assertEquals("Timeout is getting set",effectiveTimeout,17);
  }
}
