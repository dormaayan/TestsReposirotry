/** 
 * @author Brad Heap nzv8fan@gmail.com
 */
public class BasicResultSetIteratorTest {
  @Before public void setUp() throws Exception {
  }
  @Test public void testHasMoreLines() throws Exception {
    ResultSet resultSetMock=Mockito.mock(ResultSet.class);
    Mockito.when(resultSetMock.next()).thenReturn(true).thenReturn(false);
    Mockito.when(resultSetMock.getString("line")).thenReturn("The quick brown fox");
    BasicResultSetIterator iterator=new BasicResultSetIterator(resultSetMock,"line");
    int cnt=0;
    while (iterator.hasNext()) {
      String line=iterator.nextSentence();
      cnt++;
    }
    assertEquals(1,cnt);
  }
  @Test public void testHasMoreLinesAndReset() throws Exception {
    ResultSet resultSetMock=Mockito.mock(ResultSet.class);
    Mockito.when(resultSetMock.next()).thenReturn(true).thenReturn(false).thenReturn(true).thenReturn(false);
    Mockito.when(resultSetMock.getString("line")).thenReturn("The quick brown fox");
    BasicResultSetIterator iterator=new BasicResultSetIterator(resultSetMock,"line");
    int cnt=0;
    while (iterator.hasNext()) {
      String line=iterator.nextSentence();
      cnt++;
    }
    assertEquals(1,cnt);
    iterator.reset();
    cnt=0;
    while (iterator.hasNext()) {
      String line=iterator.nextSentence();
      cnt++;
    }
    assertEquals(1,cnt);
  }
}
