public class FileSystemClosingBatchInserterTest {
  @Test public void closeFileSystemOnShutdown() throws Exception {
    BatchInserter batchInserter=mock(BatchInserter.class);
    IndexConfigStoreProvider configStoreProvider=mock(IndexConfigStoreProvider.class);
    FileSystemAbstraction fileSystem=mock(FileSystemAbstraction.class);
    FileSystemClosingBatchInserter inserter=new FileSystemClosingBatchInserter(batchInserter,configStoreProvider,fileSystem);
    inserter.shutdown();
    InOrder verificationOrder=inOrder(batchInserter,fileSystem);
    verificationOrder.verify(batchInserter).shutdown();
    verificationOrder.verify(fileSystem).close();
  }
}
