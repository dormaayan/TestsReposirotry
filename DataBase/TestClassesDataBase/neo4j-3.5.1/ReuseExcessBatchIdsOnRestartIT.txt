public class ReuseExcessBatchIdsOnRestartIT {
  @Rule public final DatabaseRule db=new EmbeddedDatabaseRule();
  @Test public void shouldReuseExcessBatchIdsWhichWerentUsedBeforeClose() throws Exception {
    Node firstNode;
    try (Transaction tx=db.beginTx()){
      firstNode=db.createNode();
      tx.success();
    }
     db.restartDatabase();
    Node secondNode;
    try (Transaction tx=db.beginTx()){
      secondNode=db.createNode();
      tx.success();
    }
     assertEquals(firstNode.getId() + 1,secondNode.getId());
  }
}
