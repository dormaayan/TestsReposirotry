public class BridgingIndexProgressorTest {
  @Test public void closeMustCloseAll(){
    IndexDescriptor index=TestIndexDescriptorFactory.forLabel(1,2,3);
    BridgingIndexProgressor progressor=new BridgingIndexProgressor(null,index.schema().getPropertyIds());
    IndexProgressor[] parts={mock(IndexProgressor.class),mock(IndexProgressor.class)};
    for (    IndexProgressor part : parts) {
      progressor.initialize(index,part,null,IndexOrder.NONE,false);
    }
    progressor.close();
    for (    IndexProgressor part : parts) {
      verify(part,times(1)).close();
    }
  }
}
