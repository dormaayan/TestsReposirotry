public class AsyncTestingTest {
  private AsyncTesting async=new AsyncTesting();
  private Stopwatch watch=createNotStarted();
  @After public void after(){
    async.cleanUp();
  }
  @Test public void sanity_test(){
    watch.start();
    final AtomicInteger value=new AtomicInteger(0);
    async.runAfter(200,new Runnable(){
      public void run(){
        value.incrementAndGet();
      }
    }
);
    assertEquals(0,value.get());
    watch.waitFor(300);
    watch.assertElapsedTimeIsMoreThan(200,MILLISECONDS);
    assertEquals(1,value.get());
  }
}
