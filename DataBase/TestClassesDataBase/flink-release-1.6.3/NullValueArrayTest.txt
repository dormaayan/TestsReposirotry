/** 
 * Tests for  {@link NullValueArray}.
 */
public class NullValueArrayTest {
  @Test public void testUnboundedArray(){
    int count=4096;
    ValueArray<NullValue> nva=new NullValueArray();
    for (int i=0; i < count; i++) {
      assertFalse(nva.isFull());
      assertEquals(i,nva.size());
      assertTrue(nva.add(NullValue.getInstance()));
      assertEquals(i + 1,nva.size());
    }
    assertFalse(nva.isFull());
    assertEquals(count,nva.size());
    int idx=0;
    for (    NullValue nv : nva) {
      assertEquals(NullValue.getInstance(),nv);
    }
    assertTrue(nva.add(NullValue.getInstance()));
    assertTrue(nva.addAll(nva));
    assertEquals(nva,nva.copy());
    NullValueArray nvaTo=new NullValueArray();
    nva.copyTo(nvaTo);
    assertEquals(nva,nvaTo);
    int size=nva.size();
    nva.mark();
    assertTrue(nva.add(NullValue.getInstance()));
    assertEquals(size + 1,nva.size());
    nva.reset();
    assertEquals(size,nva.size());
    nva.clear();
    assertEquals(0,nva.size());
  }
}
