/** 
 * Tests for the  {@link AggregatingTaskManagersMetricsHandler}.
 */
public class AggregatingTaskManagersMetricsHandlerTest extends TestLogger {
  @Test public void testGetPaths(){
    AggregatingTaskManagersMetricsHandler handler=new AggregatingTaskManagersMetricsHandler(Executors.directExecutor(),mock(MetricFetcher.class));
    String[] paths=handler.getPaths();
    assertEquals(1,paths.length);
    assertEquals("/taskmanagers/metrics",paths[0]);
  }
  @Test public void getStores() throws Exception {
    MetricFetcher fetcher=new MetricFetcher(mock(GatewayRetriever.class),mock(MetricQueryServiceRetriever.class),Executors.directExecutor(),TestingUtils.TIMEOUT());
    MetricStore store=MetricStoreTest.setupStore(fetcher.getMetricStore());
    AggregatingTaskManagersMetricsHandler handler=new AggregatingTaskManagersMetricsHandler(Executors.directExecutor(),fetcher);
    Map<String,String> pathParams=new HashMap<>();
    Map<String,String> queryParams=new HashMap<>();
    Collection<? extends MetricStore.ComponentMetricStore> stores=handler.getStores(store,pathParams,queryParams);
    assertEquals(2,stores.size());
  }
}
