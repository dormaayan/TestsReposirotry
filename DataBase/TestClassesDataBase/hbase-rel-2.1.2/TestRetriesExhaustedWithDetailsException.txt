@Category({SmallTests.class}) public class TestRetriesExhaustedWithDetailsException {
  @ClassRule public static final HBaseClassTestRule CLASS_RULE=HBaseClassTestRule.forClass(TestRetriesExhaustedWithDetailsException.class);
  @Rule public TestName name=new TestName();
  /** 
 * Assert that a RetriesExhaustedException that has RegionTooBusyException outputs region name.
 */
  @Test public void testRegionTooBusyException(){
    List<Throwable> ts=new ArrayList<>(1);
    final String regionName=this.name.getMethodName();
    ts.add(new RegionTooBusyException(regionName));
    List<Row> rows=new ArrayList<>(1);
    rows.add(Mockito.mock(Row.class));
    List<String> hostAndPorts=new ArrayList<>(1);
    hostAndPorts.add("example.com:1234");
    RetriesExhaustedException ree=new RetriesExhaustedWithDetailsException(ts,rows,hostAndPorts);
    assertTrue(ree.toString().contains(regionName));
  }
}
