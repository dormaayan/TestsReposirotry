public static final class DummyProcedure extends Procedure<MasterProcedureEnv> implements TableProcedureInterface {
  private final CountDownLatch failureSet=new CountDownLatch(1);
  private final CountDownLatch canRollback=new CountDownLatch(1);
  @Override public TableName getTableName(){
    return TableName.valueOf("dummy");
  }
  @Override public TableOperationType getTableOperationType(){
    return TableOperationType.READ;
  }
  @Override protected Procedure<MasterProcedureEnv>[] execute(  MasterProcedureEnv env) throws ProcedureYieldException, ProcedureSuspendedException, InterruptedException {
    setFailure("dummy",new IOException("inject error"));
    failureSet.countDown();
    return null;
  }
  @Override protected void rollback(  MasterProcedureEnv env) throws IOException, InterruptedException {
    canRollback.await();
  }
  @Override protected boolean abort(  MasterProcedureEnv env){
    return false;
  }
  @Override protected void serializeStateData(  ProcedureStateSerializer serializer) throws IOException {
  }
  @Override protected void deserializeStateData(  ProcedureStateSerializer serializer) throws IOException {
  }
}
