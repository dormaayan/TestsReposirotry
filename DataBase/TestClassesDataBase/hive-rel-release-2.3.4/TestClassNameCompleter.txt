public class TestClassNameCompleter {
  @ClassRule public static TemporaryFolder tmpFolder=new TemporaryFolder();
  @Test public void addingAndEmptyJarFile() throws IOException {
    String fileName="empty.file.jar";
    File p=tmpFolder.newFile(fileName);
    URLClassLoader classLoader=(URLClassLoader)Thread.currentThread().getContextClassLoader();
    try {
      URLClassLoader newClassLoader=new URLClassLoader(new URL[]{p.toURL()},classLoader);
      Thread.currentThread().setContextClassLoader(newClassLoader);
      ClassNameCompleter.getClassNames();
      fail("an exception was expected!");
    }
 catch (    IOException e) {
      assertTrue("Exception message should contain the filename!",e.getMessage().indexOf(fileName) >= 0);
    }
 finally {
      Thread.currentThread().setContextClassLoader(classLoader);
    }
  }
  @Test public void addingEmptyFile() throws IOException {
    String fileName="empty.file";
    File p=tmpFolder.newFile(fileName);
    URLClassLoader classLoader=(URLClassLoader)Thread.currentThread().getContextClassLoader();
    try {
      URLClassLoader newClassLoader=new URLClassLoader(new URL[]{p.toURL()},classLoader);
      Thread.currentThread().setContextClassLoader(newClassLoader);
      ClassNameCompleter.getClassNames();
    }
  finally {
      Thread.currentThread().setContextClassLoader(classLoader);
    }
  }
}
