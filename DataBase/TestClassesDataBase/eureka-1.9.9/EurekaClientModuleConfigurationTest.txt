/** 
 * @author David Liu
 */
public class EurekaClientModuleConfigurationTest {
  @Test public void testBindEurekaInstanceConfigFactory(){
    final EurekaInstanceConfigFactory mockFactory=Mockito.mock(EurekaInstanceConfigFactory.class);
    final EurekaInstanceConfig mockConfig=Mockito.mock(EurekaInstanceConfig.class);
    final ApplicationInfoManager mockInfoManager=Mockito.mock(ApplicationInfoManager.class);
    Mockito.when(mockFactory.get()).thenReturn(mockConfig);
    LifecycleInjector injector=InjectorBuilder.fromModules(new ArchaiusModule(),new EurekaClientModule(){
      @Override protected void configureEureka(){
        bindEurekaInstanceConfigFactory().toInstance(mockFactory);
      }
    }
).overrideWith(new AbstractModule(){
      @Override protected void configure(){
        bind(ApplicationInfoManager.class).toInstance(mockInfoManager);
      }
    }
).createInjector();
    EurekaInstanceConfig config=injector.getInstance(EurekaInstanceConfig.class);
    Assert.assertEquals(mockConfig,config);
  }
}
