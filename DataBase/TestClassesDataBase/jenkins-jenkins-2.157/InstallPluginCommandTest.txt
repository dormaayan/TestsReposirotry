public class InstallPluginCommandTest {
  @Rule public JenkinsRule r=new JenkinsRule();
  @Issue("JENKINS-41745") @Test public void fromStdin() throws Exception {
    assertNull(r.jenkins.getPluginManager().getPlugin("token-macro"));
    assertThat(new CLICommandInvoker(r,"install-plugin").withStdin(InstallPluginCommandTest.class.getResourceAsStream("/plugins/token-macro.hpi")).invokeWithArgs("-name","token-macro","-deploy","="),CLICommandInvoker.Matcher.succeeded());
    assertNotNull(r.jenkins.getPluginManager().getPlugin("token-macro"));
  }
}
