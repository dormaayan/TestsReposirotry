public class HudsonIsLoading {
  @Rule public JenkinsRule j=new JenkinsRule();
  @Test @Issue("JENKINS-55062") public void withPrefix() throws Exception {
    j.jenkins.servletContext.setAttribute("app",new HudsonIsLoading());
    JenkinsRule.WebClient wc=j.createWebClient();
    wc.getOptions().setThrowExceptionOnFailingStatusCode(false);
    wc.getOptions().setJavaScriptEnabled(false);
    Page p=wc.goTo("","text/html");
    assertTrue(p.isHtmlPage());
    String body=p.getWebResponse().getContentAsString();
    assertThat(body,CoreMatchers.containsString("data-resurl=\""));
    assertThat(body,CoreMatchers.containsString("data-rooturl=\""));
    assertThat(body,CoreMatchers.containsString("resURL=\""));
  }
}
