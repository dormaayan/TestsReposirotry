public class FlowableThrottleWithTimeoutTests {
  @Test public void testThrottle(){
    Subscriber<Integer> subscriber=TestHelper.mockSubscriber();
    TestScheduler s=new TestScheduler();
    PublishProcessor<Integer> o=PublishProcessor.create();
    o.throttleWithTimeout(500,TimeUnit.MILLISECONDS,s).subscribe(subscriber);
    s.advanceTimeTo(0,TimeUnit.MILLISECONDS);
    o.onNext(1);
    o.onNext(2);
    s.advanceTimeTo(501,TimeUnit.MILLISECONDS);
    o.onNext(3);
    s.advanceTimeTo(600,TimeUnit.MILLISECONDS);
    o.onNext(4);
    s.advanceTimeTo(700,TimeUnit.MILLISECONDS);
    o.onNext(5);
    o.onNext(6);
    s.advanceTimeTo(1300,TimeUnit.MILLISECONDS);
    o.onNext(7);
    s.advanceTimeTo(1800,TimeUnit.MILLISECONDS);
    o.onComplete();
    InOrder inOrder=inOrder(subscriber);
    inOrder.verify(subscriber).onNext(2);
    inOrder.verify(subscriber).onNext(6);
    inOrder.verify(subscriber).onNext(7);
    inOrder.verify(subscriber).onComplete();
    inOrder.verifyNoMoreInteractions();
  }
  @Test public void throttleFirstDefaultScheduler(){
    Flowable.just(1).throttleWithTimeout(100,TimeUnit.MILLISECONDS).test().awaitDone(5,TimeUnit.SECONDS).assertResult(1);
  }
}
