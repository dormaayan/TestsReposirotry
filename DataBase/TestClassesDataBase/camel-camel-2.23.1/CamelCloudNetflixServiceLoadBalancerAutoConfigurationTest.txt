public class CamelCloudNetflixServiceLoadBalancerAutoConfigurationTest {
  @Test public void testAutoConfiguration(){
    new ApplicationContextRunner().withConfiguration(AutoConfigurations.of(CamelAutoConfiguration.class,CamelCloudAutoConfiguration.class,CamelSpringCloudServiceRegistryAutoConfiguration.class,CamelCloudNetflixServiceLoadBalancerAutoConfiguration.class,RibbonAutoConfiguration.class,RibbonClientConfiguration.class)).withUserConfiguration(TestConfiguration.class).withPropertyValues("debug=true","spring.main.banner-mode=off","ribbon.client.name=test").run(context -> {
      assertThat(context).hasSingleBean(LoadBalancerClient.class);
      assertThat(context).getBean(LoadBalancerClient.class).isInstanceOf(RibbonLoadBalancerClient.class);
      assertThat(context).hasSingleBean(CamelSpringCloudServiceLoadBalancer.LoadBalancerClientAdapter.class);
      LoadBalancerClient client=context.getBean(LoadBalancerClient.class);
      ServiceLoadBalancer balancer=context.getBean(CamelSpringCloudServiceLoadBalancer.LoadBalancerClientAdapter.class).adapt(client);
      assertThat(balancer).isInstanceOf(CamelCloudNetflixServiceLoadBalancer.class);
    }
);
  }
@EnableAutoConfiguration @Configuration public static class TestConfiguration {
  }
}
