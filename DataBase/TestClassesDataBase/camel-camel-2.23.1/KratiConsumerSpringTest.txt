public class KratiConsumerSpringTest extends CamelSpringTestSupport {
  @Test public void testPutAndConsume() throws InterruptedException {
    ProducerTemplate template=context.createProducerTemplate();
    template.sendBodyAndHeader("direct:put","TEST1",KratiConstants.KEY,"1");
    template.sendBodyAndHeader("direct:put","TEST2",KratiConstants.KEY,"2");
    template.sendBodyAndHeader("direct:put","TEST3",KratiConstants.KEY,"3");
    MockEndpoint endpoint=context.getEndpoint("mock:results",MockEndpoint.class);
    endpoint.expectedMessageCount(3);
    endpoint.assertIsSatisfied();
  }
  @Override protected AbstractApplicationContext createApplicationContext(){
    return new ClassPathXmlApplicationContext("classpath:producer-test.xml");
  }
}
