/** 
 * Test case for enabling stream caching through XML
 */
public class NoStreamCachingInterceptorTest extends ContextTestSupport {
  @Test public void testNoStreamCachingInterceptorEnabled() throws Exception {
    MockEndpoint a=getMockEndpoint("mock:a");
    a.expectedMessageCount(1);
    StreamSource message=new StreamSource(new StringReader("<hello>world!</hello>"));
    template.sendBody("direct:a",message);
    assertMockEndpointsSatisfied();
    Exchange exchange=a.getExchanges().get(0);
    StreamSource stream=assertIsInstanceOf(StreamSource.class,exchange.getIn().getBody());
    assertNotNull(stream);
  }
  protected CamelContext createCamelContext() throws Exception {
    return createSpringCamelContext(this,"org/apache/camel/spring/interceptor/noStreamCachingInterceptorTest.xml");
  }
}
