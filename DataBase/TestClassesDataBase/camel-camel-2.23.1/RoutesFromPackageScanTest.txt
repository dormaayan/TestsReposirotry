/** 
 */
public class RoutesFromPackageScanTest extends ServletCamelTestSupport {
  protected String getConfiguration(){
    return "/myweb3.xml";
  }
  @Test public void testRoutes() throws Exception {
    CamelContext context=getCamelContext();
    assertNotNull(context);
    assertEquals("MyCamel",context.getName());
    assertEquals(2,context.getRoutes().size());
    assertNotNull(context.getRoute("foo"));
    assertNotNull(context.getRoute("bar"));
    ProducerTemplate template=context.createProducerTemplate();
    MockEndpoint mock=context.getEndpoint("mock:foo",MockEndpoint.class);
    mock.expectedMessageCount(1);
    MockEndpoint mock2=context.getEndpoint("mock:bar",MockEndpoint.class);
    mock2.expectedMessageCount(1);
    template.sendBody("direct:foo","Hello World");
    template.sendBody("direct:bar","Bye World");
    mock.assertIsSatisfied();
    mock2.assertIsSatisfied();
    template.stop();
  }
}
