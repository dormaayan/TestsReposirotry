public class SchemaMojoIntegrationTest {
  @Rule public TemporaryFolder temp=new TemporaryFolder();
  @Test public void testExecuteJsonSchema() throws Exception {
    final SchemaMojo mojo=new SchemaMojo();
    setup(mojo);
    mojo.includes=new String[]{"Account"};
    mojo.outputDirectory=temp.getRoot();
    mojo.jsonSchemaFilename="test-schema.json";
    mojo.jsonSchemaId=JsonUtils.DEFAULT_ID_PREFIX;
    mojo.execute();
    final File schemaFile=mojo.outputDirectory.toPath().resolve("test-schema.json").toFile();
    Assert.assertTrue("Output file was not created",schemaFile.exists());
    final ObjectMapper objectMapper=JsonUtils.createObjectMapper();
    final JsonSchema jsonSchema=objectMapper.readValue(schemaFile,JsonSchema.class);
    Assert.assertTrue("Expected root JSON schema with oneOf element",jsonSchema.isObjectSchema() && !((ObjectSchema)jsonSchema).getOneOf().isEmpty());
  }
}
