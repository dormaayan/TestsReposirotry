@Test public void testSimpleRoleHierarchyWithCustomGrantedAuthorityImplementation(){
  List<GrantedAuthority> authorities0=HierarchicalRolesTestHelper.createAuthorityList("ROLE_0");
  List<GrantedAuthority> authorities1=HierarchicalRolesTestHelper.createAuthorityList("ROLE_A");
  List<GrantedAuthority> authorities2=HierarchicalRolesTestHelper.createAuthorityList("ROLE_A","ROLE_B");
  RoleHierarchyImpl roleHierarchyImpl=new RoleHierarchyImpl();
  roleHierarchyImpl.setHierarchy("ROLE_A > ROLE_B");
  assertThat(HierarchicalRolesTestHelper.containTheSameGrantedAuthoritiesCompareByAuthorityString(roleHierarchyImpl.getReachableGrantedAuthorities(authorities0),authorities0)).isTrue();
  assertThat(HierarchicalRolesTestHelper.containTheSameGrantedAuthoritiesCompareByAuthorityString(roleHierarchyImpl.getReachableGrantedAuthorities(authorities1),authorities2)).isTrue();
  assertThat(HierarchicalRolesTestHelper.containTheSameGrantedAuthoritiesCompareByAuthorityString(roleHierarchyImpl.getReachableGrantedAuthorities(authorities2),authorities2)).isTrue();
}
