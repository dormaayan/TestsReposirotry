@Test public void testDefaultChain() throws Exception {
  URI uri1=new URI("s3a://bucket1"), uri2=new URI("s3a://bucket2");
  Configuration conf=new Configuration();
  conf.unset(AWS_CREDENTIALS_PROVIDER);
  AWSCredentialProviderList list1=S3AUtils.createAWSCredentialProviderSet(uri1,conf);
  AWSCredentialProviderList list2=S3AUtils.createAWSCredentialProviderSet(uri2,conf);
  List<Class<? extends AWSCredentialsProvider>> expectedClasses=Arrays.asList(BasicAWSCredentialsProvider.class,EnvironmentVariableCredentialsProvider.class,InstanceProfileCredentialsProvider.class);
  assertCredentialProviders(expectedClasses,list1);
  assertCredentialProviders(expectedClasses,list2);
  assertSameInstanceProfileCredentialsProvider(list1.getProviders().get(2),list2.getProviders().get(2));
}
