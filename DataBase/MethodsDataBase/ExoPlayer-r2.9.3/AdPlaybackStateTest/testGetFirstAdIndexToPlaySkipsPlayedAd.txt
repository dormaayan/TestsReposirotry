@Test public void testGetFirstAdIndexToPlaySkipsPlayedAd(){
  state=state.withAdCount(0,3);
  state=state.withAdUri(0,0,TEST_URI);
  state=state.withAdUri(0,2,TEST_URI);
  state=state.withPlayedAd(0,0);
  assertThat(state.adGroups[0].getFirstAdIndexToPlay()).isEqualTo(1);
  assertThat(state.adGroups[0].states[1]).isEqualTo(AdPlaybackState.AD_STATE_UNAVAILABLE);
  assertThat(state.adGroups[0].states[2]).isEqualTo(AdPlaybackState.AD_STATE_AVAILABLE);
}
