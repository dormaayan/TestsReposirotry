public void test_noTxn() throws Exception {
{
    Connection conn=dataSource.getConnection();
    String sql="select 1";
    PreparedStatement stmt0=conn.prepareStatement(sql);
    DruidPooledPreparedStatement pooledStmt0=(DruidPooledPreparedStatement)stmt0;
    stmt0.close();
    PreparedStatement stmt1=conn.prepareStatement(sql);
    DruidPooledPreparedStatement pooledStmt1=(DruidPooledPreparedStatement)stmt1;
    Assert.assertEquals(1,pooledStmt1.getPreparedStatementHolder().getInUseCount());
    Assert.assertSame(pooledStmt1.getPreparedStatementHolder(),pooledStmt0.getPreparedStatementHolder());
    PreparedStatement stmt2=conn.prepareStatement(sql);
    DruidPooledPreparedStatement pooledStmt2=(DruidPooledPreparedStatement)stmt2;
    Assert.assertNotSame(pooledStmt1.getPreparedStatementHolder(),pooledStmt2.getPreparedStatementHolder());
    conn.close();
  }
{
    Connection conn=dataSource.getConnection();
    conn.setAutoCommit(false);
    String sql="select 1";
    PreparedStatement stmt0=conn.prepareStatement(sql);
    DruidPooledPreparedStatement pooledStmt0=(DruidPooledPreparedStatement)stmt0;
    stmt0.close();
    PreparedStatement stmt1=conn.prepareStatement(sql);
    DruidPooledPreparedStatement pooledStmt1=(DruidPooledPreparedStatement)stmt1;
    Assert.assertEquals(1,pooledStmt1.getPreparedStatementHolder().getInUseCount());
    Assert.assertSame(pooledStmt1.getPreparedStatementHolder(),pooledStmt0.getPreparedStatementHolder());
    PreparedStatement stmt2=conn.prepareStatement(sql);
    DruidPooledPreparedStatement pooledStmt2=(DruidPooledPreparedStatement)stmt2;
    Assert.assertNotSame(pooledStmt1.getPreparedStatementHolder(),pooledStmt2.getPreparedStatementHolder());
    stmt1.close();
    stmt2.close();
    conn.close();
  }
}
