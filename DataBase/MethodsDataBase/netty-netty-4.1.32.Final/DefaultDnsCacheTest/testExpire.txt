@Test public void testExpire() throws Throwable {
  InetAddress addr1=InetAddress.getByAddress(new byte[]{10,0,0,1});
  InetAddress addr2=InetAddress.getByAddress(new byte[]{10,0,0,2});
  EventLoopGroup group=new DefaultEventLoopGroup(1);
  try {
    EventLoop loop=group.next();
    final DefaultDnsCache cache=new DefaultDnsCache();
    cache.cache("netty.io",null,addr1,1,loop);
    cache.cache("netty.io",null,addr2,10000,loop);
    Throwable error=loop.schedule(new Callable<Throwable>(){
      @Override public Throwable call(){
        try {
          assertNull(cache.get("netty.io",null));
          return null;
        }
 catch (        Throwable cause) {
          return cause;
        }
      }
    }
,1,TimeUnit.SECONDS).get();
    if (error != null) {
      throw error;
    }
  }
  finally {
    group.shutdownGracefully();
  }
}
