@Test public void testUnsetRootDirEcPolicy() throws Exception {
  final int numBlocks=1;
  final int fileLen=blockGroupSize * numBlocks;
  final Path rootPath=new Path("/");
  final Path ecFilePath=new Path(rootPath,"ec_file");
  final Path replicateFilePath=new Path(rootPath,"rep_file");
  try {
    fs.unsetErasureCodingPolicy(rootPath);
    fail();
  }
 catch (  NoECPolicySetException e) {
  }
  fs.setErasureCodingPolicy(rootPath,ecPolicy.getName());
  DFSTestUtil.createFile(fs,ecFilePath,fileLen,(short)1,0L);
  fs.unsetErasureCodingPolicy(rootPath);
  DFSTestUtil.createFile(fs,replicateFilePath,fileLen,(short)1,0L);
  ErasureCodingPolicy tempEcPolicy=fs.getErasureCodingPolicy(ecFilePath);
  Assert.assertTrue("Erasure coding policy mismatch!",tempEcPolicy.getName().equals(ecPolicy.getName()));
  tempEcPolicy=fs.getErasureCodingPolicy(replicateFilePath);
  Assert.assertNull("Replicate file should not have erasure coding policy!",tempEcPolicy);
  tempEcPolicy=fs.getErasureCodingPolicy(rootPath);
  Assert.assertNull("Directory should not have erasure coding policy set!",tempEcPolicy);
  fs.delete(rootPath,true);
}
