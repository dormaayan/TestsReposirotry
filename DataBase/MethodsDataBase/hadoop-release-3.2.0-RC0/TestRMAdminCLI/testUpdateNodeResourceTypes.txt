@Test public void testUpdateNodeResourceTypes() throws Exception {
  String nodeIdStr="0.0.0.0:0";
  String resourceTypes="memory-mb=1Gi,vcores=1,resource1=3Gi,resource2=2m";
  String[] args={"-updateNodeResource",nodeIdStr,resourceTypes};
  assertEquals(0,rmAdminCLI.run(args));
  ArgumentCaptor<UpdateNodeResourceRequest> argument=ArgumentCaptor.forClass(UpdateNodeResourceRequest.class);
  verify(admin).updateNodeResource(argument.capture());
  UpdateNodeResourceRequest request=argument.getValue();
  Map<NodeId,ResourceOption> resourceMap=request.getNodeResourceMap();
  NodeId nodeId=NodeId.fromString(nodeIdStr);
  Resource expectedResource=Resource.newInstance(1024,1);
  expectedResource.setResourceInformation("resource1",ResourceInformation.newInstance("resource1","Gi",3));
  expectedResource.setResourceInformation("resource2",ResourceInformation.newInstance("resource2","m",2));
  ResourceOption resource=resourceMap.get(nodeId);
  assertEquals(1024,resource.getResource().getResourceInformation("memory-mb").getValue());
  assertEquals("Mi",resource.getResource().getResourceInformation("memory-mb").getUnits());
  assertNotNull("resource for " + nodeIdStr + " shouldn't be null.",resource);
  assertEquals("resource value for " + nodeIdStr + " is not as expected.",ResourceOption.newInstance(expectedResource,ResourceOption.OVER_COMMIT_TIMEOUT_MILLIS_DEFAULT),resource);
}
