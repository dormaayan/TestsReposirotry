@Test public void shouldAssignTasksToNewClientWithoutFlippingAssignmentBetweenExistingAndBouncedClients(){
  final TaskId task06=new TaskId(0,6);
  final ClientState c1=createClientWithPreviousActiveTasks(p1,1,task00,task01,task02,task06);
  final ClientState c2=createClient(p2,1);
  c2.addPreviousStandbyTasks(Utils.mkSet(task03,task04,task05));
  final ClientState newClient=createClient(p3,1);
  final StickyTaskAssignor<Integer> taskAssignor=createTaskAssignor(task00,task01,task02,task03,task04,task05,task06);
  taskAssignor.assign(0);
  assertThat(c1.activeTasks(),not(hasItem(task03)));
  assertThat(c1.activeTasks(),not(hasItem(task04)));
  assertThat(c1.activeTasks(),not(hasItem(task05)));
  assertThat(c1.activeTaskCount(),equalTo(3));
  assertThat(c2.activeTasks(),not(hasItems(task00)));
  assertThat(c2.activeTasks(),not(hasItems(task01)));
  assertThat(c2.activeTasks(),not(hasItems(task02)));
  assertThat(c2.activeTaskCount(),equalTo(2));
  assertThat(newClient.activeTaskCount(),equalTo(2));
}
