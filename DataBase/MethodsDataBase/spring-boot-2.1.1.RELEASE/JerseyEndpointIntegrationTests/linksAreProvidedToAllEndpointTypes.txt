@Test public void linksAreProvidedToAllEndpointTypes() throws Exception {
  FilteredClassLoader classLoader=new FilteredClassLoader(DispatcherServlet.class);
  new WebApplicationContextRunner(AnnotationConfigServletWebServerApplicationContext::new).withClassLoader(classLoader).withConfiguration(AutoConfigurations.of(JacksonAutoConfiguration.class,JerseyAutoConfiguration.class,EndpointAutoConfiguration.class,ServletWebServerFactoryAutoConfiguration.class,WebEndpointAutoConfiguration.class,ManagementContextAutoConfiguration.class,BeansEndpointAutoConfiguration.class)).withUserConfiguration(EndpointsConfiguration.class).withPropertyValues("management.endpoints.web.exposure.include:*","server.port:0").run((context) -> {
    int port=context.getSourceApplicationContext(AnnotationConfigServletWebServerApplicationContext.class).getWebServer().getPort();
    WebTestClient client=WebTestClient.bindToServer().baseUrl("http://localhost:" + port).build();
    client.get().uri("/actuator").exchange().expectStatus().isOk().expectBody().jsonPath("_links.beans").isNotEmpty().jsonPath("_links.restcontroller").doesNotExist().jsonPath("_links.controller").doesNotExist();
  }
);
}
