@SuppressWarnings("Duplicates") @Test public void stressCache() throws Exception {
  StringFactory factory=new StringFactory();
  TemporalIndexCache<String> cache=new TemporalIndexCache<>(factory);
  ExecutorService pool=Executors.newFixedThreadPool(20);
  Future<?>[] futures=new Future[100];
  AtomicBoolean shouldContinue=new AtomicBoolean(true);
  try {
    for (int i=0; i < futures.length; i++) {
      futures[i]=pool.submit(new CacheStresser(cache,shouldContinue));
    }
    Thread.sleep(5_000);
    shouldContinue.set(false);
    for (    Future<?> future : futures) {
      future.get(10,TimeUnit.SECONDS);
    }
  }
  finally {
    pool.shutdown();
  }
}
