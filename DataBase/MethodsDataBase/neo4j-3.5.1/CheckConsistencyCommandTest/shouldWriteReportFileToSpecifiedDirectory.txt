@Test void shouldWriteReportFileToSpecifiedDirectory() throws IOException, ConsistencyCheckIncompleteException, CommandFailed, IncorrectUsage {
  ConsistencyCheckService consistencyCheckService=mock(ConsistencyCheckService.class);
  Path homeDir=testDir.directory("home").toPath();
  CheckConsistencyCommand checkConsistencyCommand=new CheckConsistencyCommand(homeDir,testDir.directory("conf").toPath(),consistencyCheckService);
  when(consistencyCheckService.runFullConsistencyCheck(any(),any(),any(),any(),any(),anyBoolean(),any(),any(ConsistencyFlags.class))).thenReturn(ConsistencyCheckService.Result.success(null));
  checkConsistencyCommand.execute(new String[]{"--database=mydb","--report-dir=some-dir-or-other"});
  verify(consistencyCheckService).runFullConsistencyCheck(any(),any(),any(),any(),any(),anyBoolean(),eq(new File("some-dir-or-other").getCanonicalFile()),any(ConsistencyFlags.class));
}
