@Test public void shouldInterpretEmptyStatementAsReuseLastStatementInExplicitTransaction() throws Throwable {
  final BoltStateMachine machine=env.newMachine(BOLT_CHANNEL);
  machine.process(new InitMessage(USER_AGENT,emptyMap()),nullResponseHandler());
  BoltResponseRecorder recorder=new BoltResponseRecorder();
  machine.process(new RunMessage("BEGIN",EMPTY_MAP),nullResponseHandler());
  machine.process(DiscardAllMessage.INSTANCE,nullResponseHandler());
  machine.process(new RunMessage("RETURN 1",EMPTY_MAP),nullResponseHandler());
  machine.process(PullAllMessage.INSTANCE,recorder);
  machine.process(new RunMessage("",EMPTY_MAP),nullResponseHandler());
  machine.process(PullAllMessage.INSTANCE,recorder);
  machine.process(new RunMessage("COMMIT",EMPTY_MAP),nullResponseHandler());
  machine.process(DiscardAllMessage.INSTANCE,nullResponseHandler());
  assertThat(recorder.nextResponse(),succeededWithRecord(1L));
  assertThat(recorder.nextResponse(),succeededWithRecord(1L));
}
