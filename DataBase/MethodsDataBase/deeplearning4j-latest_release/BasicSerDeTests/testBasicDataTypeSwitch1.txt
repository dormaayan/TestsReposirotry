@Test public void testBasicDataTypeSwitch1() throws Exception {
  DataBuffer.Type initialType=Nd4j.dataType();
  Nd4j.setDataType(DataBuffer.Type.FLOAT);
  INDArray array=Nd4j.create(new float[]{1,2,3,4,5,6});
  ByteArrayOutputStream bos=new ByteArrayOutputStream();
  Nd4j.write(bos,array);
  Nd4j.setDataType(DataBuffer.Type.DOUBLE);
  INDArray restored=Nd4j.read(new ByteArrayInputStream(bos.toByteArray()));
  assertEquals(Nd4j.create(new float[]{1,2,3,4,5,6}),restored);
  assertEquals(8,restored.data().getElementSize());
  assertEquals(8,restored.shapeInfoDataBuffer().getElementSize());
  Nd4j.setDataType(initialType);
}
