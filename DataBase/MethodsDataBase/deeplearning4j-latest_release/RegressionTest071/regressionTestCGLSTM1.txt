@Test public void regressionTestCGLSTM1() throws Exception {
  File f=new ClassPathResource("regression_testing/071/071_ModelSerializer_Regression_CG_LSTM_1.zip").getTempFileFromArchive();
  ComputationGraph net=ModelSerializer.restoreComputationGraph(f,true);
  ComputationGraphConfiguration conf=net.getConfiguration();
  assertEquals(3,conf.getVertices().size());
  assertTrue(conf.isBackprop());
  assertFalse(conf.isPretrain());
  GravesLSTM l0=(GravesLSTM)((LayerVertex)conf.getVertices().get("0")).getLayerConf().getLayer();
  assertEquals("tanh",l0.getActivationFn().toString());
  assertEquals(3,l0.getNIn());
  assertEquals(4,l0.getNOut());
  assertEquals(GradientNormalization.ClipElementWiseAbsoluteValue,l0.getGradientNormalization());
  assertEquals(1.5,l0.getGradientNormalizationThreshold(),1e-5);
  GravesBidirectionalLSTM l1=(GravesBidirectionalLSTM)((LayerVertex)conf.getVertices().get("1")).getLayerConf().getLayer();
  assertEquals("softsign",l1.getActivationFn().toString());
  assertEquals(4,l1.getNIn());
  assertEquals(4,l1.getNOut());
  assertEquals(GradientNormalization.ClipElementWiseAbsoluteValue,l1.getGradientNormalization());
  assertEquals(1.5,l1.getGradientNormalizationThreshold(),1e-5);
  RnnOutputLayer l2=(RnnOutputLayer)((LayerVertex)conf.getVertices().get("2")).getLayerConf().getLayer();
  assertEquals(4,l2.getNIn());
  assertEquals(5,l2.getNOut());
  assertEquals("softmax",l2.getActivationFn().toString());
  assertTrue(l2.getLossFn() instanceof LossMCXENT);
}
