@Test public void testCSVVariableSlidingWindowRecordReader() throws Exception {
  int maxLinesPerSequence=3;
  SequenceRecordReader seqRR=new CSVVariableSlidingWindowRecordReader(maxLinesPerSequence);
  seqRR.initialize(new FileSplit(new ClassPathResource("datavec-api/iris.dat").getFile()));
  CSVRecordReader rr=new CSVRecordReader();
  rr.initialize(new FileSplit(new ClassPathResource("datavec-api/iris.dat").getFile()));
  int count=0;
  while (seqRR.hasNext()) {
    List<List<Writable>> next=seqRR.sequenceRecord();
    if (count == maxLinesPerSequence - 1) {
      LinkedList<List<Writable>> expected=new LinkedList<>();
      for (int i=0; i < maxLinesPerSequence; i++) {
        expected.addFirst(rr.next());
      }
      assertEquals(expected,next);
    }
    if (count == maxLinesPerSequence) {
      assertEquals(maxLinesPerSequence,next.size());
    }
    if (count == 0) {
      assertEquals(1,next.size());
    }
    if (count > 151) {
      assertEquals(1,next.size());
    }
    count++;
  }
  assertEquals(152,count);
}
