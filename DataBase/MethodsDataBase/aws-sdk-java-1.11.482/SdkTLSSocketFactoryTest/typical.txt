@Test public void typical() throws NoSuchAlgorithmException {
  SdkTLSSocketFactory f=new SdkTLSSocketFactory(SSLContext.getDefault(),null);
  TestSSLSocket socket=new TestSSLSocket(){
    @Override public String[] getSupportedProtocols(){
      return shuffle(new String[]{"SSLv2Hello","SSLv3","TLSv1","TLSv1.1","TLSv1.2"});
    }
    @Override public String[] getEnabledProtocols(){
      return shuffle(new String[]{"SSLv3","TLSv1"});
    }
  }
;
  f.prepareSocket(socket);
  assertArrayEquals(new String[]{"TLSv1.2","TLSv1.1","TLSv1","SSLv3"},socket.getCapturedProtocols());
}
