@Test public void testSelectBlogWithPosts(){
  SqlSession session=sqlSessionFactory.openSession();
  try {
    Mapper mapper=session.getMapper(Mapper.class);
    Blog result=mapper.selectBlogByPrimaryKey(1);
    assertNotNull(result);
    assertEquals("Blog with posts",result.getTitle());
    Assert.assertEquals(2,result.getPosts().size());
    Post firstPost=result.getPosts().get(0);
    Assert.assertEquals(1,firstPost.getBlog().getId());
    Assert.assertEquals(2,firstPost.getComments().size());
    Post secondPost=result.getPosts().get(1);
    Assert.assertEquals(1,secondPost.getComments().size());
    Assert.assertEquals(2,secondPost.getComments().get(0).getPost().getId());
  }
  finally {
    session.close();
  }
}
