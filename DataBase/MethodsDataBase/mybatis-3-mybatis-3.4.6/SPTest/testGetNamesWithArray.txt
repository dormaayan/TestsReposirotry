@Test public void testGetNamesWithArray() throws SQLException {
  SqlSession sqlSession=sqlSessionFactory.openSession();
  try {
    SPMapper spMapper=sqlSession.getMapper(SPMapper.class);
    Array array=sqlSession.getConnection().createArrayOf("int",new Integer[]{1,2,5});
    Map<String,Object> parms=new HashMap<String,Object>();
    parms.put("ids",array);
    List<Name> names=spMapper.getNamesWithArray(parms);
    Object[] returnedIds=(Object[])parms.get("returnedIds");
    assertEquals(4,returnedIds.length);
    assertEquals(3,parms.get("requestedRows"));
    assertEquals(2,names.size());
  }
  finally {
    sqlSession.close();
  }
}
