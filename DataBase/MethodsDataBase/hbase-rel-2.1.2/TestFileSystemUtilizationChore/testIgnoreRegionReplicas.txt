@SuppressWarnings("unchecked") @Test public void testIgnoreRegionReplicas(){
  final Configuration conf=getDefaultHBaseConfiguration();
  final HRegionServer rs=mockRegionServer(conf);
  final List<Long> r1Sizes=Arrays.asList(1024L,2048L);
  final long r1Sum=sum(r1Sizes);
  final List<Long> r2Sizes=Arrays.asList(1024L * 1024L);
  final FileSystemUtilizationChore chore=new FileSystemUtilizationChore(rs);
  doAnswer(new ExpectedRegionSizeSummationAnswer(r1Sum)).when(rs).reportRegionSizesForQuotas((Map<RegionInfo,Long>)any());
  final Region r1=mockRegionWithSize(r1Sizes);
  final Region r2=mockRegionReplicaWithSize(r2Sizes);
  Mockito.doReturn(Arrays.asList(r1,r2)).when(rs).getRegions();
  chore.chore();
}
