@Test public void camelContextShouldBeStartedLastAndStoppedFirst(){
  final ConfigurableApplicationContext context=createContext();
  final ServiceSupport camelContext=(ServiceSupport)context.getBean(CamelContext.class);
  final Map<String,TestState> testStates=context.getBeansOfType(TestState.class);
  assertThat(camelContext.isStarted()).as("Camel context should be started").isTrue();
  context.close();
  assertThat(camelContext.isStopped()).as("Camel context should be stopped").isTrue();
  testStates.values().stream().forEach(TestState::assertValid);
}
