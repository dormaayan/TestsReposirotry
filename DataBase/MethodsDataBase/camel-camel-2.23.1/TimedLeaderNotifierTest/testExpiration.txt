@Test public void testExpiration() throws Exception {
  Set<String> members=new TreeSet<>(Arrays.asList("one","two","three"));
  notifier.refreshLeadership(Optional.of("one"),System.currentTimeMillis(),50L,members);
  notifier.refreshLeadership(Optional.of("two"),System.currentTimeMillis(),50L,members);
  Thread.sleep(160);
  assertEquals(Optional.empty(),currentLeader);
  assertEquals(members,currentMembers);
  notifier.refreshLeadership(Optional.of("three"),System.currentTimeMillis(),5000L,members);
  Thread.sleep(80);
  assertEquals(Optional.of("three"),currentLeader);
  assertEquals(members,currentMembers);
}
