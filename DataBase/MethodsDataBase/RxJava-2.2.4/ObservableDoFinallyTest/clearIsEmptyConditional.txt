@Test public void clearIsEmptyConditional(){
  Observable.range(1,5).doFinally(this).filter(Functions.alwaysTrue()).subscribe(new Observer<Integer>(){
    @Override public void onSubscribe(    Disposable d){
      @SuppressWarnings("unchecked") QueueDisposable<Integer> qd=(QueueDisposable<Integer>)d;
      qd.requestFusion(QueueFuseable.ANY);
      assertFalse(qd.isEmpty());
      assertFalse(qd.isDisposed());
      try {
        assertEquals(1,qd.poll().intValue());
      }
 catch (      Throwable ex) {
        throw new RuntimeException(ex);
      }
      assertFalse(qd.isEmpty());
      qd.clear();
      assertTrue(qd.isEmpty());
      qd.dispose();
      assertTrue(qd.isDisposed());
    }
    @Override public void onNext(    Integer t){
    }
    @Override public void onError(    Throwable t){
    }
    @Override public void onComplete(){
    }
  }
);
  assertEquals(1,calls);
}
