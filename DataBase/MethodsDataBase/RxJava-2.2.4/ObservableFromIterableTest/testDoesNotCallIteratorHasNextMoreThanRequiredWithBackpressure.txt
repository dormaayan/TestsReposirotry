@Test public void testDoesNotCallIteratorHasNextMoreThanRequiredWithBackpressure(){
  final AtomicBoolean called=new AtomicBoolean(false);
  Iterable<Integer> iterable=new Iterable<Integer>(){
    @Override public Iterator<Integer> iterator(){
      return new Iterator<Integer>(){
        int count=1;
        @Override public void remove(){
        }
        @Override public boolean hasNext(){
          if (count > 1) {
            called.set(true);
            return false;
          }
          return true;
        }
        @Override public Integer next(){
          return count++;
        }
      }
;
    }
  }
;
  Observable.fromIterable(iterable).take(1).subscribe();
  assertFalse(called.get());
}
