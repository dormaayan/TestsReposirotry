@Test public void async4(){
  Maybe.just(1).flattenAsObservable(new Function<Object,Iterable<Integer>>(){
    @Override public Iterable<Integer> apply(    Object v) throws Exception {
      Integer[] array=new Integer[1000 * 1000];
      Arrays.fill(array,1);
      return Arrays.asList(array);
    }
  }
).observeOn(Schedulers.single()).take(500 * 1000).test().awaitDone(5,TimeUnit.SECONDS).assertSubscribed().assertValueCount(500 * 1000).assertNoErrors().assertComplete();
}
