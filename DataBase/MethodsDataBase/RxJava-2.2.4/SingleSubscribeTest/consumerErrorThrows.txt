@Test public void consumerErrorThrows(){
  List<Throwable> list=TestHelper.trackPluginErrors();
  try {
    Single.<Integer>error(new TestException("Outer failure")).subscribe(Functions.<Integer>emptyConsumer(),new Consumer<Throwable>(){
      @Override public void accept(      Throwable t) throws Exception {
        throw new TestException("Inner failure");
      }
    }
);
    TestHelper.assertError(list,0,CompositeException.class);
    List<Throwable> cel=TestHelper.compositeList(list.get(0));
    TestHelper.assertError(cel,0,TestException.class,"Outer failure");
    TestHelper.assertError(cel,1,TestException.class,"Inner failure");
  }
  finally {
    RxJavaPlugins.reset();
  }
}
