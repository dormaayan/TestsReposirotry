@Test public void errorDetaches() throws Exception {
  Disposable d=Disposables.empty();
  final WeakReference<Disposable> wr=new WeakReference<Disposable>(d);
  TestObserver<Integer> to=new Single<Integer>(){
    @Override protected void subscribeActual(    SingleObserver<? super Integer> observer){
      observer.onSubscribe(wr.get());
      observer.onError(new TestException());
      observer.onError(new IOException());
    }
  }
.onTerminateDetach().test();
  d=null;
  System.gc();
  Thread.sleep(200);
  to.assertFailure(TestException.class);
  assertNull(wr.get());
}
