@Test public void scheduledRequests(){
  Flowable.create(new FlowableOnSubscribe<Object>(){
    @Override public void subscribe(    FlowableEmitter<Object> s) throws Exception {
      for (int i=1; i < 1001; i++) {
        s.onNext(i);
        Thread.sleep(1);
      }
      s.onComplete();
    }
  }
,BackpressureStrategy.DROP).map(Functions.identity()).subscribeOn(Schedulers.single()).observeOn(Schedulers.computation()).test().awaitDone(5,TimeUnit.SECONDS).assertValueCount(Flowable.bufferSize()).assertNoErrors().assertComplete();
}
