@Test public void testComplexQuery() throws Exception {
  final String xpath="//VARIABLE_DEF[@text='pi' and " + "../..[@text='countTokens']] " + "| //VARIABLE_DEF[@text='someVariable' and ../..[@text='sum']]";
  final XpathFilter filter=new XpathFilter("InputXpathFilterSuppressByXpath","Test",null,null,xpath);
  final TreeWalkerAuditEvent eventOne=getEvent(5,8,TokenTypes.VARIABLE_DEF);
  final TreeWalkerAuditEvent eventTwo=getEvent(10,4,TokenTypes.VARIABLE_DEF);
  final TreeWalkerAuditEvent eventThree=getEvent(15,8,TokenTypes.VARIABLE_DEF);
  assertFalse("Event should be rejected",filter.accept(eventOne));
  assertTrue("Event should be accepted",filter.accept(eventTwo));
  assertFalse("Event should be rejected",filter.accept(eventThree));
}
