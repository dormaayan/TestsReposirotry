@Test public void testBehaviourWithOrdinaryAndCommentChecks() throws Exception {
  final TreeWalker treeWalker=new TreeWalker();
  treeWalker.configure(createModuleConfig(TypeNameCheck.class));
  treeWalker.configure(createModuleConfig(CommentsIndentationCheck.class));
  final PackageObjectFactory factory=new PackageObjectFactory(new HashSet<>(),Thread.currentThread().getContextClassLoader());
  treeWalker.setModuleFactory(factory);
  treeWalker.setupChild(createModuleConfig(TypeNameCheck.class));
  treeWalker.setupChild(createModuleConfig(CommentsIndentationCheck.class));
  final File file=temporaryFolder.newFile("file.java");
  final List<String> lines=new ArrayList<>();
  lines.add(" class a%$# {} ");
  final FileText fileText=new FileText(file,lines);
  try {
    treeWalker.processFiltered(file,fileText);
    fail("file is not compilable, exception is expected");
  }
 catch (  CheckstyleException exception) {
    final String message="TokenStreamRecognitionException occurred while parsing file";
    assertTrue("Error message is unexpected",exception.getMessage().contains(message));
  }
}
