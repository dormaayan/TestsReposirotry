@Test public void testDestroy() throws Exception {
  final Checker checker=new Checker();
  final DebugAuditAdapter auditAdapter=new DebugAuditAdapter();
  checker.addListener(auditAdapter);
  final TestFileSetCheck fileSet=new TestFileSetCheck();
  checker.addFileSetCheck(fileSet);
  final DebugFilter filter=new DebugFilter();
  checker.addFilter(filter);
  final TestBeforeExecutionFileFilter fileFilter=new TestBeforeExecutionFileFilter();
  checker.addBeforeExecutionFileFilter(fileFilter);
  checker.destroy();
  checker.process(Collections.singletonList(temporaryFolder.newFile()));
  final SortedSet<LocalizedMessage> messages=new TreeSet<>();
  messages.add(new LocalizedMessage(1,0,"a Bundle","message.key",new Object[]{"arg"},null,getClass(),null));
  checker.fireErrors("Some File Name",messages);
  assertFalse("Checker.destroy() doesn't remove listeners.",auditAdapter.wasCalled());
  assertFalse("Checker.destroy() doesn't remove file sets.",fileSet.wasCalled());
  assertFalse("Checker.destroy() doesn't remove filters.",filter.wasCalled());
  assertFalse("Checker.destroy() doesn't remove file filters.",fileFilter.wasCalled());
}
