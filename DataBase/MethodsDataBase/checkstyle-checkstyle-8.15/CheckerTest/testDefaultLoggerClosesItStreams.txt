@Test public void testDefaultLoggerClosesItStreams() throws Exception {
  final Checker checker=new Checker();
  try (CloseAndFlushTestByteArrayOutputStream testInfoOutputStream=new CloseAndFlushTestByteArrayOutputStream();CloseAndFlushTestByteArrayOutputStream testErrorOutputStream=new CloseAndFlushTestByteArrayOutputStream()){
    checker.setModuleClassLoader(Thread.currentThread().getContextClassLoader());
    checker.addListener(new DefaultLogger(testInfoOutputStream,true,testErrorOutputStream,true));
    final File tmpFile=temporaryFolder.newFile("file.java");
    final String[] expected=CommonUtil.EMPTY_STRING_ARRAY;
    verify(checker,tmpFile.getPath(),expected);
    assertEquals("Close count was not expected",1,testInfoOutputStream.getCloseCount());
    assertEquals("Flush count was not expected",3,testInfoOutputStream.getFlushCount());
    assertEquals("Close count was not expected",1,testErrorOutputStream.getCloseCount());
    assertEquals("Flush count was not expected",1,testErrorOutputStream.getFlushCount());
  }
 }
