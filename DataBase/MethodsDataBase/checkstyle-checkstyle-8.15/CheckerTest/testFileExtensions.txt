@Test public void testFileExtensions() throws Exception {
  final DefaultConfiguration checkerConfig=new DefaultConfiguration("configuration");
  checkerConfig.addAttribute("charset",StandardCharsets.UTF_8.name());
  checkerConfig.addAttribute("cacheFile",temporaryFolder.newFile().getPath());
  final Checker checker=new Checker();
  checker.setModuleClassLoader(Thread.currentThread().getContextClassLoader());
  checker.configure(checkerConfig);
  final DebugAuditAdapter auditAdapter=new DebugAuditAdapter();
  checker.addListener(auditAdapter);
  final List<File> files=new ArrayList<>();
  final File file=new File("file.pdf");
  files.add(file);
  final File otherFile=new File("file.java");
  files.add(otherFile);
  final String[] fileExtensions={"java","xml","properties"};
  checker.setFileExtensions(fileExtensions);
  checker.setCacheFile(temporaryFolder.newFile().getPath());
  final int counter=checker.process(files);
  final int numLegalFiles=1;
  final PropertyCacheFile cache=Whitebox.getInternalState(checker,"cacheFile");
  assertEquals("There were more legal files than expected",numLegalFiles,counter);
  assertEquals("Audit was started on larger amount of files than expected",numLegalFiles,auditAdapter.getNumFilesStarted());
  assertEquals("Audit was finished on larger amount of files than expected",numLegalFiles,auditAdapter.getNumFilesFinished());
  assertNull("Cache shout not contain any file",cache.get(new File("file.java").getCanonicalPath()));
}
