@Test public void testWithCacheWithNoViolation() throws Exception {
  final Checker checker=new Checker();
  final PackageObjectFactory factory=new PackageObjectFactory(new HashSet<>(),Thread.currentThread().getContextClassLoader());
  checker.setModuleFactory(factory);
  checker.configure(createModuleConfig(TranslationCheck.class));
  final File cacheFile=temporaryFolder.newFile();
  checker.setCacheFile(cacheFile.getPath());
  checker.setupChild(createModuleConfig(TranslationCheck.class));
  final File tmpFile=temporaryFolder.newFile("file.java");
  final List<File> files=new ArrayList<>(1);
  files.add(tmpFile);
  checker.process(files);
  checker.destroy();
  final Properties cache=new Properties();
  cache.load(Files.newBufferedReader(cacheFile.toPath()));
  final int expectedNumberOfObjectsInCache=2;
  assertEquals("Cache has unexpected size",expectedNumberOfObjectsInCache,cache.size());
  final String expectedConfigHash="B8535A811CA90BE8B7A14D40BCA62B4FC2447B46";
  assertEquals("Cache has unexpected hash",expectedConfigHash,cache.getProperty(PropertyCacheFile.CONFIG_HASH_KEY));
  assertNotNull("Cache file has null path",cache.getProperty(tmpFile.getPath()));
}
