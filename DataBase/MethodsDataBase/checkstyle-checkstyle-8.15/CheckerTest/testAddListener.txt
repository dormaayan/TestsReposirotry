@Test public void testAddListener() throws Exception {
  final Checker checker=new Checker();
  final DebugAuditAdapter auditAdapter=new DebugAuditAdapter();
  checker.addListener(auditAdapter);
  getFireAuditStartedMethod().invoke(checker);
  assertTrue("Checker.fireAuditStarted() doesn't call listener",auditAdapter.wasCalled());
  auditAdapter.resetListener();
  getFireAuditFinished().invoke(checker);
  assertTrue("Checker.fireAuditFinished() doesn't call listener",auditAdapter.wasCalled());
  auditAdapter.resetListener();
  checker.fireFileStarted("Some File Name");
  assertTrue("Checker.fireFileStarted() doesn't call listener",auditAdapter.wasCalled());
  auditAdapter.resetListener();
  checker.fireFileFinished("Some File Name");
  assertTrue("Checker.fireFileFinished() doesn't call listener",auditAdapter.wasCalled());
  auditAdapter.resetListener();
  final SortedSet<LocalizedMessage> messages=new TreeSet<>();
  messages.add(new LocalizedMessage(1,0,"a Bundle","message.key",new Object[]{"arg"},null,getClass(),null));
  checker.fireErrors("Some File Name",messages);
  assertTrue("Checker.fireErrors() doesn't call listener",auditAdapter.wasCalled());
}
