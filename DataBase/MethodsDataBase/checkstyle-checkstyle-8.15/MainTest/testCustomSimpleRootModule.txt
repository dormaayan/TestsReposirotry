@Test public void testCustomSimpleRootModule() throws Exception {
  TestRootModuleChecker.reset();
  exit.expectSystemExitWithStatus(-2);
  exit.checkAssertionAfterwards(() -> {
    final String checkstylePackage="com.puppycrawl.tools.checkstyle.";
    final LocalizedMessage unableToInstantiateExceptionMessage=new LocalizedMessage(1,Definitions.CHECKSTYLE_BUNDLE,"PackageObjectFactory.unableToInstantiateExceptionMessage",new String[]{"TestRootModuleChecker",checkstylePackage + "TestRootModuleChecker, " + "TestRootModuleCheckerCheck, "+ checkstylePackage+ "TestRootModuleCheckerCheck"},null,getClass(),null);
    assertEquals("Unexpected output log",errorCounterOneMessage.getMessage() + EOL,systemOut.getLog());
    assertTrue("Unexpected system error log",systemErr.getLog().startsWith(checkstylePackage + "api.CheckstyleException: " + unableToInstantiateExceptionMessage.getMessage()));
    assertFalse("Invalid checker state",TestRootModuleChecker.isProcessed());
  }
);
  Main.main("-c",getPath("InputMainConfig-custom-simple-root-module.xml"),getPath("InputMain.java"));
}
