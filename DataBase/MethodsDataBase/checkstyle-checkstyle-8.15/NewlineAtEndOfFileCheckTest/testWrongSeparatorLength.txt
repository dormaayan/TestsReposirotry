@Test public void testWrongSeparatorLength() throws Exception {
  final NewlineAtEndOfFileCheck check=new NewlineAtEndOfFileCheck();
  final DefaultConfiguration checkConfig=createModuleConfig(NewlineAtEndOfFileCheck.class);
  check.configure(checkConfig);
  final Method method=NewlineAtEndOfFileCheck.class.getDeclaredMethod("endsWithNewline",RandomAccessFile.class);
  method.setAccessible(true);
  final RandomAccessFile file=mock(RandomAccessFile.class);
  when(file.length()).thenReturn(2_000_000L);
  try {
    method.invoke(new NewlineAtEndOfFileCheck(),file);
    fail("Exception is expected");
  }
 catch (  InvocationTargetException ex) {
    assertTrue("Error type is unexpected",ex.getCause() instanceof IOException);
    if (System.getProperty("os.name").toLowerCase(ENGLISH).startsWith("windows")) {
      assertEquals("Error message is unexpected","Unable to read 2 bytes, got 0",ex.getCause().getMessage());
    }
 else {
      assertEquals("Error message is unexpected","Unable to read 1 bytes, got 0",ex.getCause().getMessage());
    }
  }
}
