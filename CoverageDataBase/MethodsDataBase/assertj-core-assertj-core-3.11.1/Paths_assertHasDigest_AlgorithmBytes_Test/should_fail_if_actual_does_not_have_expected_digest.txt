@Test public void should_fail_if_actual_does_not_have_expected_digest() throws IOException, NoSuchAlgorithmException {
  InputStream stream=getClass().getResourceAsStream("/red.png");
  given(nioFilesWrapper.exists(actual)).willReturn(true);
  given(nioFilesWrapper.isRegularFile(actual)).willReturn(true);
  given(nioFilesWrapper.isReadable(actual)).willReturn(true);
  given(nioFilesWrapper.newInputStream(actual)).willReturn(stream);
  catchThrowable(() -> paths.assertHasDigest(INFO,actual,algorithm,expected));
  verify(failures).failure(INFO,shouldHaveDigest(actual,new DigestDiff(real,"",MessageDigest.getInstance(algorithm))));
  failIfStreamIsOpen(stream);
}
