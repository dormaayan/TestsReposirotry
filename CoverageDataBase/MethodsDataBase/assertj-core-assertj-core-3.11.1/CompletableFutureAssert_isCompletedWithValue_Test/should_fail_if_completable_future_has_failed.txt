@Test public void should_fail_if_completable_future_has_failed(){
  CompletableFuture<String> future=new CompletableFuture<>();
  future.completeExceptionally(new RuntimeException());
  Throwable throwable=catchThrowable(() -> assertThat(future).isCompletedWithValue("done"));
  assertThat(throwable).isInstanceOf(AssertionError.class).hasMessageStartingWith(format("%nExpecting%n  <CompletableFuture[Failed: java.lang.RuntimeException]%n")).hasMessageContaining("Caused by: java.lang.RuntimeException").hasMessageEndingWith(format("to be completed.%n%s",WARNING));
}
