@Test public void should_fail_if_completable_future_was_cancelled(){
  CompletableFuture<String> future=new CompletableFuture<>();
  future.cancel(true);
  Throwable throwable=catchThrowable(() -> assertThat(future).isCompletedWithValue("done"));
  assertThat(throwable).isInstanceOf(AssertionError.class).hasMessage(shouldBeCompleted(future).create());
}
