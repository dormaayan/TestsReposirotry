@Test public void testSessionBind() throws Exception {
  final InetSocketAddress local=new InetSocketAddress(InetAddress.getByAddress(new byte[]{127,0,0,1}),8888);
  final InetSocketAddress remote=new InetSocketAddress(InetAddress.getByAddress(new byte[]{10,0,0,2}),80);
  Mockito.when(session.getLocalAddress()).thenReturn(local);
  Mockito.when(session.getRemoteAddress()).thenReturn(remote);
  Mockito.when(session.isClosed()).thenReturn(Boolean.FALSE);
  conn.bind(session);
  Mockito.verify(session,Mockito.times(2)).setBufferStatus(conn);
  Assert.assertEquals("127.0.0.1:8888<->10.0.0.2:80",conn.toString());
  Assert.assertTrue(conn.isOpen());
  Assert.assertEquals(8888,conn.getLocalPort());
  Assert.assertEquals(80,conn.getRemotePort());
  Assert.assertEquals(InetAddress.getByAddress(new byte[]{127,0,0,1}),conn.getLocalAddress());
  Assert.assertEquals(InetAddress.getByAddress(new byte[]{10,0,0,2}),conn.getRemoteAddress());
}
