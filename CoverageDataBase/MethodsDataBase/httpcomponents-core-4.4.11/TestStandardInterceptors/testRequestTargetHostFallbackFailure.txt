@Test(expected=ProtocolException.class) public void testRequestTargetHostFallbackFailure() throws Exception {
  final HttpContext context=new BasicHttpContext(null);
  final BasicHttpRequest request=new BasicHttpRequest("GET","/");
  final HttpInetConnection conn=Mockito.mock(HttpInetConnection.class);
  Mockito.when(conn.getRemoteAddress()).thenReturn(null);
  Mockito.when(conn.getRemotePort()).thenReturn(1234);
  context.setAttribute(HttpCoreContext.HTTP_TARGET_HOST,null);
  context.setAttribute(HttpCoreContext.HTTP_CONNECTION,conn);
  final RequestTargetHost interceptor=new RequestTargetHost();
  interceptor.process(request,context);
}
