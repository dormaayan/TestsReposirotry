@Test public void testResponseConnControlClientRequest() throws Exception {
  final HttpContext context=new BasicHttpContext(null);
  final BasicHttpRequest request=new BasicHttpRequest("GET","/");
  request.addHeader(new BasicHeader(HTTP.CONN_DIRECTIVE,HTTP.CONN_KEEP_ALIVE));
  context.setAttribute(HttpCoreContext.HTTP_REQUEST,request);
  final HttpResponse response=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_OK,"OK");
  final StringEntity entity=new StringEntity("whatever");
  response.setEntity(entity);
  final ResponseConnControl interceptor=new ResponseConnControl();
  interceptor.process(response,context);
  final Header header=response.getFirstHeader(HTTP.CONN_DIRECTIVE);
  Assert.assertNotNull(header);
  Assert.assertEquals(HTTP.CONN_KEEP_ALIVE,header.getValue());
}
