@Test public void testResponseContentInput() throws Exception {
  final State state=new HttpAsyncRequestExecutor.State();
  state.setResponseState(MessageState.BODY_STREAM);
  this.connContext.setAttribute(HttpAsyncRequestExecutor.HTTP_EXCHANGE_STATE,state);
  this.connContext.setAttribute(HttpAsyncRequestExecutor.HTTP_HANDLER,this.exchangeHandler);
  Mockito.when(this.decoder.isCompleted()).thenReturn(Boolean.FALSE);
  this.protocolHandler.inputReady(this.conn,this.decoder);
  Mockito.verify(this.exchangeHandler).consumeContent(this.decoder,this.conn);
  Assert.assertEquals(MessageState.BODY_STREAM,state.getResponseState());
}
