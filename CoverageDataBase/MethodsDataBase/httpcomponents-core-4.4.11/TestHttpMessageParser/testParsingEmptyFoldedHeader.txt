@Test public void testParsingEmptyFoldedHeader() throws Exception {
  final SessionInputBuffer inbuf=new SessionInputBufferImpl(1024,128,Consts.ASCII);
  final NHttpMessageParser<HttpRequest> requestParser=new DefaultHttpRequestParser(inbuf);
  requestParser.fillBuffer(newChannel("GET /whatev"));
  HttpRequest request=requestParser.parse();
  Assert.assertNull(request);
  requestParser.fillBuffer(newChannel("er HTTP/1.1\r"));
  request=requestParser.parse();
  Assert.assertNull(request);
  requestParser.fillBuffer(newChannel("\n  Some header: stuff\r\n"));
  request=requestParser.parse();
  Assert.assertNull(request);
  requestParser.fillBuffer(newChannel("      \r\n"));
  request=requestParser.parse();
  Assert.assertNull(request);
  requestParser.fillBuffer(newChannel("      more stuff\r\n"));
  request=requestParser.parse();
  Assert.assertNull(request);
  requestParser.fillBuffer(newChannel("\r\n"));
  request=requestParser.parse();
  Assert.assertNotNull(request);
  Assert.assertEquals("/whatever",request.getRequestLine().getUri());
  Assert.assertEquals(1,request.getAllHeaders().length);
  Assert.assertEquals("stuff  more stuff",request.getFirstHeader("Some header").getValue());
}
