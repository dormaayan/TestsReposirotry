@Test public void testWriteTo() throws Exception {
  final HttpEntity httpentity=new EntityTemplate(new ContentProducer(){
    @Override public void writeTo(    final OutputStream outStream) throws IOException {
      outStream.write('a');
    }
  }
);
  final ByteArrayOutputStream out=new ByteArrayOutputStream();
  httpentity.writeTo(out);
  final byte[] bytes2=out.toByteArray();
  Assert.assertNotNull(bytes2);
  Assert.assertEquals(1,bytes2.length);
  try {
    httpentity.writeTo(null);
    Assert.fail("IllegalArgumentException should have been thrown");
  }
 catch (  final IllegalArgumentException ex) {
  }
}
