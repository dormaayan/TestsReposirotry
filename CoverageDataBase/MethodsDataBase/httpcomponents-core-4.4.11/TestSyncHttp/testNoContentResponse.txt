@Test public void testNoContentResponse() throws Exception {
  final int reqNo=20;
  this.server.registerHandler("*",new HttpRequestHandler(){
    @Override public void handle(    final HttpRequest request,    final HttpResponse response,    final HttpContext context) throws HttpException, IOException {
      response.setStatusCode(HttpStatus.SC_NO_CONTENT);
    }
  }
);
  this.server.start();
  final DefaultBHttpClientConnection conn=client.createConnection();
  final HttpHost host=new HttpHost("localhost",this.server.getPort());
  try {
    for (int r=0; r < reqNo; r++) {
      if (!conn.isOpen()) {
        client.connect(host,conn);
      }
      final BasicHttpRequest get=new BasicHttpRequest("GET","/?" + r);
      final HttpResponse response=this.client.execute(get,host,conn);
      Assert.assertNull(response.getEntity());
      if (!this.client.keepAlive(response)) {
        conn.close();
        Assert.fail("Connection expected to be re-usable");
      }
    }
    final HttpConnectionMetrics cm=conn.getMetrics();
    Assert.assertEquals(reqNo,cm.getRequestCount());
    Assert.assertEquals(reqNo,cm.getResponseCount());
  }
  finally {
    conn.close();
    this.server.shutdown();
  }
}
