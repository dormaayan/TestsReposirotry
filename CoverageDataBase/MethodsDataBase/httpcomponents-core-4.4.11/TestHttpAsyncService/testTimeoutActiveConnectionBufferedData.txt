@Test public void testTimeoutActiveConnectionBufferedData() throws Exception {
  final State state=new State();
  this.connContext.setAttribute(HttpAsyncService.HTTP_EXCHANGE_STATE,state);
  Mockito.when(this.conn.getStatus()).thenReturn(NHttpConnection.ACTIVE,NHttpConnection.CLOSING);
  this.protocolHandler.timeout(this.conn);
  Mockito.verify(this.conn).close();
  Mockito.verify(this.conn).setSocketTimeout(250);
}
