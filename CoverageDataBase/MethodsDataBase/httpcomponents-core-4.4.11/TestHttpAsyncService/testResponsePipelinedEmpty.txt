@Test public void testResponsePipelinedEmpty() throws Exception {
  final State state=new State();
  state.setRequestState(MessageState.READY);
  this.connContext.setAttribute(HttpAsyncService.HTTP_EXCHANGE_STATE,state);
  this.protocolHandler.responseReady(this.conn);
  Assert.assertEquals(MessageState.READY,state.getRequestState());
  Assert.assertEquals(MessageState.READY,state.getResponseState());
  Assert.assertNull(state.getOutgoing());
  Mockito.verify(conn).suspendOutput();
  Mockito.verifyNoMoreInteractions(requestHandler);
}
