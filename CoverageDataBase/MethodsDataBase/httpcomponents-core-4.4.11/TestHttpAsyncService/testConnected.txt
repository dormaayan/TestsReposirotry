@Test public void testConnected() throws Exception {
  this.protocolHandler.connected(this.conn);
  final State state=(State)this.connContext.getAttribute(HttpAsyncService.HTTP_EXCHANGE_STATE);
  Assert.assertNotNull(state);
  Assert.assertEquals(MessageState.READY,state.getRequestState());
  Assert.assertEquals(MessageState.READY,state.getResponseState());
  Assert.assertEquals("[incoming READY; outgoing READY]",state.toString());
}
