@Test public void testBasicMessageParsing() throws Exception {
  final String s="GET / HTTP/1.1\r\n" + "Host: localhost\r\n" + "User-Agent: whatever\r\n"+ "Cookie: c1=stuff\r\n"+ "\r\n";
  final SessionInputBuffer inBuffer=new SessionInputBufferMock(s,Consts.ASCII);
  final DefaultHttpRequestParser parser=new DefaultHttpRequestParser(inBuffer);
  final HttpRequest httprequest=parser.parse();
  final RequestLine reqline=httprequest.getRequestLine();
  Assert.assertNotNull(reqline);
  Assert.assertEquals("GET",reqline.getMethod());
  Assert.assertEquals("/",reqline.getUri());
  Assert.assertEquals(HttpVersion.HTTP_1_1,reqline.getProtocolVersion());
  final Header[] headers=httprequest.getAllHeaders();
  Assert.assertEquals(3,headers.length);
}
