@Test public void testPrepareInputLengthDelimited() throws Exception {
  final HttpResponse message=new BasicHttpResponse(HttpVersion.HTTP_1_1,200,"OK");
  message.addHeader("Content-Length","10");
  message.addHeader("Content-Type","stuff");
  message.addHeader("Content-Encoding","identity");
  final HttpEntity entity=conn.prepareInput(message);
  Assert.assertNotNull(entity);
  Assert.assertFalse(entity.isChunked());
  Assert.assertEquals(10,entity.getContentLength());
  final Header ct=entity.getContentType();
  Assert.assertNotNull(ct);
  Assert.assertEquals("stuff",ct.getValue());
  final Header ce=entity.getContentEncoding();
  Assert.assertNotNull(ce);
  Assert.assertEquals("identity",ce.getValue());
  final InputStream inStream=entity.getContent();
  Assert.assertNotNull(inStream);
  Assert.assertTrue((inStream instanceof ContentLengthInputStream));
}
