@Test public void testGenerateRequest() throws Exception {
  final BasicHttpRequest request=new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1);
  Mockito.when(this.requestProducer.generateRequest()).thenReturn(request);
  final HttpRequest result=this.exchangeHandler.generateRequest();
  Assert.assertSame(request,result);
  Mockito.verify(this.requestProducer).generateRequest();
  Assert.assertSame(request,this.context.getAttribute(HttpCoreContext.HTTP_REQUEST));
  Assert.assertSame(this.conn,this.context.getAttribute(HttpCoreContext.HTTP_CONNECTION));
  Mockito.verify(this.httpProcessor).process(request,this.context);
}
