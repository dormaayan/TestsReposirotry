@Test public void testMultibyteCodedReadWriteLongLine() throws Exception {
  final String s1=constructString(SWISS_GERMAN_HELLO);
  final String s2=constructString(RUSSIAN_HELLO);
  final String s3="Like hello and stuff";
  final StringBuilder buf=new StringBuilder();
  for (int i=0; i < 1024; i++) {
    buf.append(s1).append(s2).append(s3);
  }
  final String s=buf.toString();
  final SessionOutputBufferMock outbuffer=new SessionOutputBufferMock(Consts.UTF_8);
  final CharArrayBuffer chbuffer=new CharArrayBuffer(16);
  chbuffer.append(s);
  outbuffer.writeLine(chbuffer);
  outbuffer.flush();
  final SessionInputBufferMock inBuffer=new SessionInputBufferMock(outbuffer.getData(),Consts.UTF_8);
  Assert.assertEquals(s,inBuffer.readLine());
}
