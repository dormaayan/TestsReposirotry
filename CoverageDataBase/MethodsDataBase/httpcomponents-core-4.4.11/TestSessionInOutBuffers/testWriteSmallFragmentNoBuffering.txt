@Test public void testWriteSmallFragmentNoBuffering() throws Exception {
  final ByteArrayOutputStream outStream=Mockito.spy(new ByteArrayOutputStream());
  final SessionOutputBufferMock outbuffer=new SessionOutputBufferMock(outStream,16,0,null);
  outbuffer.write(1);
  outbuffer.write(2);
  outbuffer.write(new byte[]{1,2});
  outbuffer.write(new byte[]{3,4});
  Mockito.verify(outStream,Mockito.times(2)).write(Matchers.<byte[]>any(),Matchers.anyInt(),Matchers.anyInt());
  Mockito.verify(outStream,Mockito.times(2)).write(Matchers.anyInt());
}
