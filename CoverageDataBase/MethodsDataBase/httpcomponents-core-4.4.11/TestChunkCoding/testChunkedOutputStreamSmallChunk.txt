@Test public void testChunkedOutputStreamSmallChunk() throws IOException {
  final ByteArrayOutputStream buffer=new ByteArrayOutputStream();
  final ChunkedOutputStream out=new ChunkedOutputStream(2,new SessionOutputBufferMock(buffer));
  out.write('1');
  out.finish();
  out.close();
  final byte[] rawdata=buffer.toByteArray();
  Assert.assertEquals(11,rawdata.length);
  Assert.assertEquals('1',rawdata[0]);
  Assert.assertEquals('\r',rawdata[1]);
  Assert.assertEquals('\n',rawdata[2]);
  Assert.assertEquals('1',rawdata[3]);
  Assert.assertEquals('\r',rawdata[4]);
  Assert.assertEquals('\n',rawdata[5]);
  Assert.assertEquals('0',rawdata[6]);
  Assert.assertEquals('\r',rawdata[7]);
  Assert.assertEquals('\n',rawdata[8]);
  Assert.assertEquals('\r',rawdata[9]);
  Assert.assertEquals('\n',rawdata[10]);
}
