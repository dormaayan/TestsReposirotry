@Test(expected=TruncatedChunkException.class) public void testCorruptChunkedInputStreamTruncatedChunk() throws IOException {
  final String s="3\r\n12";
  final InputStream in=new ChunkedInputStream(new SessionInputBufferMock(s,Consts.ISO_8859_1));
  final byte[] buffer=new byte[300];
  Assert.assertEquals(2,in.read(buffer));
  in.read(buffer);
  in.close();
}
