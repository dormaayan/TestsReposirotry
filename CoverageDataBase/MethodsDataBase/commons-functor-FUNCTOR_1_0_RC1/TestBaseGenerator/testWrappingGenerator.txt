@Test public void testWrappingGenerator(){
  final StringBuffer result=new StringBuffer();
  final Generator gen=new BaseGenerator(simpleGenerator){
    public void run(    final UnaryProcedure proc){
      Generator wrapped=getWrappedGenerator();
      assertSame(simpleGenerator,wrapped);
      wrapped.run(new UnaryProcedure(){
        public void run(        Object obj){
          proc.run(new Integer(((Integer)obj).intValue() + 1));
        }
      }
);
    }
  }
;
  gen.run(new UnaryProcedure(){
    public void run(    Object obj){
      result.append(obj);
    }
  }
);
  assertEquals("12345",result.toString());
  final StringBuffer result2=new StringBuffer();
  gen.run(new UnaryProcedure(){
    int i=0;
    public void run(    Object obj){
      result2.append(obj);
      if (i++ > 1) {
        gen.stop();
      }
    }
  }
);
  assertEquals("123",result2.toString());
}
