@Test public void testLoopWithAction() throws Exception {
  List<Object> list=getList();
  Procedure action=new ListRemoveFirstProcedure(list);
  Predicate condition=new Not(new BoundPredicate(new IsEmpty<List<Object>>(),list));
  Procedure procedure=new WhileDoProcedure(condition,action);
  assertTrue("The condition should be true before running the loop",condition.test());
  assertFalse("The list should not be empty then",list.isEmpty());
  procedure.run();
  assertFalse("The condition should be false after running the loop",condition.test());
  assertTrue("The list should be empty then",list.isEmpty());
  list=getList();
  action=new ListRemoveFirstProcedure(list);
  condition=new Predicate(){
    private int count=2;
    public boolean test(){
      return count-- > 0;
    }
  }
;
  procedure=new WhileDoProcedure(condition,action);
  procedure.run();
  assertFalse("The list should not contain \"a\" anymore",list.contains("a"));
  assertFalse("The list should not contain \"b\" anymore",list.contains("b"));
  assertTrue("The list should still contain \"c\"",list.contains("c"));
  assertTrue("The list should still contain \"d\"",list.contains("d"));
}
