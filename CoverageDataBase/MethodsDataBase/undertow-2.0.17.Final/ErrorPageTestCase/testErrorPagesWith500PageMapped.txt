@Test public void testErrorPagesWith500PageMapped() throws IOException {
  TestHttpClient client=new TestHttpClient();
  try {
    runTest(3,client,StatusCodes.NOT_FOUND,null,"/404");
    runTest(3,client,StatusCodes.INTERNAL_SERVER_ERROR,null,"/500");
    runTest(3,client,StatusCodes.NOT_IMPLEMENTED,null,"/defaultErrorPage");
    runTest(3,client,null,ParentException.class,"/parentException");
    runTest(3,client,null,ChildException.class,"/childException");
    runTest(3,client,null,RuntimeException.class,"/runtimeException");
    runTest(3,client,null,IllegalStateException.class,"/runtimeException");
    runTest(3,client,null,Exception.class,"/500");
    runTest(3,client,null,IOException.class,"/500");
    runTest(3,client,null,ServletException.class,"/500");
  }
  finally {
    client.getConnectionManager().shutdown();
  }
}
