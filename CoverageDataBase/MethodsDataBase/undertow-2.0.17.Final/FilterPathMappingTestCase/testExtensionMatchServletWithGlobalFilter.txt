@Test public void testExtensionMatchServletWithGlobalFilter() throws IOException, ServletException {
  DeploymentInfo builder=new DeploymentInfo();
  final PathHandler root=new PathHandler();
  final ServletContainer container=ServletContainer.Factory.newInstance();
  builder.addServlet(new ServletInfo("*.jsp",PathMappingServlet.class).addMapping("*.jsp"));
  builder.addFilter(new FilterInfo("/*",PathFilter.class));
  builder.addFilterUrlMapping("/*","/*",DispatcherType.REQUEST);
  builder.setClassIntrospecter(TestClassIntrospector.INSTANCE).setClassLoader(FilterPathMappingTestCase.class.getClassLoader()).setContextPath("/servletContext").setDeploymentName("servletContext.war");
  final DeploymentManager manager=container.addDeployment(builder);
  manager.deploy();
  root.addPrefixPath(builder.getContextPath(),manager.start());
  DefaultServer.setRootHandler(root);
  TestHttpClient client=new TestHttpClient();
  try {
    runTest(client,"aa.jsp","*.jsp - /aa.jsp - null","/*");
  }
  finally {
    client.getConnectionManager().shutdown();
  }
}
