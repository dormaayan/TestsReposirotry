@Test public void testRequestPaths() throws Exception {
  int port=DefaultServer.getHostPort("default");
  runtest("/servletContext/somePath",false,"null","/somePath","http://localhost:" + port + "/servletContext/somePath","/servletContext/somePath","");
  runtest("/servletContext/somePath?foo=bar",false,"null","/somePath","http://localhost:" + port + "/servletContext/somePath","/servletContext/somePath","foo=bar");
  runtest("/servletContext/somePath?foo=b+a+r",false,"null","/somePath","http://localhost:" + port + "/servletContext/somePath","/servletContext/somePath","foo=b+a+r");
  runtest("/servletContext/some%20path?foo=b+a+r",false,"null","/some path","http://localhost:" + port + "/servletContext/some%20path","/servletContext/some%20path","foo=b+a+r");
  runtest("/servletContext/somePath.txt",true,"null","/somePath.txt","http://localhost:" + port + "/servletContext/somePath.txt","/servletContext/somePath.txt","");
  runtest("/servletContext/somePath.txt?foo=bar",true,"null","/somePath.txt","http://localhost:" + port + "/servletContext/somePath.txt","/servletContext/somePath.txt","foo=bar");
  runtest("/servletContext/req/somePath",false,"/somePath","/req","http://localhost:" + port + "/servletContext/req/somePath","/servletContext/req/somePath","");
  runtest("/servletContext/req/somePath?foo=bar",false,"/somePath","/req","http://localhost:" + port + "/servletContext/req/somePath","/servletContext/req/somePath","foo=bar");
  runtest("/servletContext/req/somePath?foo=b+a+r",false,"/somePath","/req","http://localhost:" + port + "/servletContext/req/somePath","/servletContext/req/somePath","foo=b+a+r");
  runtest("/servletContext/req/some%20path?foo=b+a+r",false,"/some path","/req","http://localhost:" + port + "/servletContext/req/some%20path","/servletContext/req/some%20path","foo=b+a+r");
  runtest("/servletContext/req/somePath.txt",true,"/somePath.txt","/req","http://localhost:" + port + "/servletContext/req/somePath.txt","/servletContext/req/somePath.txt","");
  runtest("/servletContext/req/somePath.txt?foo=bar",true,"/somePath.txt","/req","http://localhost:" + port + "/servletContext/req/somePath.txt","/servletContext/req/somePath.txt","foo=bar");
  runtest("/servletContext/exact",false,"null","/exact","http://localhost:" + port + "/servletContext/exact","/servletContext/exact","");
  runtest("/servletContext/exact?foo=bar",false,"null","/exact","http://localhost:" + port + "/servletContext/exact","/servletContext/exact","foo=bar");
  runtest("/servletContext/exact.txt",true,"null","/exact.txt","http://localhost:" + port + "/servletContext/exact.txt","/servletContext/exact.txt","");
  runtest("/servletContext/exact.txt?foo=bar",true,"null","/exact.txt","http://localhost:" + port + "/servletContext/exact.txt","/servletContext/exact.txt","foo=bar");
  runtest("/servletContext/file.html",false,"null","/file.html","http://localhost:" + port + "/servletContext/file.html","/servletContext/file.html","");
  runtest("/servletContext/file.html?foo=bar",false,"null","/file.html","http://localhost:" + port + "/servletContext/file.html","/servletContext/file.html","foo=bar");
}
