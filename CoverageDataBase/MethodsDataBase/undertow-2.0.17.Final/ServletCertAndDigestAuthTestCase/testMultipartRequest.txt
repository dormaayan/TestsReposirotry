@Test public void testMultipartRequest() throws Exception {
  StringBuilder sb=new StringBuilder();
  for (int i=0; i < 2000; i++) {
    sb.append("0123456789");
  }
  try (TestHttpClient client=new TestHttpClient()){
    MultipartEntityBuilder builder=MultipartEntityBuilder.create();
    builder.addPart("part1",new ByteArrayBody(sb.toString().getBytes(),"file.txt"));
    builder.addPart("part2",new StringBody("0123456789",ContentType.TEXT_HTML));
    HttpEntity entity=builder.build();
    client.setSSLContext(clientSSLContext);
    String url=DefaultServer.getDefaultServerSSLAddress() + BASE_PATH + "multipart";
    HttpPost post=new HttpPost(url);
    post.setEntity(entity);
    post.addHeader(AUTHORIZATION.toString(),BASIC + " " + FlexBase64.encodeString(("user1" + ":" + "password1").getBytes(StandardCharsets.UTF_8),false));
    HttpResponse result=client.execute(post);
    assertEquals(StatusCodes.OK,result.getStatusLine().getStatusCode());
  }
 }
