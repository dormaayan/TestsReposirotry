@Test public void customCallAdapter(){
class GreetingCallAdapterFactory implements CallAdapter.Factory {
    @Override public CallAdapter<String> get(    Type returnType,    Annotation[] annotations,    Retrofit retrofit){
      if (Utils.getRawType(returnType) != String.class) {
        return null;
      }
      return new CallAdapter<String>(){
        @Override public Type responseType(){
          return String.class;
        }
        @Override public <R>String adapt(        Call<R> call){
          return "Hi!";
        }
      }
;
    }
  }
  Retrofit retrofit=new Retrofit.Builder().baseUrl(server.url("/")).addConverterFactory(new ToStringConverterFactory()).addCallAdapterFactory(new GreetingCallAdapterFactory()).build();
  StringService example=retrofit.create(StringService.class);
  assertThat(example.get()).isEqualTo("Hi!");
}
