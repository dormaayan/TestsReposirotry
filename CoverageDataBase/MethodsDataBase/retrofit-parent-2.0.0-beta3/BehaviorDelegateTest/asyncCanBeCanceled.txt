@Test public void asyncCanBeCanceled() throws InterruptedException {
  behavior.setDelay(10,SECONDS);
  behavior.setVariancePercent(0);
  behavior.setFailurePercent(0);
  final Call<String> call=service.response();
  final AtomicReference<Throwable> failureRef=new AtomicReference<>();
  final CountDownLatch latch=new CountDownLatch(1);
  call.enqueue(new Callback<String>(){
    @Override public void onResponse(    Response<String> response){
      latch.countDown();
    }
    @Override public void onFailure(    Throwable t){
      failureRef.set(t);
      latch.countDown();
    }
  }
);
  Thread.sleep(100);
  call.cancel();
  assertTrue(latch.await(1,SECONDS));
  assertThat(failureRef.get()).isExactlyInstanceOf(IOException.class).hasMessage("canceled");
}
