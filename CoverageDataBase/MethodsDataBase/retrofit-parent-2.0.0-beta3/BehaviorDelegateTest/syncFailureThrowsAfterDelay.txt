@Test public void syncFailureThrowsAfterDelay(){
  behavior.setDelay(100,MILLISECONDS);
  behavior.setVariancePercent(0);
  behavior.setFailurePercent(100);
  Call<String> call=service.response();
  long startNanos=System.nanoTime();
  try {
    call.execute();
    fail();
  }
 catch (  IOException e) {
    long tookMs=TimeUnit.NANOSECONDS.toMillis(System.nanoTime() - startNanos);
    assertThat(e).isSameAs(behavior.failureException());
    assertThat(tookMs).isGreaterThanOrEqualTo(100);
  }
}
