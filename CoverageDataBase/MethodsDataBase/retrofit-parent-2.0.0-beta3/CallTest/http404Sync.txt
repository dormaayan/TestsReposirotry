@Test public void http404Sync() throws IOException {
  Retrofit retrofit=new Retrofit.Builder().baseUrl(server.url("/")).addConverterFactory(new ToStringConverterFactory()).build();
  Service example=retrofit.create(Service.class);
  server.enqueue(new MockResponse().setResponseCode(404).setBody("Hi"));
  Response<String> response=example.getString().execute();
  assertThat(response.isSuccess()).isFalse();
  assertThat(response.code()).isEqualTo(404);
  assertThat(response.errorBody().string()).isEqualTo("Hi");
}
