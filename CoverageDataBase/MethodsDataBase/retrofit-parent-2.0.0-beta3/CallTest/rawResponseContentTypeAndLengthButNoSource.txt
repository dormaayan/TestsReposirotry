@Test public void rawResponseContentTypeAndLengthButNoSource() throws IOException {
  Retrofit retrofit=new Retrofit.Builder().baseUrl(server.url("/")).addConverterFactory(new ToStringConverterFactory()).build();
  Service example=retrofit.create(Service.class);
  server.enqueue(new MockResponse().setBody("Hi").addHeader("Content-Type","text/greeting"));
  Response<String> response=example.getString().execute();
  assertThat(response.body()).isEqualTo("Hi");
  ResponseBody rawBody=response.raw().body();
  assertThat(rawBody.contentLength()).isEqualTo(2);
  assertThat(rawBody.contentType().toString()).isEqualTo("text/greeting");
  try {
    rawBody.source();
    fail();
  }
 catch (  IllegalStateException e) {
    assertThat(e).hasMessage("Cannot read raw response body of a converted body.");
  }
}
