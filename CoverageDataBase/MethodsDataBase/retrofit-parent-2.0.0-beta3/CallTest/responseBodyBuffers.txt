@Test public void responseBodyBuffers() throws IOException {
  Retrofit retrofit=new Retrofit.Builder().baseUrl(server.url("/")).addConverterFactory(new ToStringConverterFactory()).build();
  Service example=retrofit.create(Service.class);
  server.enqueue(new MockResponse().setBody("1234").setSocketPolicy(DISCONNECT_DURING_RESPONSE_BODY));
  Call<ResponseBody> buffered=example.getBody();
  try {
    buffered.execute();
    fail();
  }
 catch (  IOException e) {
    assertThat(e).hasMessage("unexpected end of stream");
  }
}
