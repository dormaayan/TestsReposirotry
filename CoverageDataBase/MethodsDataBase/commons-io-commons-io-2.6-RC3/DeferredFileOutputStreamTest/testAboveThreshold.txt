/** 
 * Tests the case where the amount of data exceeds the threshold, and is therefore written to disk. The actual data written to disk is verified, as is the file itself.
 */
@Test public void testAboveThreshold(){
  final File testFile=new File("testAboveThreshold.dat");
  testFile.delete();
  final DeferredFileOutputStream dfos=new DeferredFileOutputStream(testBytes.length - 5,initialBufferSize,testFile);
  try {
    dfos.write(testBytes,0,testBytes.length);
    dfos.close();
  }
 catch (  final IOException e) {
    fail("Unexpected IOException");
  }
  assertFalse(dfos.isInMemory());
  assertNull(dfos.getData());
  verifyResultFile(testFile);
  testFile.delete();
}
