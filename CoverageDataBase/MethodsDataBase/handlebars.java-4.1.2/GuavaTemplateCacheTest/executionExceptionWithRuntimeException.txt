@SuppressWarnings("unchecked") @Test(expected=IllegalStateException.class) public void executionExceptionWithRuntimeException() throws IOException, ExecutionException {
  TemplateSource source=createMock(TemplateSource.class);
  Parser parser=createMock(Parser.class);
  Cache<TemplateSource,Template> cache=createMock(Cache.class);
  expect(cache.get(eq(source),isA(Callable.class))).andThrow(new ExecutionException(new IllegalStateException()));
  replay(cache,source,parser);
  new GuavaTemplateCache(cache).get(source,parser);
  verify(cache,source,parser);
}
