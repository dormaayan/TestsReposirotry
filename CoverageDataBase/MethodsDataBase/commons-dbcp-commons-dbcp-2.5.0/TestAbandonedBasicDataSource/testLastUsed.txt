/** 
 * Verify that lastUsed property is updated when a connection creates or prepares a statement
 */
@Test public void testLastUsed() throws Exception {
  ds.setRemoveAbandonedTimeout(1);
  ds.setMaxTotal(2);
  try (Connection conn1=ds.getConnection()){
    Thread.sleep(500);
    try (Statement s=conn1.createStatement()){
    }
     Thread.sleep(800);
    final Connection conn2=ds.getConnection();
    try (Statement s=conn1.createStatement()){
    }
     conn2.close();
    Thread.sleep(500);
    try (PreparedStatement ps=conn1.prepareStatement("SELECT 1 FROM DUAL")){
    }
     Thread.sleep(800);
    try (Connection c=ds.getConnection()){
    }
     try (Statement s=conn1.createStatement()){
    }
   }
 }
