/** 
 * DBCP-343 - verify that using a DelegatingStatement updates the lastUsed on the parent connection
 */
@Test public void testLastUsedPreparedStatementUse() throws Exception {
  ds.setRemoveAbandonedTimeout(1);
  ds.setMaxTotal(2);
  try (Connection conn1=ds.getConnection();Statement st=conn1.createStatement()){
    final String querySQL="SELECT 1 FROM DUAL";
    Thread.sleep(500);
    Assert.assertNotNull(st.executeQuery(querySQL));
    Thread.sleep(800);
    final Connection conn2=ds.getConnection();
    Assert.assertNotNull(st.executeQuery(querySQL));
    conn2.close();
    Thread.sleep(500);
    st.executeUpdate("");
    Thread.sleep(800);
    try (Connection c=ds.getConnection()){
    }
     try (Statement s=conn1.createStatement()){
    }
   }
 }
