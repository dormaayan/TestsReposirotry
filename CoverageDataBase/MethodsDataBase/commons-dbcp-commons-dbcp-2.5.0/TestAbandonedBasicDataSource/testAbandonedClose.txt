@Test public void testAbandonedClose() throws Exception {
  ds.setRemoveAbandonedTimeout(0);
  ds.setMaxTotal(1);
  ds.setAccessToUnderlyingConnectionAllowed(true);
  final Connection conn1=getConnection();
  assertNotNull(conn1);
  assertEquals(1,ds.getNumActive());
  final Connection conn2=getConnection();
  assertNotNull(conn2);
  assertEquals(1,ds.getNumActive());
  assertTrue(((DelegatingConnection<?>)conn1).getInnermostDelegate().isClosed());
  conn2.close();
  assertEquals(0,ds.getNumActive());
  conn1.close();
  assertEquals(0,ds.getNumActive());
  final String string=sw.toString();
  assertTrue(string,string.contains("testAbandonedClose"));
}
