@Test public void testConnectionReturnOnErrorWhenEnlistingXAResource() throws Exception {
  transactionManager.begin();
  try {
    final DelegatingConnection<?> connectionA=(DelegatingConnection<?>)getConnection();
    connectionA.close();
  }
 catch (  final SQLException e) {
  }
  transactionManager.commit();
  assertEquals(1,pool.getBorrowedCount());
  assertEquals(1,pool.getDestroyedCount());
  assertEquals(0,pool.getNumActive());
}
