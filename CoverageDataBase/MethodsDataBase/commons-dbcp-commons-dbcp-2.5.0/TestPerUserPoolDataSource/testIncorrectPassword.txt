/** 
 * Switching 'u1 to 'u2' and 'p1' to 'p2' will exhibit the bug detailed in http://issues.apache.org/bugzilla/show_bug.cgi?id=18905
 */
@Test public void testIncorrectPassword() throws Exception {
  try (Connection c=ds.getConnection("u1","zlsafjk")){
    fail("Able to retrieve connection with incorrect password");
  }
 catch (  final SQLException e1) {
  }
  ds.getConnection("u1","p1").close();
  try (Connection c=ds.getConnection("u1","x")){
    fail("Able to retrieve connection with incorrect password");
  }
 catch (  final SQLException e) {
    if (!e.getMessage().startsWith("Given password did not match")) {
      throw e;
    }
  }
  ds.getConnection("u1","p1").close();
  ds.getConnection(user,"bar").close();
  try (Connection c=ds.getConnection("foob","ar")){
    fail("Should have caused an SQLException");
  }
 catch (  final SQLException expected) {
  }
  try (Connection c=ds.getConnection(user,"baz")){
    fail("Should have generated SQLException");
  }
 catch (  final SQLException expected) {
  }
}
