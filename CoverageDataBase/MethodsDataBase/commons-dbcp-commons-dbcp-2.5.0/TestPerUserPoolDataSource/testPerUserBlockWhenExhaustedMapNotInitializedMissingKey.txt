/** 
 * Test per user block when exhausted, with the backing map not initialized before. Instead, we pass the map. And furthermore, we are now searching for an inexistent key, which should return the default value.
 */
@Test public void testPerUserBlockWhenExhaustedMapNotInitializedMissingKey(){
  final PerUserPoolDataSource ds=(PerUserPoolDataSource)this.ds;
  final Map<String,Boolean> userDefaultBlockWhenExhausted=new HashMap<>();
  userDefaultBlockWhenExhausted.put("key",Boolean.FALSE);
  ds.setPerUserBlockWhenExhausted(userDefaultBlockWhenExhausted);
  assertEquals(ds.getDefaultBlockWhenExhausted(),ds.getPerUserBlockWhenExhausted("missingkey"));
}
