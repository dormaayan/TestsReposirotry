@Test public void testSerialization() throws Exception {
  final Connection conn=ds.getConnection();
  conn.close();
  final ByteArrayOutputStream baos=new ByteArrayOutputStream();
  final ObjectOutputStream out=new ObjectOutputStream(baos);
  out.writeObject(ds);
  final byte[] b=baos.toByteArray();
  out.close();
  final ByteArrayInputStream bais=new ByteArrayInputStream(b);
  final ObjectInputStream in=new ObjectInputStream(bais);
  final Object obj=in.readObject();
  in.close();
  assertEquals(1,((PerUserPoolDataSource)obj).getNumIdle());
}
