/** 
 * Test per user block when exhausted, with the backing map initialized before.
 */
@Test public void testPerUserBlockWhenExhaustedMapInitialized(){
  final PerUserPoolDataSource ds=(PerUserPoolDataSource)this.ds;
  Map<String,Boolean> userDefaultBlockWhenExhausted=new HashMap<>();
  userDefaultBlockWhenExhausted.put("key",Boolean.FALSE);
  ds.setPerUserBlockWhenExhausted(userDefaultBlockWhenExhausted);
  assertEquals(Boolean.FALSE,ds.getPerUserBlockWhenExhausted("key"));
  userDefaultBlockWhenExhausted=new HashMap<>();
  userDefaultBlockWhenExhausted.put("anonymous",Boolean.FALSE);
  ds.setPerUserBlockWhenExhausted(userDefaultBlockWhenExhausted);
  assertEquals(Boolean.TRUE,ds.getPerUserBlockWhenExhausted("key"));
  assertEquals(Boolean.FALSE,ds.getPerUserBlockWhenExhausted("anonymous"));
}
