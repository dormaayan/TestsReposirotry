/** 
 * Verify that defaultMaxWaitMillis = 0 means immediate failure when pool is exhausted.
 */
@Test public void testMaxWaitMillisZero() throws Exception {
  final PerUserPoolDataSource tds=(PerUserPoolDataSource)ds;
  tds.setDefaultMaxWaitMillis(0);
  tds.setPerUserMaxTotal("u1",Integer.valueOf(1));
  final Connection conn=tds.getConnection("u1","p1");
  try (Connection c2=tds.getConnection("u1","p1")){
    fail("Expecting Pool Exhausted exception");
  }
 catch (  final SQLException ex) {
  }
  conn.close();
}
