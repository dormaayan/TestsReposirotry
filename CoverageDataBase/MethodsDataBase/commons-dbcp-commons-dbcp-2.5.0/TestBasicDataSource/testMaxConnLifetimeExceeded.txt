@Test public void testMaxConnLifetimeExceeded() throws Exception {
  try {
    StackMessageLog.lock();
    ds.setMaxConnLifetimeMillis(100);
    final Connection conn=ds.getConnection();
    assertEquals(1,ds.getNumActive());
    Thread.sleep(500);
    conn.close();
    assertEquals(0,ds.getNumIdle());
    final String message=StackMessageLog.popMessage();
    Assert.assertNotNull(message);
    assertTrue(message.indexOf("exceeds the maximum permitted value") > 0);
  }
  finally {
    StackMessageLog.clear();
    StackMessageLog.unLock();
  }
}
