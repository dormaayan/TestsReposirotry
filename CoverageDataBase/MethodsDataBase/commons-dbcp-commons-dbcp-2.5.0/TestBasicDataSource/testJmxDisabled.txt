/** 
 * Make sure setting jmxName to null suppresses JMX registration of connection and statement pools. JIRA: DBCP-434
 */
@Test public void testJmxDisabled() throws Exception {
  final MBeanServer mbs=ManagementFactory.getPlatformMBeanServer();
  final ObjectName commons=new ObjectName("org.apache.commons.*:*");
  final Set<ObjectName> results=mbs.queryNames(commons,null);
  for (  final ObjectName result : results) {
    mbs.unregisterMBean(result);
  }
  ds.setJmxName(null);
  ds.setPoolPreparedStatements(true);
  ds.getConnection();
  assertEquals(0,mbs.queryNames(commons,null).size());
}
