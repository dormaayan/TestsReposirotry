/** 
 * JIRA: DBCP-482 Verify warning not logged if JMX MBean unregistered before close() called.
 */
@Test public void testInstanceNotFoundExceptionLogSuppressed() throws Exception {
  final MBeanServer mbs=ManagementFactory.getPlatformMBeanServer();
  try (Connection c=ds.getConnection()){
  }
   final ObjectName objectName=new ObjectName(ds.getJmxName());
  if (mbs.isRegistered(objectName)) {
    mbs.unregisterMBean(objectName);
  }
  StackMessageLog.clear();
  ds.close();
  assertThat(StackMessageLog.popMessage(),CoreMatchers.not(CoreMatchers.containsString("InstanceNotFoundException")));
  assertNull(ds.getRegisteredJmxName());
}
