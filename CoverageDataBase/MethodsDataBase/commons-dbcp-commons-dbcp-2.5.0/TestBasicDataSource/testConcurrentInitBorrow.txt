@Test public void testConcurrentInitBorrow() throws Exception {
  ds.setDriverClassName("org.apache.commons.dbcp2.TesterConnectionDelayDriver");
  ds.setUrl("jdbc:apache:commons:testerConnectionDelayDriver:50");
  ds.setInitialSize(8);
  final TestThread testThread=new TestThread(1,0);
  final Thread t=new Thread(testThread);
  t.start();
  Thread.sleep(100);
  ds.getConnection();
  assertTrue(ds.getConnectionPool().getNumIdle() > 5);
  t.join();
  assertFalse(testThread.failed());
  ds.close();
}
