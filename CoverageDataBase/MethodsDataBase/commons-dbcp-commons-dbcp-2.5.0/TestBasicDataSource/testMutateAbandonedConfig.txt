/** 
 * JIRA: DBCP-457 Verify that changes made to abandoned config are passed to the underlying pool.
 */
@Test public void testMutateAbandonedConfig() throws Exception {
  final Properties properties=new Properties();
  properties.put("initialSize","1");
  properties.put("driverClassName","org.apache.commons.dbcp2.TesterDriver");
  properties.put("url","jdbc:apache:commons:testdriver");
  properties.put("username","foo");
  properties.put("password","bar");
  final BasicDataSource ds=BasicDataSourceFactory.createDataSource(properties);
  final boolean original=ds.getConnectionPool().getLogAbandoned();
  ds.setLogAbandoned(!original);
  Assert.assertNotEquals(Boolean.valueOf(original),Boolean.valueOf(ds.getConnectionPool().getLogAbandoned()));
}
