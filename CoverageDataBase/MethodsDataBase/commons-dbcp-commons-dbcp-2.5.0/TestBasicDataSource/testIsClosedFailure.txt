@Test public void testIsClosedFailure() throws SQLException {
  ds.setAccessToUnderlyingConnectionAllowed(true);
  final Connection conn=ds.getConnection();
  assertNotNull(conn);
  assertEquals(1,ds.getNumActive());
  final TesterConnection tconn=(TesterConnection)((DelegatingConnection<?>)conn).getInnermostDelegate();
  tconn.setFailure(new IOException("network error"));
  try {
    conn.close();
    fail("Expected SQLException");
  }
 catch (  final SQLException ex) {
  }
  assertEquals(0,ds.getNumActive());
}
