@Test public void testReallyClose() throws Exception {
  assertEquals(0,pool.getNumActive());
  conn=pool.borrowObject();
  assertEquals(1,pool.getNumActive());
  assertNotNull(transactionRegistry.getXAResource(conn));
  poolableManagedConnection=new PoolableManagedConnection(transactionRegistry,conn,pool);
  poolableManagedConnection.close();
  assertNotNull(transactionRegistry.getXAResource(conn));
  assertEquals(1,pool.getNumActive());
  poolableManagedConnection.reallyClose();
  try {
    assertNull(transactionRegistry.getXAResource(conn));
    fail("Transaction registry was supposed to be empty now");
  }
 catch (  final SQLException e) {
  }
  assertEquals(0,pool.getNumActive());
}
