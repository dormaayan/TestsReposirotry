@Test public void testPStmtPoolingWithNoClose() throws Exception {
  ds.setMaxTotal(1);
  ds.setMaxIdle(1);
  ds.setAccessToUnderlyingConnectionAllowed(true);
  final Connection conn1=getConnection();
  assertNotNull(conn1);
  assertEquals(1,ds.getNumActive());
  assertEquals(0,ds.getNumIdle());
  final PreparedStatement stmt1=conn1.prepareStatement("select 'a' from dual");
  assertNotNull(stmt1);
  final Statement inner1=((DelegatingPreparedStatement)stmt1).getInnermostDelegate();
  assertNotNull(inner1);
  stmt1.close();
  final Connection conn2=conn1;
  assertNotNull(conn2);
  assertEquals(1,ds.getNumActive());
  assertEquals(0,ds.getNumIdle());
  final PreparedStatement stmt2=conn2.prepareStatement("select 'a' from dual");
  assertNotNull(stmt2);
  final Statement inner2=((DelegatingPreparedStatement)stmt2).getInnermostDelegate();
  assertNotNull(inner2);
  assertSame(inner1,inner2);
}
