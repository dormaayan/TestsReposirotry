@Test public void testAllProperties() throws Exception {
  try {
    StackMessageLog.lock();
    StackMessageLog.clear();
    final Reference ref=new Reference("javax.sql.DataSource",BasicDataSourceFactory.class.getName(),null);
    final Properties properties=getTestProperties();
    for (    final Entry<Object,Object> entry : properties.entrySet()) {
      ref.add(new StringRefAddr((String)entry.getKey(),(String)entry.getValue()));
    }
    final BasicDataSourceFactory basicDataSourceFactory=new BasicDataSourceFactory();
    final BasicDataSource ds=(BasicDataSource)basicDataSourceFactory.getObjectInstance(ref,null,null,null);
    checkDataSourceProperties(ds);
    checkConnectionPoolProperties(ds.getConnectionPool());
    final List<String> messages=StackMessageLog.getAll();
    assertEquals(0,messages.size());
  }
  finally {
    StackMessageLog.clear();
    StackMessageLog.unLock();
  }
}
