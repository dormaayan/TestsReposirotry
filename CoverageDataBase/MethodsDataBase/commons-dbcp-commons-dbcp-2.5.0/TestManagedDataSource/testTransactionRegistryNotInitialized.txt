@Test(expected=IllegalStateException.class) public void testTransactionRegistryNotInitialized() throws Exception {
  try (ManagedDataSource<?> ds=new ManagedDataSource<>(pool,null)){
    ds.getConnection();
  }
 }
