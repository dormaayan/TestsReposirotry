@Test public void testManagedConnectionEqualInnermost() throws Exception {
  ds.setAccessToUnderlyingConnectionAllowed(true);
  final DelegatingConnection<?> con=(DelegatingConnection<?>)ds.getConnection();
  final Connection inner=con.getInnermostDelegate();
  ds.setAccessToUnderlyingConnectionAllowed(false);
  final DelegatingConnection<Connection> con2=new DelegatingConnection<>(inner);
  assertFalse(con2.equals(con));
  assertTrue(con.innermostDelegateEquals(con2.getInnermostDelegate()));
  assertTrue(con2.innermostDelegateEquals(inner));
  assertFalse(con.equals(con2));
}
