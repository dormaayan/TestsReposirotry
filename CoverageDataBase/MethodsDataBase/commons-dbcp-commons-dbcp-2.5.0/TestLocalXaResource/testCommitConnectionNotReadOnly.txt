@Test public void testCommitConnectionNotReadOnly() throws SQLException, XAException {
  final Xid xid=new TestXid();
  ((TestConnection)conn).closed=false;
  conn.setReadOnly(true);
  resource.start(xid,XAResource.TMNOFLAGS);
  resource.commit(xid,false);
  assertFalse(((TestConnection)conn).committed);
}
