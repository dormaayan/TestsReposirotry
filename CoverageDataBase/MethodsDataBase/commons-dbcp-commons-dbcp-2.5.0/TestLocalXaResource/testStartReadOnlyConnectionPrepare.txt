@Test public void testStartReadOnlyConnectionPrepare() throws XAException, SQLException {
  final Xid xid=new TestXid();
  conn.setAutoCommit(false);
  conn.setReadOnly(true);
  resource.start(xid,XAResource.TMNOFLAGS);
  resource.prepare(xid);
  assertFalse(conn.getAutoCommit());
}
