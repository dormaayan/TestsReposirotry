@Test public void testClose() throws Exception {
  final Properties props=new Properties();
  props.setProperty("user","userName");
  props.setProperty("password","password");
  final PoolableConnectionFactory f=new PoolableConnectionFactory(new DriverConnectionFactory(new TesterDriver(),"jdbc:apache:commons:testdriver",props),null);
  f.setValidationQuery("SELECT DUMMY FROM DUAL");
  f.setDefaultReadOnly(Boolean.TRUE);
  f.setDefaultAutoCommit(Boolean.TRUE);
  final GenericObjectPool<PoolableConnection> p=new GenericObjectPool<>(f);
  p.setMaxTotal(getMaxTotal());
  p.setMaxWaitMillis(getMaxWaitMillis());
  try (PoolingDataSource<PoolableConnection> dataSource=new PoolingDataSource<>(p)){
    final Connection connection=dataSource.getConnection();
    assertNotNull(connection);
    connection.close();
  }
   assertTrue(p.isClosed());
  assertEquals(0,p.getNumIdle());
  assertEquals(0,p.getNumActive());
}
