/** 
 * JIRA: DBCP-355
 */
@Test public void testPhysicalClose() throws Exception {
  bmds.setMaxIdle(1);
  final Connection conn1=bmds.getConnection();
  final Connection conn2=bmds.getConnection();
  closeCounter.set(0);
  conn1.close();
  assertEquals(0,closeCounter.get());
  conn2.close();
  assertEquals(1,closeCounter.get());
  bmds.close();
  assertEquals(2,closeCounter.get());
}
