/** 
 * Verify that exception on setupDefaults does not leak PooledConnection JIRA: DBCP-237
 * @throws Exception
 */
@Test public void testExceptionOnSetupDefaults() throws Exception {
  final ThrowOnSetupDefaultsDataSource tds=new ThrowOnSetupDefaultsDataSource();
  final int numConnections=tds.getNumActive();
  try {
    tds.getConnection(USER,PASS);
    fail("Expecting SQLException");
  }
 catch (  final SQLException ex) {
  }
  assertEquals(numConnections,tds.getNumActive());
  tds.close();
}
