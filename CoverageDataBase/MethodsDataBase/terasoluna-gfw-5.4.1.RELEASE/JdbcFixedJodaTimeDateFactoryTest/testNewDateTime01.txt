/** 
 * normal case 1. <br> use prepared table.
 */
@Test public void testNewDateTime01() throws Exception {
  jdbcTemplate.getJdbcOperations().execute("CREATE TABLE system_date(now timestamp NOT NULL)");
  jdbcTemplate.update("INSERT INTO system_date(now) VALUES (:now)",Collections.singletonMap("now",new DateTime(2012,9,11,2,25,15,100).toDate()));
  JdbcFixedJodaTimeDateFactory dateFactory=new JdbcFixedJodaTimeDateFactory();
  dateFactory.setDataSource(dataSource);
  dateFactory.setCurrentTimestampQuery("SELECT now FROM system_date");
  DateTime now=dateFactory.newDateTime();
  assertThat(now.getYear(),is(2012));
  assertThat(now.getMonthOfYear(),is(9));
  assertThat(now.getDayOfMonth(),is(11));
  assertThat(now.getHourOfDay(),is(2));
  assertThat(now.getMinuteOfHour(),is(25));
  assertThat(now.getSecondOfMinute(),is(15));
  assertThat(now.getMillisOfSecond(),is(100));
  jdbcTemplate.getJdbcOperations().execute("DROP TABLE system_date");
}
