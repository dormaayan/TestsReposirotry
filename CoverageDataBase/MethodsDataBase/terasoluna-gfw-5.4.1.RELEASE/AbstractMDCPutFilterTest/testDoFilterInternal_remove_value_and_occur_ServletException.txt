/** 
 * [doFilterInternal] Case of remove value & occur servlet exception. <p> [Expected Result] <ol> <li>remove value from MDC.</li> <li>throws original servlet exception.</li> </ol> </p>
 * @throws ServletException
 * @throws IOException
 */
@Test public void testDoFilterInternal_remove_value_and_occur_ServletException() throws ServletException, IOException {
  testTarget.setRemoveValue(true);
  MDC.put("dummyKey","dummyValue");
  ServletException occurException=new ServletException("test");
  doThrow(occurException).when(mockFilterChain).doFilter(mockRequest,mockResponse);
  try {
    testTarget.doFilterInternal(mockRequest,mockResponse,mockFilterChain);
    fail("don't occur ServletException.");
  }
 catch (  ServletException e) {
    assertThat(e,is(occurException));
  }
  assertEquals(1,MDC.getCopyOfContextMap().size());
  assertEquals("dummyValue",MDC.get("dummyKey"));
}
