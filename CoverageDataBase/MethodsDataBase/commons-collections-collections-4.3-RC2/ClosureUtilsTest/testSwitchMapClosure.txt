@Test public void testSwitchMapClosure(){
  final MockClosure<String> a=new MockClosure<>();
  final MockClosure<String> b=new MockClosure<>();
  final Map<String,Closure<String>> map=new HashMap<>();
  map.put("HELLO",a);
  map.put("THERE",b);
  ClosureUtils.switchMapClosure(map).execute(null);
  assertEquals(0,a.count);
  assertEquals(0,b.count);
  a.reset();
  b.reset();
  map.clear();
  map.put("HELLO",a);
  map.put("THERE",b);
  ClosureUtils.switchMapClosure(map).execute("THERE");
  assertEquals(0,a.count);
  assertEquals(1,b.count);
  a.reset();
  b.reset();
  map.clear();
  final MockClosure<String> c=new MockClosure<>();
  map.put("HELLO",a);
  map.put("THERE",b);
  map.put(null,c);
  ClosureUtils.switchMapClosure(map).execute("WELL");
  assertEquals(0,a.count);
  assertEquals(0,b.count);
  assertEquals(1,c.count);
  assertEquals(NOPClosure.INSTANCE,ClosureUtils.switchMapClosure(new HashMap<String,Closure<String>>()));
  try {
    ClosureUtils.switchMapClosure(null);
    fail();
  }
 catch (  final NullPointerException ex) {
  }
}
