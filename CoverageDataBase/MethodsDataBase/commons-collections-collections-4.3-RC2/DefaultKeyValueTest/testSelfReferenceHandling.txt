@SuppressWarnings("unchecked") @Test public void testSelfReferenceHandling(){
  final DefaultKeyValue<K,V> kv=makeDefaultKeyValue();
  try {
    kv.setKey((K)kv);
    fail("Should throw an IllegalArgumentException");
  }
 catch (  final IllegalArgumentException iae) {
    assertTrue(kv.getKey() == null && kv.getValue() == null);
  }
  try {
    kv.setValue((V)kv);
    fail("Should throw an IllegalArgumentException");
  }
 catch (  final IllegalArgumentException iae) {
    assertTrue(kv.getKey() == null && kv.getValue() == null);
  }
}
