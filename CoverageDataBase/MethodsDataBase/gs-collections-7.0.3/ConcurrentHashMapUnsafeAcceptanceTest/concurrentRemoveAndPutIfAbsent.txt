@Test public void concurrentRemoveAndPutIfAbsent(){
  ConcurrentHashMapUnsafe<Integer,Integer> map1=ConcurrentHashMapUnsafe.newMap();
  ParallelIterate.forEach(Interval.oneTo(1000),each -> {
    Assert.assertNull(map1.put(each,each));
    map1.remove(each);
    Assert.assertNull(map1.get(each));
    Assert.assertEquals(each,map1.getIfAbsentPut(each,Functions.getIntegerPassThru()));
    map1.remove(each);
    Assert.assertNull(map1.get(each));
    Assert.assertEquals(each,map1.getIfAbsentPutWith(each,Functions.getIntegerPassThru(),each));
    map1.remove(each);
    Assert.assertNull(map1.get(each));
    for (int i=0; i < each; i++) {
      Assert.assertNull(map1.putIfAbsent(each + i * 1000,each));
    }
    for (int i=0; i < each; i++) {
      Assert.assertEquals(each,map1.putIfAbsent(each + i * 1000,each));
    }
    for (int i=0; i < each; i++) {
      Assert.assertEquals(each,map1.remove(each + i * 1000));
    }
  }
,10,this.executor);
}
