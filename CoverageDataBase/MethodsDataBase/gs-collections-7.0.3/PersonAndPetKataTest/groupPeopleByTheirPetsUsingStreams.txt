@Test public void groupPeopleByTheirPetsUsingStreams(){
  Map<PetType,List<Person>> peopleByPetsStream=new HashMap<>();
  this.people.stream().forEach(person -> person.getPetTypes().stream().forEach(petType -> peopleByPetsStream.computeIfAbsent(petType,e -> new ArrayList<>()).add(person)));
  List<Person> catPeople=peopleByPetsStream.get(PetType.CAT);
  Assert.assertEquals("Mary, Bob",catPeople.stream().map(Person::getFirstName).collect(Collectors.joining(", ")));
  List<Person> dogPeople=peopleByPetsStream.get(PetType.DOG);
  Assert.assertEquals("Bob, Ted",dogPeople.stream().map(Person::getFirstName).collect(Collectors.joining(", ")));
}
