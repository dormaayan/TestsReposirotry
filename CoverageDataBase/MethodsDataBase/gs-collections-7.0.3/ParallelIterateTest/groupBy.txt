@Test public void groupBy(){
  FastList<String> source=FastList.newListWith("Ted","Sally","Mary","Bob","Sara");
  Multimap<Character,String> result1=ParallelIterate.groupBy(source,StringFunctions.firstLetter(),1);
  Multimap<Character,String> result2=ParallelIterate.groupBy(Collections.synchronizedList(source),StringFunctions.firstLetter(),1);
  Multimap<Character,String> result3=ParallelIterate.groupBy(Collections.synchronizedCollection(source),StringFunctions.firstLetter(),1);
  Multimap<Character,String> result4=ParallelIterate.groupBy(LazyIterate.adapt(source),StringFunctions.firstLetter(),1);
  Multimap<Character,String> result5=ParallelIterate.groupBy(new ArrayList<>(source),StringFunctions.firstLetter(),1);
  Multimap<Character,String> result6=ParallelIterate.groupBy(source.toSet(),StringFunctions.firstLetter(),1);
  Multimap<Character,String> result7=ParallelIterate.groupBy(source.toMap(Functions.getStringPassThru(),Functions.getStringPassThru()),StringFunctions.firstLetter(),1);
  Multimap<Character,String> result8=ParallelIterate.groupBy(source.toBag(),StringFunctions.firstLetter(),1);
  Multimap<Character,String> result9=ParallelIterate.groupBy(source.toImmutable(),StringFunctions.firstLetter(),1);
  MutableMultimap<Character,String> expected=HashBagMultimap.newMultimap();
  expected.put('T',"Ted");
  expected.put('S',"Sally");
  expected.put('M',"Mary");
  expected.put('B',"Bob");
  expected.put('S',"Sara");
  Assert.assertEquals(expected,HashBagMultimap.newMultimap(result1));
  Assert.assertEquals(expected,HashBagMultimap.newMultimap(result2));
  Assert.assertEquals(expected,HashBagMultimap.newMultimap(result3));
  Assert.assertEquals(expected,HashBagMultimap.newMultimap(result4));
  Assert.assertEquals(expected,HashBagMultimap.newMultimap(result5));
  Assert.assertEquals(expected,HashBagMultimap.newMultimap(result6));
  Assert.assertEquals(expected,HashBagMultimap.newMultimap(result7));
  Assert.assertEquals(expected,HashBagMultimap.newMultimap(result8));
  Assert.assertEquals(expected,HashBagMultimap.newMultimap(result9));
  Verify.assertThrows(IllegalArgumentException.class,() -> ParallelIterate.groupBy(null,null,1));
}
