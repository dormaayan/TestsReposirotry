@Test public void should_start_embedded_server_with_listen_and_rpc_address() throws Exception {
  CassandraShutDownHook shutDownHook=new CassandraShutDownHook();
  String keyspace=RandomStringUtils.randomAlphabetic(9);
  final Session session=CassandraEmbeddedServerBuilder.builder().withKeyspaceName(keyspace).withShutdownHook(shutDownHook).withListenAddress("127.0.0.1").withRpcAddress("127.0.0.1").buildNativeSession();
  try {
    assertThat(session).isNotNull();
    final Row one=session.execute("SELECT * FROM system.local LIMIT 1").one();
    assertThat(one).isNotNull();
  }
  finally {
    shutDownHook.shutDownNow();
  }
}
