@Test public void should_fail_parsing_duplicate_function_declaration() throws Exception {
  setExec(aptUtils -> {
    final TypeElement typeElement1=aptUtils.elementUtils.getTypeElement(TestFunctionRegistry.class.getCanonicalName());
    final TypeElement typeElement2=aptUtils.elementUtils.getTypeElement(TestFunctionRegistryWithDuplicateFunction.class.getCanonicalName());
    final List<FunctionSignature> udfSignatures1=FunctionParser.parseFunctionRegistryAndValidateTypes(aptUtils,typeElement1,context);
    final List<FunctionSignature> udfSignatures2=FunctionParser.parseFunctionRegistryAndValidateTypes(aptUtils,typeElement2,context);
    FunctionParser.validateNoDuplicateDeclaration(aptUtils,CollectionsHelper.appendAll(udfSignatures1,udfSignatures2));
  }
);
  failTestWithMessage("Functions 'UDFSignature{keyspace=Optional.empty, sourceClass=info.archinnov.achilles.internals.sample_classes.functions.TestFunctionRegistry, methodName='toString', name='toString', returnType=java.lang.String, sourceParameterTypes=[int]}' and 'UDFSignature{keyspace=Optional.empty, sourceClass=info.archinnov.achilles.internals.sample_classes.functions.TestFunctionRegistryWithDuplicateFunction, methodName='toString', name='toString', returnType=java.lang.String, sourceParameterTypes=[int]}' have same signature. Duplicate function declaration is not allowed");
}
