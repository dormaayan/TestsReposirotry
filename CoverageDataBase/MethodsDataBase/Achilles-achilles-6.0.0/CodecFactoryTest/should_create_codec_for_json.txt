@Test public void should_create_codec_for_json() throws Exception {
  setExec(aptUtils -> {
    final CodecFactory codecFactory=new CodecFactory(aptUtils);
    final TypeElement typeElement=aptUtils.elementUtils.getTypeElement(TestEntityForCodecs.class.getCanonicalName());
    final FieldParsingContext context=getFieldParsingContext(aptUtils,typeElement);
    final VariableElement elm=findFieldInType(typeElement,"time");
    final AnnotationTree tree=AnnotationTree.buildFrom(aptUtils,context.entityContext.globalContext,elm);
    final CodecInfo codecInfo=codecFactory.createCodec(ClassName.get(Date.class),tree,context,Optional.empty());
    assertThat(codecInfo.sourceType.toString()).isEqualTo(Date.class.getCanonicalName());
    assertThat(codecInfo.targetType.toString()).isEqualTo(String.class.getCanonicalName());
    assertThat(codecInfo.codecCode.toString()).isEqualTo("new info.archinnov.achilles.internals.codec.JSONCodec<>(java.util.Date.class, com.fasterxml.jackson.databind.type.SimpleType.construct(java.util.Date.class))");
  }
);
  launchTest();
}
