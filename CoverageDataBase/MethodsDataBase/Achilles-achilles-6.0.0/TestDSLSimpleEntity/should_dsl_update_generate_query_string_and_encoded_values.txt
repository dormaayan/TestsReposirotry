@Test public void should_dsl_update_generate_query_string_and_encoded_values() throws Exception {
  final long id=RandomUtils.nextLong(0L,Long.MAX_VALUE);
  final Date date=buildDateKey();
  final SimpleEntity_Update.E dsl=manager.dsl().update().fromBaseTable().value().Set("new value").consistencyList().AppendTo(ALL).simpleSet().AddTo(3.0).simpleMap().PutTo(30,"thirty").where().id().Eq(id).date().Eq(date);
  final String expectedQuery="UPDATE " + DEFAULT_CASSANDRA_EMBEDDED_KEYSPACE_NAME + ".simple SET value=:value,"+ "consistencylist=consistencylist+:consistencylist,"+ "simpleset=simpleset+:simpleset,"+ "simplemap[:simpleMap_key]=:simpleMap_value "+ "WHERE id=:id AND date=:date;";
  assertThat(dsl.getStatementAsString()).isEqualTo(expectedQuery);
  assertThat(dsl.getBoundValues()).containsExactly("new value",asList(ALL),Sets.newHashSet(3.0),30,"thirty",id,date);
  assertThat(dsl.getEncodedBoundValues()).containsExactly("new value",asList("ALL"),Sets.newHashSet(3.0),30,"thirty",id,date);
  assertThat(dsl.generateAndGetBoundStatement().preparedStatement().getQueryString()).isEqualTo(expectedQuery);
}
