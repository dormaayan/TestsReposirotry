@Test public void should_build_schema_for_complex_types() throws Exception {
  final EntityWithComplexTypes_AchillesMeta meta=new EntityWithComplexTypes_AchillesMeta();
  final CodecRegistry codecRegistry=new CodecRegistry();
  TupleTypeFactory tupleTypeFactory=new TupleTypeFactory(ProtocolVersion.NEWEST_SUPPORTED,codecRegistry);
  UserTypeFactory userTypeFactory=new UserTypeFactory(ProtocolVersion.NEWEST_SUPPORTED,codecRegistry);
  meta.inject(userTypeFactory,tupleTypeFactory);
  final String actual=meta.generateSchema(context);
  assertThat(actual.trim()).isEqualTo(readCodeBlockFromFile("schema/should_build_schema_for_complex_types.cql"));
}
