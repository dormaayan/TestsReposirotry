@Test public void should_delete_if_exists() throws Exception {
  final long id=RandomUtils.nextLong(0L,Long.MAX_VALUE);
  final Date date=buildDateKey();
  final AtomicBoolean error=new AtomicBoolean(false);
  final AtomicBoolean applied=new AtomicBoolean(true);
  final LWTResultListener lwtListener=new LWTResultListener(){
    @Override public void onSuccess(){
    }
    @Override public void onError(    LWTResult lwtResult){
      error.getAndSet(true);
      applied.getAndSet(lwtResult.currentValues().getTyped("[applied]"));
    }
  }
;
  manager.crud().deleteById(id,date).ifExists().withLwtResultListener(lwtListener).execute();
  assertThat(error.get()).isTrue();
  assertThat(applied.get()).isFalse();
}
