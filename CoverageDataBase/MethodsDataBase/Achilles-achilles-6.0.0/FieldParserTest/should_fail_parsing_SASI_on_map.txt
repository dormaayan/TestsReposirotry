@Test public void should_fail_parsing_SASI_on_map() throws Exception {
  setExec(aptUtils -> {
    final GlobalParsingContext globalContext=new GlobalParsingContext(V3_7.INSTANCE,InsertStrategy.ALL_FIELDS,new LowerCaseNaming(),EXPLICIT_ENTITY_FIELD_FILTER,EXPLICIT_UDT_FIELD_FILTER,Optional.empty());
    final FieldParser fieldParser=new FieldParser(aptUtils);
    final String className=TestEntityForSASI.class.getCanonicalName();
    final TypeElement typeElement=aptUtils.elementUtils.getTypeElement(className);
    final EntityParsingContext entityContext=new EntityParsingContext(typeElement,ClassName.get(TestEntityForCodecs.class),strategy,globalContext);
    VariableElement elm=findFieldInType(typeElement,"indexedMap");
    fieldParser.parse(elm,entityContext);
  }
);
  Truth.ASSERT.about(JavaSourcesSubjectFactory.javaSources()).that(Sets.newHashSet(loadClass(TestEntityForSASI.class))).processedWith(this).failsToCompile().withErrorContaining("The target type java.util.Map<java.lang.Integer, java.lang.String> of field indexedMap from entity info.archinnov.achilles.internals.sample_classes.parser.field.TestEntityForCodecs is a collection (list/set/map). @SASI is not allowed because collections are not (yet) supported");
}
