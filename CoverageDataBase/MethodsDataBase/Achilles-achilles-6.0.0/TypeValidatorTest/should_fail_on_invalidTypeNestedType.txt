@Test public void should_fail_on_invalidTypeNestedType() throws Exception {
  String consistencyLevel=ConsistencyLevel.class.getCanonicalName();
  final TypeName typeName=TypeName.get(TestTypes.class.getDeclaredField("invalidTypeNestedType").getGenericType());
  typeValidator.validateAllowedTypes(aptUtils,typeName,typeName);
  verify(aptUtils,times(3)).validateTrue(eq(true),anyString(),anyVararg());
  verify(aptUtils,times(1)).validateTrue(eq(false),messageCaptor.capture(),objectCaptor.capture(),objectCaptor.capture());
  assertThat(messageCaptor.getValue()).isEqualTo("Type '%s' in '%s' is not a valid type for CQL");
  assertThat(objectCaptor.getAllValues()).containsExactly(consistencyLevel,typeName.toString());
}
