/** 
 * Tests upload of content to a remote service.
 */
@Test public void postFiles() throws IOException {
  File thumb=ParseTest.getFile("/htmltests/thumb.jpg");
  File html=ParseTest.getFile("/htmltests/google-ipod.html");
  Document res=Jsoup.connect(EchoServlet.Url).data("firstname","Jay").data("firstPart",thumb.getName(),new FileInputStream(thumb),"image/jpeg").data("secondPart",html.getName(),new FileInputStream(html)).data("surname","Soup").post();
  assertEquals("4",ihVal("Parts",res));
  assertEquals("application/octet-stream",ihVal("Part secondPart ContentType",res));
  assertEquals("secondPart",ihVal("Part secondPart Name",res));
  assertEquals("google-ipod.html",ihVal("Part secondPart Filename",res));
  assertEquals("43963",ihVal("Part secondPart Size",res));
  assertEquals("image/jpeg",ihVal("Part firstPart ContentType",res));
  assertEquals("firstPart",ihVal("Part firstPart Name",res));
  assertEquals("thumb.jpg",ihVal("Part firstPart Filename",res));
  assertEquals("1052",ihVal("Part firstPart Size",res));
  assertEquals("Jay",ihVal("firstname",res));
  assertEquals("Soup",ihVal("surname",res));
}
