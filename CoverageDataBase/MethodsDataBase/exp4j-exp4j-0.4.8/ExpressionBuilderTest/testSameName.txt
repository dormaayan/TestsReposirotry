@Test(expected=IllegalArgumentException.class) public void testSameName() throws Exception {
  Function custom=new Function("bar"){
    @Override public double apply(    double... values){
      return values[0] / 2;
    }
  }
;
  double varBar=1.3d;
  Expression e=new ExpressionBuilder("bar(bar)").variables("bar").function(custom).build().setVariable("bar",varBar);
  ValidationResult res=e.validate();
  assertFalse(res.isValid());
  assertEquals(1,res.getErrors().size());
}
