@Test public void returnsErrorsWhenEnabled() throws Exception {
  setup(TestApplication.class);
  final Dog raf=new Dog();
  raf.setName("Raf");
  final Response response=client.target(getUrlPrefix() + "/dogs/Raf").request().put(Entity.entity(raf,MediaType.APPLICATION_JSON));
  assertThat(response.getStatusInfo()).isEqualTo(Response.Status.BAD_REQUEST);
  assertThat(response.getHeaderString(HttpHeaders.CONTENT_TYPE)).isEqualTo(MediaType.APPLICATION_JSON);
  assertThat(response.readEntity(ErrorMessage.class).getMessage()).contains("unique constraint","table: DOGS");
}
