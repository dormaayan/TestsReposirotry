@Test public void testItTimesOutProperly() throws Exception {
  String validationQuery="select 1";
  DBI dbi=mock(DBI.class);
  Handle handle=mock(Handle.class);
  when(dbi.open()).thenReturn(handle);
  Mockito.doAnswer(invocation -> {
    try {
      TimeUnit.SECONDS.sleep(10);
    }
 catch (    Exception ignored) {
    }
    return null;
  }
).when(handle).execute(validationQuery);
  ExecutorService executorService=Executors.newSingleThreadExecutor();
  DBIHealthCheck dbiHealthCheck=new DBIHealthCheck(executorService,Duration.milliseconds(5),dbi,validationQuery);
  HealthCheck.Result result=dbiHealthCheck.check();
  executorService.shutdown();
  assertThat("is unhealthy",false,is(result.isHealthy()));
}
