@Test public void testMinimalConfiguration() throws Exception {
  DataSourceFactory ds=getDataSourceFactory("yaml/minimal_db_pool.yml");
  assertThat(ds.getDriverClass()).isEqualTo("org.postgresql.Driver");
  assertThat(ds.getUser()).isEqualTo("pg-user");
  assertThat(ds.getUrl()).isEqualTo("jdbc:postgresql://db.example.com/db-prod");
  assertThat(ds.getPassword()).isEqualTo("iAMs00perSecrEET");
  assertThat(ds.getProperties()).isEmpty();
  assertThat(ds.getMaxWaitForConnection()).isEqualTo(Duration.seconds(30));
  assertThat(ds.getValidationQuery()).isEqualTo("/* Health Check */ SELECT 1");
  assertThat(ds.getMinSize()).isEqualTo(10);
  assertThat(ds.getInitialSize()).isEqualTo(10);
  assertThat(ds.getMaxSize()).isEqualTo(100);
  assertThat(ds.getCheckConnectionWhileIdle()).isTrue();
  assertThat(ds.getEvictionInterval()).isEqualTo(Duration.seconds(5));
  assertThat(ds.getMinIdleTime()).isEqualTo(Duration.minutes(1));
  assertThat(ds.getValidationInterval()).isEqualTo(Duration.seconds(30));
  assertThat(ds.isAutoCommentsEnabled()).isTrue();
  assertThat(ds.getReadOnlyByDefault()).isNull();
  assertThat(ds.isRemoveAbandoned()).isFalse();
  assertThat(ds.getRemoveAbandonedTimeout()).isEqualTo(Duration.seconds(60L));
  assertThat(ds.getAbandonWhenPercentageFull()).isEqualTo(0);
  assertThat(ds.isAlternateUsernamesAllowed()).isFalse();
  assertThat(ds.getCommitOnReturn()).isFalse();
  assertThat(ds.getRollbackOnReturn()).isFalse();
  assertThat(ds.getAutoCommitByDefault()).isNull();
  assertThat(ds.getDefaultCatalog()).isNull();
  assertThat(ds.getDefaultTransactionIsolation()).isEqualTo(DataSourceFactory.TransactionIsolation.DEFAULT);
  assertThat(ds.getUseFairQueue()).isTrue();
  assertThat(ds.getInitializationQuery()).isNull();
  assertThat(ds.getLogAbandonedConnections()).isEqualTo(false);
  assertThat(ds.getLogValidationErrors()).isEqualTo(false);
  assertThat(ds.getMaxConnectionAge()).isEqualTo(Optional.empty());
  assertThat(ds.getCheckConnectionOnBorrow()).isEqualTo(false);
  assertThat(ds.getCheckConnectionOnConnect()).isEqualTo(true);
  assertThat(ds.getCheckConnectionOnReturn()).isEqualTo(false);
  assertThat(ds.getValidationQueryTimeout()).isEqualTo(Optional.empty());
  assertThat(ds.isIgnoreExceptionOnPreLoad()).isFalse();
}
