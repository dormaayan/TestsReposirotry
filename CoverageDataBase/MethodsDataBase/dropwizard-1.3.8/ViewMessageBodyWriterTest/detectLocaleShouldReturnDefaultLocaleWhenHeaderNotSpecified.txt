@Test public void detectLocaleShouldReturnDefaultLocaleWhenHeaderNotSpecified(){
  when(headers.getAcceptableLanguages()).thenCallRealMethod();
  when(headers.getQualifiedAcceptableLanguages()).thenCallRealMethod();
  when(headers.getHeaderString(HttpHeaders.ACCEPT_LANGUAGE)).thenReturn(null);
  final ViewMessageBodyWriter writer=new ViewMessageBodyWriter(metricRegistry,Collections.emptyList());
  final Locale result=writer.detectLocale(headers);
  assertThat(result).isSameAs(Locale.getDefault());
}
