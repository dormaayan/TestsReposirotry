@Test public void ensureConfigSerializable() throws Exception {
  final ObjectMapper mapper=Jackson.newObjectMapper();
  Class<?>[] dummyArray={};
  mapper.getSubtypeResolver().registerSubtypes(StreamSupport.stream(ServiceLoader.load(AppenderFactory.class).spliterator(),false).map(Object::getClass).collect(Collectors.toList()).toArray(dummyArray));
  mapper.getSubtypeResolver().registerSubtypes(StreamSupport.stream(ServiceLoader.load(ConnectorFactory.class).spliterator(),false).map(Object::getClass).collect(Collectors.toList()).toArray(dummyArray));
  final String json=mapper.writeValueAsString(configuration);
  assertThat(json).isNotNull();
  final Configuration cfg=mapper.readValue(json,Configuration.class);
  assertThat(cfg).isNotNull();
}
