@Test public void respondsToNonBasicCredentialsWith401() throws Exception {
  try {
    target("/test/admin").request().header(HttpHeaders.AUTHORIZATION,"Derp irrelevant").get(String.class);
    failBecauseExceptionWasNotThrown(WebApplicationException.class);
  }
 catch (  WebApplicationException e) {
    assertThat(e.getResponse().getStatus()).isEqualTo(401);
    assertThat(e.getResponse().getHeaders().get(HttpHeaders.WWW_AUTHENTICATE)).containsOnly(getPrefix() + " realm=\"realm\"");
  }
}
