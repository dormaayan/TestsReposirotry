@Test public void isValidForMaxFileSize() throws Exception {
  FileAppenderFactory fileAppenderFactory=new FileAppenderFactory();
  fileAppenderFactory.setCurrentLogFilename(folder.newFile("logfile.log").toString());
  fileAppenderFactory.setMaxFileSize(Size.kilobytes(1));
  fileAppenderFactory.setArchivedLogFilenamePattern(folder.newFile("example-%d.log.gz").toString());
  ImmutableList<String> errors=ConstraintViolations.format(validator.validate(fileAppenderFactory));
  assertThat(errors).containsOnly("when specifying maxFileSize, archivedLogFilenamePattern must contain %i");
  fileAppenderFactory.setArchivedLogFilenamePattern(folder.newFile("example-%d-%i.log.gz").toString());
  errors=ConstraintViolations.format(validator.validate(fileAppenderFactory));
  assertThat(errors).isEmpty();
}
