@Test public void hasMaxFileSizeFixedWindow() throws Exception {
  FileAppenderFactory fileAppenderFactory=new FileAppenderFactory();
  fileAppenderFactory.setCurrentLogFilename(folder.newFile("logfile.log").toString());
  fileAppenderFactory.setArchive(true);
  fileAppenderFactory.setMaxFileSize(Size.kilobytes(1));
  fileAppenderFactory.setArchivedLogFilenamePattern(folder.newFile("example-%i.log.gz").toString());
  RollingFileAppender<ILoggingEvent> appender=(RollingFileAppender<ILoggingEvent>)fileAppenderFactory.buildAppender(new LoggerContext());
  assertThat(appender.getRollingPolicy()).isInstanceOf(FixedWindowRollingPolicy.class);
  assertThat(appender.getRollingPolicy().isStarted()).isTrue();
  assertThat(appender.getTriggeringPolicy()).isInstanceOf(SizeBasedTriggeringPolicy.class);
  assertThat(appender.getTriggeringPolicy().isStarted()).isTrue();
  final Field maxFileSizeField=SizeBasedTriggeringPolicy.class.getDeclaredField("maxFileSize");
  maxFileSizeField.setAccessible(true);
  final FileSize maxFileSize=(FileSize)maxFileSizeField.get(appender.getTriggeringPolicy());
  assertThat(maxFileSize.getSize()).isEqualTo(1024L);
}
