@Test public void hasMaxFileSize() throws Exception {
  FileAppenderFactory fileAppenderFactory=new FileAppenderFactory();
  fileAppenderFactory.setCurrentLogFilename(folder.newFile("logfile.log").toString());
  fileAppenderFactory.setArchive(true);
  fileAppenderFactory.setMaxFileSize(Size.kilobytes(1));
  fileAppenderFactory.setArchivedLogFilenamePattern(folder.newFile("example-%d-%i.log.gz").toString());
  RollingFileAppender<ILoggingEvent> appender=(RollingFileAppender<ILoggingEvent>)fileAppenderFactory.buildAppender(new LoggerContext());
  assertThat(appender.getTriggeringPolicy()).isInstanceOf(SizeAndTimeBasedRollingPolicy.class);
  final Field maxFileSizeField=SizeAndTimeBasedRollingPolicy.class.getDeclaredField("maxFileSize");
  maxFileSizeField.setAccessible(true);
  final FileSize maxFileSize=(FileSize)maxFileSizeField.get(appender.getRollingPolicy());
  assertThat(maxFileSize.getSize()).isEqualTo(1024L);
}
