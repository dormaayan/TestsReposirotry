@Test public void hasMaxFileSizeValidation() throws Exception {
  FileAppenderFactory fileAppenderFactory=new FileAppenderFactory();
  fileAppenderFactory.setCurrentLogFilename(folder.newFile("logfile.log").toString());
  fileAppenderFactory.setArchivedLogFilenamePattern(folder.newFile("example-%i.log.gz").toString());
  ImmutableList<String> errors=ConstraintViolations.format(validator.validate(fileAppenderFactory));
  assertThat(errors).containsOnly("when archivedLogFilenamePattern contains %i, maxFileSize must be specified");
  fileAppenderFactory.setMaxFileSize(Size.kilobytes(1));
  errors=ConstraintViolations.format(validator.validate(fileAppenderFactory));
  assertThat(errors).isEmpty();
}
