@Test public void supportsIfRangeMatchRequests() throws Exception {
  response=HttpTester.parseResponse(SERVLET_TESTER.getResponses(request.generate()));
  final String correctEtag=response.get(HttpHeaders.ETAG);
  request.setHeader(HttpHeaders.RANGE,"bytes=10-10");
  request.setHeader(HttpHeaders.IF_RANGE,correctEtag);
  response=HttpTester.parseResponse(SERVLET_TESTER.getResponses(request.generate()));
  final int statusWithMatchingEtag=response.getStatus();
  request.setHeader(HttpHeaders.IF_RANGE,correctEtag + "FOO");
  response=HttpTester.parseResponse(SERVLET_TESTER.getResponses(request.generate()));
  final int statusWithNonMatchingEtag=response.getStatus();
  assertThat(statusWithMatchingEtag).isEqualTo(206);
  assertThat(statusWithNonMatchingEtag).isEqualTo(200);
}
