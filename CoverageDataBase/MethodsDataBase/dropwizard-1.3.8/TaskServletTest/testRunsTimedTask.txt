@Test public void testRunsTimedTask() throws Exception {
  final Task timedTask=new Task("timed-task"){
    @Override @Timed(name="vacuum-cleaning") public void execute(    ImmutableMultimap<String,String> parameters,    PrintWriter output) throws Exception {
      output.println("Vacuum cleaning");
    }
  }
;
  servlet.add(timedTask);
  when(request.getMethod()).thenReturn("POST");
  when(request.getPathInfo()).thenReturn("/timed-task");
  when(response.getWriter()).thenReturn(mock(PrintWriter.class));
  servlet.service(request,response);
  assertThat(metricRegistry.getTimers()).containsKey(name(timedTask.getClass(),"vacuum-cleaning"));
}
