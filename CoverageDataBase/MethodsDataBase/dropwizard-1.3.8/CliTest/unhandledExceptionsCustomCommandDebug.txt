@Test @SuppressWarnings("unchecked") public void unhandledExceptionsCustomCommandDebug() throws Exception {
  doThrow(new BadAppException()).when(command).run(any(Bootstrap.class),any(Namespace.class),any(Configuration.class));
  assertThat(cli.run("custom","--debug")).isFalse();
  assertThat(stdOut.toString()).isEmpty();
  assertThat(stdErr.toString()).startsWith(String.format("java.lang.RuntimeException: I did not expect this!%n" + "\tat io.dropwizard.cli.CliTest$CustomCommand.run(CliTest.java"));
}
