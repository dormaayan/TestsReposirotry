@Test public void singleSource() throws Exception {
  Buffer upstream=new Buffer();
  upstream.writeUtf8("abcdefghijklm");
  Relay relay=Relay.edit(file,upstream,metadata,1024);
  Source source=relay.newSource();
  Buffer sourceBuffer=new Buffer();
  assertEquals(5,source.read(sourceBuffer,5));
  assertEquals("abcde",sourceBuffer.readUtf8());
  assertEquals(8,source.read(sourceBuffer,1024));
  assertEquals("fghijklm",sourceBuffer.readUtf8());
  assertEquals(-1,source.read(sourceBuffer,1024));
  assertEquals(0,sourceBuffer.size());
  source.close();
  assertTrue(relay.isClosed());
  assertFile(Relay.PREFIX_CLEAN,13L,metadata.size(),"abcdefghijklm",metadata);
}
