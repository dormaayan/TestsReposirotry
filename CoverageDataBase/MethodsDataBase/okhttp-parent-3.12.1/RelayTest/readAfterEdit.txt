@Test public void readAfterEdit() throws Exception {
  Buffer upstream=new Buffer();
  upstream.writeUtf8("abcdefghij");
  Relay relay1=Relay.edit(file,upstream,metadata,5);
  BufferedSource source1=Okio.buffer(relay1.newSource());
  assertEquals("abcdefghij",source1.readUtf8(10));
  assertTrue(source1.exhausted());
  source1.close();
  assertTrue(relay1.isClosed());
  assertNull(relay1.newSource());
  Relay relay2=Relay.read(file);
  assertEquals(metadata,relay2.metadata());
  BufferedSource source2=Okio.buffer(relay2.newSource());
  assertEquals("abcdefghij",source2.readUtf8(10));
  assertTrue(source2.exhausted());
  source2.close();
  assertTrue(relay2.isClosed());
  assertNull(relay2.newSource());
  assertFile(Relay.PREFIX_CLEAN,10L,metadata.size(),"abcdefghij",metadata);
}
