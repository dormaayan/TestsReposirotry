@Test public void readFromBuffer() throws Exception {
  Buffer upstream=new Buffer();
  upstream.writeUtf8("abcdefghij");
  Relay relay=Relay.edit(file,upstream,metadata,5);
  BufferedSource source1=Okio.buffer(relay.newSource());
  BufferedSource source2=Okio.buffer(relay.newSource());
  assertEquals("abcde",source1.readUtf8(5));
  assertEquals("abcde",source2.readUtf8(5));
  assertEquals("fghij",source2.readUtf8(5));
  assertEquals("fghij",source1.readUtf8(5));
  assertTrue(source1.exhausted());
  assertTrue(source2.exhausted());
  source1.close();
  source2.close();
  assertTrue(relay.isClosed());
  assertFile(Relay.PREFIX_CLEAN,10L,metadata.size(),"abcdefghij",metadata);
}
