@Test public void closeReasonTooLong(){
  webServer.enqueue(new MockResponse().withWebSocketUpgrade(serverListener));
  WebSocket webSocket=newWebSocket();
  WebSocket server=serverListener.assertOpen();
  clientListener.assertOpen();
  String reason=repeat('X',124);
  try {
    webSocket.close(1000,reason);
    fail();
  }
 catch (  IllegalArgumentException expected) {
    assertEquals("reason.size() > 123: " + reason,expected.getMessage());
  }
  webSocket.close(1000,null);
  serverListener.assertClosing(1000,"");
  server.close(1000,null);
  clientListener.assertClosing(1000,"");
  clientListener.assertClosed(1000,"");
  serverListener.assertClosed(1000,"");
}
