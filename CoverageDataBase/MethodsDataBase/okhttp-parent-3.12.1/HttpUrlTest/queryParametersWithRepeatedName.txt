@Test public void queryParametersWithRepeatedName() throws Exception {
  HttpUrl url=parse("http://host/?foo[]=1&foo[]=2&foo[]=3");
  assertEquals(3,url.querySize());
  assertEquals(Collections.singleton("foo[]"),url.queryParameterNames());
  assertEquals("1",url.queryParameterValue(0));
  assertEquals("2",url.queryParameterValue(1));
  assertEquals("3",url.queryParameterValue(2));
  assertEquals(Arrays.asList("1","2","3"),url.queryParameterValues("foo[]"));
}
