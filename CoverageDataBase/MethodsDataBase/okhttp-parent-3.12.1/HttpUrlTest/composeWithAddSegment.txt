@Test public void composeWithAddSegment() throws Exception {
  HttpUrl base=parse("http://host/a/b/c");
  assertEquals("/a/b/c/",base.newBuilder().addPathSegment("").build().encodedPath());
  assertEquals("/a/b/c/d",base.newBuilder().addPathSegment("").addPathSegment("d").build().encodedPath());
  assertEquals("/a/b/",base.newBuilder().addPathSegment("..").build().encodedPath());
  assertEquals("/a/b/",base.newBuilder().addPathSegment("").addPathSegment("..").build().encodedPath());
  assertEquals("/a/b/c/",base.newBuilder().addPathSegment("").addPathSegment("").build().encodedPath());
}
