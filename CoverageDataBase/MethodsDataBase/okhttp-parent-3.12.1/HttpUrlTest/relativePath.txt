@Test public void relativePath() throws Exception {
  HttpUrl base=parse("http://host/a/b/c");
  assertEquals(parse("http://host/a/b/d/e/f"),base.resolve("d/e/f"));
  assertEquals(parse("http://host/d/e/f"),base.resolve("../../d/e/f"));
  assertEquals(parse("http://host/a/"),base.resolve(".."));
  assertEquals(parse("http://host/"),base.resolve("../.."));
  assertEquals(parse("http://host/"),base.resolve("../../.."));
  assertEquals(parse("http://host/a/b/"),base.resolve("."));
  assertEquals(parse("http://host/a/"),base.resolve("././.."));
  assertEquals(parse("http://host/a/b/c/"),base.resolve("c/d/../e/../"));
  assertEquals(parse("http://host/a/b/..e/"),base.resolve("..e/"));
  assertEquals(parse("http://host/a/b/e/f../"),base.resolve("e/f../"));
  assertEquals(parse("http://host/a/"),base.resolve("%2E."));
  assertEquals(parse("http://host/a/"),base.resolve(".%2E"));
  assertEquals(parse("http://host/a/"),base.resolve("%2E%2E"));
  assertEquals(parse("http://host/a/"),base.resolve("%2e."));
  assertEquals(parse("http://host/a/"),base.resolve(".%2e"));
  assertEquals(parse("http://host/a/"),base.resolve("%2e%2e"));
  assertEquals(parse("http://host/a/b/"),base.resolve("%2E"));
  assertEquals(parse("http://host/a/b/"),base.resolve("%2e"));
}
