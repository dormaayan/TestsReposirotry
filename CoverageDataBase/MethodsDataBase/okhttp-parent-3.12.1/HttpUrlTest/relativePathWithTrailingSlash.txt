@Test public void relativePathWithTrailingSlash() throws Exception {
  HttpUrl base=parse("http://host/a/b/c/");
  assertEquals(parse("http://host/a/b/"),base.resolve(".."));
  assertEquals(parse("http://host/a/b/"),base.resolve("../"));
  assertEquals(parse("http://host/a/"),base.resolve("../.."));
  assertEquals(parse("http://host/a/"),base.resolve("../../"));
  assertEquals(parse("http://host/"),base.resolve("../../.."));
  assertEquals(parse("http://host/"),base.resolve("../../../"));
  assertEquals(parse("http://host/"),base.resolve("../../../.."));
  assertEquals(parse("http://host/"),base.resolve("../../../../"));
  assertEquals(parse("http://host/a"),base.resolve("../../../../a"));
  assertEquals(parse("http://host/"),base.resolve("../../../../a/.."));
  assertEquals(parse("http://host/a/"),base.resolve("../../../../a/b/.."));
}
