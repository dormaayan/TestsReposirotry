@Test public void newBuilderResolve() throws Exception {
  HttpUrl base=parse("http://host/a/b");
  assertEquals(parse("https://host2/"),base.newBuilder("https://host2").build());
  assertEquals(parse("http://host2/"),base.newBuilder("//host2").build());
  assertEquals(parse("http://host/path"),base.newBuilder("/path").build());
  assertEquals(parse("http://host/a/path"),base.newBuilder("path").build());
  assertEquals(parse("http://host/a/b?query"),base.newBuilder("?query").build());
  assertEquals(parse("http://host/a/b#fragment"),base.newBuilder("#fragment").build());
  assertEquals(parse("http://host/a/b"),base.newBuilder("").build());
  assertEquals(null,base.newBuilder("ftp://b"));
  assertEquals(null,base.newBuilder("ht+tp://b"));
  assertEquals(null,base.newBuilder("ht-tp://b"));
  assertEquals(null,base.newBuilder("ht.tp://b"));
}
