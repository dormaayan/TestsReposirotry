/** 
 * Test to ensure we don't  throw a read timeout on responses that are progressing.  For this case, we take a 4KiB body and throttle it to 1KiB/second.  We set the read timeout to two seconds.  If our implementation is acting correctly, it will not throw, as it is progressing.
 */
@Test public void readTimeoutMoreGranularThanBodySize() throws Exception {
  char[] body=new char[4096];
  Arrays.fill(body,'y');
  server.enqueue(new MockResponse().setBody(new String(body)).throttleBody(1024,1,SECONDS));
  client=client.newBuilder().readTimeout(2,SECONDS).build();
  Call call=client.newCall(new Request.Builder().url(server.url("/")).build());
  Response response=call.execute();
  assertEquals(new String(body),response.body().string());
}
