@Test public void conditionalCache() throws IOException {
  client=client.newBuilder().cache(cache).build();
  server.enqueue(new MockResponse().addHeader("ETag: v1").setBody("A"));
  server.enqueue(new MockResponse().setResponseCode(HttpURLConnection.HTTP_NOT_MODIFIED));
  Call call1=client.newCall(new Request.Builder().url(server.url("/")).build());
  Response response1=call1.execute();
  assertEquals("A",response1.body().string());
  assertEquals(1,cache.requestCount());
  assertEquals(1,cache.networkCount());
  assertEquals(0,cache.hitCount());
  Call call2=client.newCall(new Request.Builder().url(server.url("/")).build());
  Response response2=call2.execute();
  assertEquals("A",response2.body().string());
  assertEquals(2,cache.requestCount());
  assertEquals(2,cache.networkCount());
  assertEquals(1,cache.hitCount());
}
