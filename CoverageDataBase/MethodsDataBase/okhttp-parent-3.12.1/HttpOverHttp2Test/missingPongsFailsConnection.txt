@Test public void missingPongsFailsConnection() throws Exception {
  client=client.newBuilder().readTimeout(10,TimeUnit.SECONDS).pingInterval(500,TimeUnit.MILLISECONDS).build();
  server.enqueue(new MockResponse().setSocketPolicy(SocketPolicy.STALL_SOCKET_AT_START));
  Call call=client.newCall(new Request.Builder().url(server.url("/")).build());
  long executeAtNanos=System.nanoTime();
  try {
    call.execute();
    fail();
  }
 catch (  StreamResetException expected) {
    assertEquals("stream was reset: PROTOCOL_ERROR",expected.getMessage());
  }
  long elapsedUntilFailure=System.nanoTime() - executeAtNanos;
  assertEquals(1000,TimeUnit.NANOSECONDS.toMillis(elapsedUntilFailure),250d);
  List<String> logs=http2Handler.takeAll();
  assertEquals(1,countFrames(logs,"FINE: >> 0x00000000     8 PING          "));
  assertEquals(0,countFrames(logs,"FINE: << 0x00000000     8 PING          ACK"));
}
