@Test public void concurrentRequestWithEmptyFlowControlWindow() throws Exception {
  server.enqueue(new MockResponse().setBody(new Buffer().write(new byte[Http2Connection.OKHTTP_CLIENT_WINDOW_SIZE])));
  server.enqueue(new MockResponse().setBody("abc"));
  Call call1=client.newCall(new Request.Builder().url(server.url("/")).build());
  Response response1=call1.execute();
  waitForDataFrames(Http2Connection.OKHTTP_CLIENT_WINDOW_SIZE);
  assertEquals(Http2Connection.OKHTTP_CLIENT_WINDOW_SIZE,response1.body().contentLength());
  int read=response1.body().source().read(new byte[8192]);
  assertEquals(8192,read);
  Call call2=client.newCall(new Request.Builder().url(server.url("/")).build());
  Response response2=call2.execute();
  assertEquals(200,response2.code());
  response1.close();
  assertEquals("abc",response2.body().string());
}
