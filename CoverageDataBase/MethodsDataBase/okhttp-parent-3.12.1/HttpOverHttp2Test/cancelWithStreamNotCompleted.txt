/** 
 * https://github.com/square/okhttp/issues/1191 
 */
@Ignore @Test public void cancelWithStreamNotCompleted() throws Exception {
  client.connectionPool().evictAll();
  assertEquals(0,client.connectionPool().connectionCount());
  server.enqueue(new MockResponse().setBody("abc"));
  server.enqueue(new MockResponse().setBody("def"));
  Call call1=client.newCall(new Request.Builder().url(server.url("/")).build());
  Response response=call1.execute();
  call1.cancel();
  assertEquals(1,client.connectionPool().connectionCount());
  Call call2=client.newCall(new Request.Builder().url(server.url("/")).build());
  Response response2=call2.execute();
  assertEquals("def",response2.body().string());
  assertEquals(0,server.takeRequest().getSequenceNumber());
  response.close();
}
