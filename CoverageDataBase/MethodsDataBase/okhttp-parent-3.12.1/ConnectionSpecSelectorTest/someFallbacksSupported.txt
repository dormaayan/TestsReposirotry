@Test public void someFallbacksSupported() throws Exception {
  ConnectionSpec sslV3=new ConnectionSpec.Builder(ConnectionSpec.MODERN_TLS).tlsVersions(TlsVersion.SSL_3_0).build();
  ConnectionSpecSelector connectionSpecSelector=createConnectionSpecSelector(ConnectionSpec.MODERN_TLS,ConnectionSpec.COMPATIBLE_TLS,sslV3);
  TlsVersion[] enabledSocketTlsVersions={TlsVersion.TLS_1_1,TlsVersion.TLS_1_0};
  SSLSocket socket=createSocketWithEnabledProtocols(enabledSocketTlsVersions);
  connectionSpecSelector.configureSecureSocket(socket);
  assertEnabledProtocols(socket,TlsVersion.TLS_1_1,TlsVersion.TLS_1_0);
  boolean retry=connectionSpecSelector.connectionFailed(RETRYABLE_EXCEPTION);
  assertTrue(retry);
  socket.close();
  socket=createSocketWithEnabledProtocols(enabledSocketTlsVersions);
  connectionSpecSelector.configureSecureSocket(socket);
  assertEnabledProtocols(socket,TlsVersion.TLS_1_0);
  retry=connectionSpecSelector.connectionFailed(RETRYABLE_EXCEPTION);
  assertFalse(retry);
  socket.close();
}
