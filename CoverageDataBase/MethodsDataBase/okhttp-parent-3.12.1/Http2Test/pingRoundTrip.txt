@Test public void pingRoundTrip() throws IOException {
  final int expectedPayload1=7;
  final int expectedPayload2=8;
  writeMedium(frame,8);
  frame.writeByte(Http2.TYPE_PING);
  frame.writeByte(Http2.FLAG_ACK);
  frame.writeInt(0);
  frame.writeInt(expectedPayload1);
  frame.writeInt(expectedPayload2);
  assertEquals(frame,sendPingFrame(true,expectedPayload1,expectedPayload2));
  reader.nextFrame(false,new BaseTestHandler(){
    @Override public void ping(    boolean ack,    int payload1,    int payload2){
      assertTrue(ack);
      assertEquals(expectedPayload1,payload1);
      assertEquals(expectedPayload2,payload2);
    }
  }
);
}
