@Test public void readSettingsFrameTooShortFrameLength() throws IOException {
  writeMedium(frame,6);
  frame.writeByte(Http2.TYPE_SETTINGS);
  frame.writeByte(Http2.FLAG_NONE);
  frame.writeInt(0);
  frame.writeShort(5);
  frame.writeInt((int)Math.pow(2,14) - 1);
  try {
    reader.nextFrame(false,new BaseTestHandler());
    fail();
  }
 catch (  IOException e) {
    assertEquals("PROTOCOL_ERROR SETTINGS_MAX_FRAME_SIZE: 16383",e.getMessage());
  }
}
