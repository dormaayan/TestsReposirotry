@Test public void cancelBeforeBodyIsRead() throws Exception {
  server.enqueue(new MockResponse().setBody("def").throttleBody(1,750,TimeUnit.MILLISECONDS));
  final Call call=client.newCall(new Request.Builder().url(server.url("/a")).build());
  ExecutorService executor=Executors.newSingleThreadExecutor();
  Future<Response> result=executor.submit(new Callable<Response>(){
    @Override public Response call() throws Exception {
      return call.execute();
    }
  }
);
  Thread.sleep(100);
  call.cancel();
  try {
    result.get().body().bytes();
    fail();
  }
 catch (  IOException expected) {
  }
  assertEquals(1,server.getRequestCount());
}
