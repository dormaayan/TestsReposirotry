@Test public void headResponseContentLengthIsIgnored() throws Exception {
  server.enqueue(new MockResponse().clearHeaders().addHeader("Content-Length","100"));
  server.enqueue(new MockResponse().setBody("abc"));
  Request headRequest=new Request.Builder().url(server.url("/")).head().build();
  Response response=client.newCall(headRequest).execute();
  assertEquals(200,response.code());
  assertArrayEquals(new byte[0],response.body().bytes());
  Request getRequest=new Request.Builder().url(server.url("/")).build();
  executeSynchronously(getRequest).assertCode(200).assertBody("abc");
  assertEquals(0,server.takeRequest().getSequenceNumber());
  assertEquals(1,server.takeRequest().getSequenceNumber());
}
