@Test public void cancelWithInterceptor() throws Exception {
  client=client.newBuilder().addInterceptor(new Interceptor(){
    @Override public Response intercept(    Chain chain) throws IOException {
      chain.proceed(chain.request());
      throw new AssertionError();
    }
  }
).build();
  Call call=client.newCall(new Request.Builder().url(server.url("/a")).build());
  call.cancel();
  try {
    call.execute();
    fail();
  }
 catch (  IOException expected) {
  }
  assertEquals(0,server.getRequestCount());
}
