/** 
 * Equivalent to  {@code CacheTest.postInvalidatesCacheWithUncacheableResponse()} but demonstratingthat  {@link ResponseCache} provides no mechanism for cache invalidation as the result oflocally-made requests. In reality invalidation could take place from other clients at any time.
 */
@Test public void postInvalidatesCacheWithUncacheableResponse() throws Exception {
  server.enqueue(new MockResponse().setBody("A").addHeader("Expires: " + formatDate(1,TimeUnit.HOURS)));
  server.enqueue(new MockResponse().setBody("B").setResponseCode(500));
  URL url=server.url("/").url();
  assertEquals("A",readAscii(openConnection(url)));
  HttpURLConnection invalidate=openConnection(url);
  invalidate.setRequestMethod("POST");
  addRequestBodyIfNecessary("POST",invalidate);
  assertEquals("B",readAscii(invalidate));
  assertEquals("A",readAscii(openConnection(url)));
}
