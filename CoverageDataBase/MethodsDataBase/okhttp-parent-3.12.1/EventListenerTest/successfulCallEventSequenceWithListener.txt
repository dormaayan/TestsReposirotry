@Test public void successfulCallEventSequenceWithListener() throws IOException {
  server.enqueue(new MockResponse().setBody("abc"));
  client=client.newBuilder().addNetworkInterceptor(new HttpLoggingInterceptor().setLevel(HttpLoggingInterceptor.Level.BODY)).build();
  Call call=client.newCall(new Request.Builder().url(server.url("/")).build());
  Response response=call.execute();
  assertEquals(200,response.code());
  assertEquals("abc",response.body().string());
  response.body().close();
  List<String> expectedEvents=Arrays.asList("CallStart","DnsStart","DnsEnd","ConnectStart","ConnectEnd","ConnectionAcquired","RequestHeadersStart","RequestHeadersEnd","ResponseHeadersStart","ResponseHeadersEnd","ResponseBodyStart","ResponseBodyEnd","ConnectionReleased","CallEnd");
  assertEquals(expectedEvents,listener.recordedEventTypes());
}
