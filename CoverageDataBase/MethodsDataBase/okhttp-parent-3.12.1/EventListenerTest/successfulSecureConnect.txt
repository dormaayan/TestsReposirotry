@Test public void successfulSecureConnect() throws IOException {
  enableTlsWithTunnel(false);
  server.enqueue(new MockResponse());
  Call call=client.newCall(new Request.Builder().url(server.url("/")).build());
  Response response=call.execute();
  assertEquals(200,response.code());
  response.body().close();
  SecureConnectStart secureStart=listener.removeUpToEvent(SecureConnectStart.class);
  assertSame(call,secureStart.call);
  SecureConnectEnd secureEnd=listener.removeUpToEvent(SecureConnectEnd.class);
  assertSame(call,secureEnd.call);
  assertNotNull(secureEnd.handshake);
}
