@Test public void put_httpGet() throws Exception {
  final String statusLine="HTTP/1.1 200 Fantastic";
  final byte[] response="ResponseString".getBytes(StandardCharsets.UTF_8);
  final URL serverUrl=configureServer(new MockResponse().setStatus(statusLine).addHeader("A","c").setBody(new Buffer().write(response)));
  ResponseCache responseCache=new AbstractResponseCache(){
    @Override public CacheRequest put(    URI uri,    URLConnection connection) throws IOException {
      try {
        assertTrue(connection instanceof HttpURLConnection);
        assertFalse(connection instanceof HttpsURLConnection);
        assertEquals(response.length,connection.getContentLength());
        HttpURLConnection httpUrlConnection=(HttpURLConnection)connection;
        assertEquals("GET",httpUrlConnection.getRequestMethod());
        assertTrue(httpUrlConnection.getDoInput());
        assertFalse(httpUrlConnection.getDoOutput());
        assertEquals("Fantastic",httpUrlConnection.getResponseMessage());
        assertEquals(toUri(serverUrl),uri);
        assertEquals(serverUrl,connection.getURL());
        assertEquals("value",connection.getRequestProperty("key"));
        assertEquals(statusLine,httpUrlConnection.getHeaderField(null));
        assertEquals("c",httpUrlConnection.getHeaderField("A"));
        assertEquals("c",httpUrlConnection.getHeaderField("a"));
        return null;
      }
 catch (      Throwable t) {
        throw new IOException("unexpected cache failure",t);
      }
    }
  }
;
  setInternalCache(new CacheAdapter(responseCache));
  connection=new OkUrlFactory(client).open(serverUrl);
  connection.setRequestProperty("key","value");
  executeGet(connection);
}
