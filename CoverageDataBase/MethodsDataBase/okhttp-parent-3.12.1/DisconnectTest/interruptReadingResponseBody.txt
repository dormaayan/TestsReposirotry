@Test public void interruptReadingResponseBody() throws Exception {
  int responseBodySize=2 * 1024 * 1024;
  server.enqueue(new MockResponse().setBody(new Buffer().write(new byte[responseBodySize])).throttleBody(64 * 1024,125,TimeUnit.MILLISECONDS));
  server.start();
  HttpURLConnection connection=new OkUrlFactory(client).open(server.url("/").url());
  disconnectLater(connection,500);
  InputStream responseBody=connection.getInputStream();
  byte[] buffer=new byte[1024];
  try {
    while (responseBody.read(buffer) != -1) {
    }
    fail("Expected connection to be closed");
  }
 catch (  IOException expected) {
  }
  responseBody.close();
}
