@Test public void authenticateCallsTrackedAsRedirects() throws Exception {
  server.enqueue(new MockResponse().setResponseCode(302).addHeader("Location: /b"));
  server.enqueue(new MockResponse().setResponseCode(401).addHeader("WWW-Authenticate: Basic realm=\"protected area\""));
  server.enqueue(new MockResponse().setBody("c"));
  RecordingOkAuthenticator authenticator=new RecordingOkAuthenticator(Credentials.basic("jesse","peanutbutter"),"Basic");
  urlFactory.setClient(urlFactory.client().newBuilder().authenticator(authenticator).build());
  assertContent("c",urlFactory.open(server.url("/a").url()));
  Response challengeResponse=authenticator.responses.get(0);
  assertEquals("/b",challengeResponse.request().url().url().getPath());
  Response redirectedBy=challengeResponse.priorResponse();
  assertEquals("/a",redirectedBy.request().url().url().getPath());
}
