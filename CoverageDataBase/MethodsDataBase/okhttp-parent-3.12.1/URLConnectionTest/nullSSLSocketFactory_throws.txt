@Test public void nullSSLSocketFactory_throws() throws Exception {
  server.useHttps(handshakeCertificates.sslSocketFactory(),false);
  HttpsURLConnection connection=(HttpsURLConnection)server.url("/").url().openConnection();
  try {
    connection.setSSLSocketFactory(null);
    fail();
  }
 catch (  IllegalArgumentException expected) {
  }
}
