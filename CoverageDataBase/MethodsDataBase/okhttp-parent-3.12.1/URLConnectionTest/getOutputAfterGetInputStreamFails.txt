@Test public void getOutputAfterGetInputStreamFails() throws Exception {
  server.enqueue(new MockResponse());
  connection=urlFactory.open(server.url("/").url());
  connection.setDoOutput(true);
  try {
    connection.getInputStream();
    connection.getOutputStream();
    fail();
  }
 catch (  ProtocolException expected) {
  }
}
