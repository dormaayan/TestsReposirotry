@Test public void response305UseProxy() throws Exception {
  server.enqueue(new MockResponse().setResponseCode(HttpURLConnection.HTTP_USE_PROXY).addHeader("Location: " + server.url("/").url()).setBody("This page has moved!"));
  server.enqueue(new MockResponse().setBody("Proxy Response"));
  connection=urlFactory.open(server.url("/foo").url());
  assertEquals("This page has moved!",readAscii(connection.getInputStream(),Integer.MAX_VALUE));
  RecordedRequest page1=server.takeRequest();
  assertEquals("GET /foo HTTP/1.1",page1.getRequestLine());
  assertEquals(1,server.getRequestCount());
}
