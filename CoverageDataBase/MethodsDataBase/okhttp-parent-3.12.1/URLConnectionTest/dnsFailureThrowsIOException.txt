@Test public void dnsFailureThrowsIOException() throws IOException {
  urlFactory.setClient(urlFactory.client().newBuilder().dns(new FakeDns()).build());
  connection=urlFactory.open(new URL("http://host.unlikelytld"));
  try {
    connection.connect();
    fail();
  }
 catch (  IOException expected) {
  }
}
