@Test public void connectFail(){
  server.useHttps(handshakeCertificates.sslSocketFactory(),false);
  server.enqueue(new MockResponse().setSocketPolicy(SocketPolicy.FAIL_HANDSHAKE));
  url=server.url("/");
  try {
    client.newCall(request().build()).execute();
    fail();
  }
 catch (  IOException expected) {
  }
  logRecorder.assertLogMatch("callStart: Request\\{method=GET, url=" + url + ", tags=\\{\\}\\}").assertLogMatch("dnsStart: " + url.host()).assertLogMatch("dnsEnd: \\[.+\\]").assertLogMatch("connectStart: " + url.host() + "/.+ DIRECT").assertLogMatch("secureConnectStart").assertLogMatch("connectFailed: null javax\\.net\\.ssl\\.SSLProtocolException: Handshake message sequence violation, 1").assertLogMatch("callFailed: javax.net.ssl.SSLProtocolException: Handshake message sequence violation, 1").assertNoMoreLogs();
}
