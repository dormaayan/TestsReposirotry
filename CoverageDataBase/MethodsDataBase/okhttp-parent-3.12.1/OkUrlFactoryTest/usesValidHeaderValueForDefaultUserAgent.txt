@Test public void usesValidHeaderValueForDefaultUserAgent() throws Exception {
  String userAgent="üç© " + "\u001F" + ('\u001f' + 1) + ('\u007f' - 1)+ '\u007f'+ " üç©";
  String expected="? ?" + ('\u001f' + 1) + ('\u007f' - 1)+ "? ?";
  System.setProperty("http.agent",userAgent);
  server.enqueue(new MockResponse().setResponseCode(200));
  InputStream inputStream=factory.open(server.url("/").url()).getInputStream();
  long skipped;
  do {
    skipped=inputStream.skip(Long.MAX_VALUE);
  }
 while (skipped != 0);
  RecordedRequest recordedRequest=server.takeRequest();
  assertEquals(expected,recordedRequest.getHeader("User-Agent"));
}
