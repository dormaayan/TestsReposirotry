@Test public void queryForAllSelectedRoutes() throws IOException {
  Address address=httpAddress();
  RouteSelector routeSelector=new RouteSelector(address,routeDatabase,null,EventListener.NONE);
  dns.set(uriHost,dns.allocate(2));
  RouteSelector.Selection selection=routeSelector.next();
  dns.assertRequests(uriHost);
  List<Route> routes=selection.getAll();
  assertRoute(routes.get(0),address,NO_PROXY,dns.lookup(uriHost,0),uriPort);
  assertRoute(routes.get(1),address,NO_PROXY,dns.lookup(uriHost,1),uriPort);
  assertSame(routes.get(0),selection.next());
  assertSame(routes.get(1),selection.next());
  assertFalse(selection.hasNext());
  assertFalse(routeSelector.hasNext());
}
