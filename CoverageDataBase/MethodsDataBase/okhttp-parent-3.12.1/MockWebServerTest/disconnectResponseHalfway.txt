@Test public void disconnectResponseHalfway() throws IOException {
  server.enqueue(new MockResponse().setBody("ab").setSocketPolicy(SocketPolicy.DISCONNECT_DURING_RESPONSE_BODY));
  URLConnection connection=server.url("/").url().openConnection();
  assertEquals(2,connection.getContentLength());
  InputStream in=connection.getInputStream();
  assertEquals('a',in.read());
  try {
    int byteRead=in.read();
    assertEquals(-1,byteRead);
  }
 catch (  ProtocolException e) {
  }
}
