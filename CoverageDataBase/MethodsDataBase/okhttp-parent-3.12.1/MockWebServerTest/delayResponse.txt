/** 
 * Delay the response body by sleeping 1s. 
 */
@Test public void delayResponse() throws IOException {
  server.enqueue(new MockResponse().setBody("ABCDEF").setBodyDelay(1,SECONDS));
  long startNanos=System.nanoTime();
  URLConnection connection=server.url("/").url().openConnection();
  InputStream in=connection.getInputStream();
  assertEquals('A',in.read());
  long elapsedNanos=System.nanoTime() - startNanos;
  long elapsedMillis=NANOSECONDS.toMillis(elapsedNanos);
  assertTrue(Util.format("Request + Response: %sms",elapsedMillis),elapsedMillis >= 1000);
  in.close();
}
