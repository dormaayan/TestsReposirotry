/** 
 * Make sure that statistics tracking are wired all the way through the wrapper class. http://code.google.com/p/android/issues/detail?id=25418
 */
@Test public void statisticsTracking() throws Exception {
  HttpResponseCache cache=HttpResponseCache.install(cacheDir,10 * 1024 * 1024);
  server.enqueue(new MockResponse().addHeader("Cache-Control: max-age=60").setBody("A"));
  URLConnection c1=openUrl(server.url("/"));
  InputStream inputStream=c1.getInputStream();
  assertEquals('A',inputStream.read());
  inputStream.close();
  assertEquals(1,cache.getRequestCount());
  assertEquals(1,cache.getNetworkCount());
  assertEquals(0,cache.getHitCount());
  URLConnection c2=openUrl(server.url("/"));
  assertEquals('A',c2.getInputStream().read());
  URLConnection c3=openUrl(server.url("/"));
  assertEquals('A',c3.getInputStream().read());
  assertEquals(3,cache.getRequestCount());
  assertEquals(1,cache.getNetworkCount());
  assertEquals(2,cache.getHitCount());
}
