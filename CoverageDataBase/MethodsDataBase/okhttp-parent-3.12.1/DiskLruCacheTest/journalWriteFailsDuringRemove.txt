@Test public void journalWriteFailsDuringRemove() throws Exception {
  set("a","a","a");
  set("b","b","b");
  fileSystem.setFaultyWrite(journalFile,true);
  assertTrue(cache.remove("a"));
  fileSystem.setFaultyWrite(journalFile,false);
  cache.close();
  cache=new DiskLruCache(fileSystem,cacheDir,appVersion,2,Integer.MAX_VALUE,executor);
  assertAbsent("a");
  assertValue("b","b","b");
}
