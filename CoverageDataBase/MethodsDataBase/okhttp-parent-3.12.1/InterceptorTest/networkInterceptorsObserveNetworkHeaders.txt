@Test public void networkInterceptorsObserveNetworkHeaders() throws Exception {
  server.enqueue(new MockResponse().setBody(gzip("abcabcabc")).addHeader("Content-Encoding: gzip"));
  Interceptor interceptor=new Interceptor(){
    @Override public Response intercept(    Chain chain) throws IOException {
      Request networkRequest=chain.request();
      assertNotNull(networkRequest.header("User-Agent"));
      assertEquals(server.getHostName() + ":" + server.getPort(),networkRequest.header("Host"));
      assertNotNull(networkRequest.header("Accept-Encoding"));
      Response networkResponse=chain.proceed(networkRequest);
      assertEquals("gzip",networkResponse.header("Content-Encoding"));
      return networkResponse;
    }
  }
;
  client=client.newBuilder().addNetworkInterceptor(interceptor).build();
  Request request=new Request.Builder().url(server.url("/")).build();
  assertNull(request.header("User-Agent"));
  assertNull(request.header("Host"));
  assertNull(request.header("Accept-Encoding"));
  Response response=client.newCall(request).execute();
  assertNull(request.header("Content-Encoding"));
  assertEquals("abcabcabc",response.body().string());
}
