@Test public void oldestConnectionsEvictedIfIdleLimitExceeded() throws Exception {
  ConnectionPool pool=new ConnectionPool(2,100L,TimeUnit.NANOSECONDS);
  pool.cleanupRunning=true;
  RealConnection c1=newConnection(pool,routeA1,50L);
  RealConnection c2=newConnection(pool,routeB1,75L);
  assertEquals(50L,pool.cleanup(100L));
  assertEquals(2,pool.connectionCount());
  assertFalse(c1.socket().isClosed());
  assertFalse(c2.socket().isClosed());
  RealConnection c3=newConnection(pool,routeC1,75L);
  assertEquals(0L,pool.cleanup(100L));
  assertEquals(2,pool.connectionCount());
  assertTrue(c1.socket().isClosed());
  assertFalse(c2.socket().isClosed());
  assertFalse(c3.socket().isClosed());
}
