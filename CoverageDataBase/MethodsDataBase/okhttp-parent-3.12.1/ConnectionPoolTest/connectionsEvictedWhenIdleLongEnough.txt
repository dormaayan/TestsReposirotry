@Test public void connectionsEvictedWhenIdleLongEnough() throws Exception {
  ConnectionPool pool=new ConnectionPool(Integer.MAX_VALUE,100L,TimeUnit.NANOSECONDS);
  pool.cleanupRunning=true;
  RealConnection c1=newConnection(pool,routeA1,50L);
  assertEquals(100L,pool.cleanup(50L));
  assertEquals(1,pool.connectionCount());
  assertFalse(c1.socket().isClosed());
  assertEquals(90L,pool.cleanup(60L));
  assertEquals(1,pool.connectionCount());
  assertFalse(c1.socket().isClosed());
  assertEquals(1L,pool.cleanup(149L));
  assertEquals(1,pool.connectionCount());
  assertFalse(c1.socket().isClosed());
  assertEquals(0,pool.cleanup(150L));
  assertEquals(0,pool.connectionCount());
  assertTrue(c1.socket().isClosed());
  assertEquals(-1,pool.cleanup(150L));
  assertEquals(0,pool.connectionCount());
  assertTrue(c1.socket().isClosed());
}
