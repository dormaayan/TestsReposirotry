/** 
 * HPACK has a max header table size, which can be smaller than the max header message. Ensure the larger header content is not lost.
 */
@Test public void tooLargeToHPackIsStillEmitted() throws IOException {
  bytesIn.writeByte(0x21);
  bytesIn.writeByte(0x00);
  bytesIn.writeByte(0x0a);
  bytesIn.writeUtf8("custom-key");
  bytesIn.writeByte(0x0d);
  bytesIn.writeUtf8("custom-header");
  hpackReader.readHeaders();
  assertEquals(0,hpackReader.headerCount);
  assertEquals(headerEntries("custom-key","custom-header"),hpackReader.getAndResetHeaderList());
}
