/** 
 * Oldest entries are evicted to support newer ones. 
 */
@Test public void writerEviction() throws IOException {
  List<Header> headerBlock=headerEntries("custom-foo","custom-header","custom-bar","custom-header","custom-baz","custom-header");
  bytesIn.writeByte(0x40);
  bytesIn.writeByte(0x0a);
  bytesIn.writeUtf8("custom-foo");
  bytesIn.writeByte(0x0d);
  bytesIn.writeUtf8("custom-header");
  bytesIn.writeByte(0x40);
  bytesIn.writeByte(0x0a);
  bytesIn.writeUtf8("custom-bar");
  bytesIn.writeByte(0x0d);
  bytesIn.writeUtf8("custom-header");
  bytesIn.writeByte(0x40);
  bytesIn.writeByte(0x0a);
  bytesIn.writeUtf8("custom-baz");
  bytesIn.writeByte(0x0d);
  bytesIn.writeUtf8("custom-header");
  Hpack.Writer writer=new Hpack.Writer(110,false,bytesOut);
  writer.writeHeaders(headerBlock);
  assertEquals(bytesIn,bytesOut);
  assertEquals(2,writer.headerCount);
  int tableLength=writer.dynamicTable.length;
  Header entry=writer.dynamicTable[tableLength - 1];
  checkEntry(entry,"custom-bar","custom-header",55);
  entry=writer.dynamicTable[tableLength - 2];
  checkEntry(entry,"custom-baz","custom-header",55);
}
