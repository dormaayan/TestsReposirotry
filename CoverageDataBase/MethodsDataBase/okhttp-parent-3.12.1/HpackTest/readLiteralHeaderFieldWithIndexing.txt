/** 
 * http://tools.ietf.org/html/draft-ietf-httpbis-header-compression-12#appendix-C.2.1
 */
@Test public void readLiteralHeaderFieldWithIndexing() throws IOException {
  bytesIn.writeByte(0x40);
  bytesIn.writeByte(0x0a);
  bytesIn.writeUtf8("custom-key");
  bytesIn.writeByte(0x0d);
  bytesIn.writeUtf8("custom-header");
  hpackReader.readHeaders();
  assertEquals(1,hpackReader.headerCount);
  assertEquals(55,hpackReader.dynamicTableByteCount);
  Header entry=hpackReader.dynamicTable[readerHeaderTableLength() - 1];
  checkEntry(entry,"custom-key","custom-header",55);
  assertEquals(headerEntries("custom-key","custom-header"),hpackReader.getAndResetHeaderList());
}
