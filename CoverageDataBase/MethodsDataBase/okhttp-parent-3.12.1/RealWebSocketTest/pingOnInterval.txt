@Test public void pingOnInterval() throws IOException {
  long startNanos=System.nanoTime();
  client.initWebSocket(random,500);
  server.processNextFrame();
  client.processNextFrame();
  long elapsedUntilPing1=System.nanoTime() - startNanos;
  assertEquals(500,TimeUnit.NANOSECONDS.toMillis(elapsedUntilPing1),250d);
  server.processNextFrame();
  client.processNextFrame();
  long elapsedUntilPing2=System.nanoTime() - startNanos;
  assertEquals(1000,TimeUnit.NANOSECONDS.toMillis(elapsedUntilPing2),250d);
  server.processNextFrame();
  client.processNextFrame();
  long elapsedUntilPing3=System.nanoTime() - startNanos;
  assertEquals(1500,TimeUnit.NANOSECONDS.toMillis(elapsedUntilPing3),250d);
}
