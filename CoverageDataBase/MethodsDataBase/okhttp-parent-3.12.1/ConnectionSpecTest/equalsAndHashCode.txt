@Test public void equalsAndHashCode() throws Exception {
  ConnectionSpec allCipherSuites=new ConnectionSpec.Builder(ConnectionSpec.MODERN_TLS).allEnabledCipherSuites().build();
  ConnectionSpec allTlsVersions=new ConnectionSpec.Builder(ConnectionSpec.MODERN_TLS).allEnabledTlsVersions().build();
  Set<Object> set=new CopyOnWriteArraySet<>();
  assertTrue(set.add(ConnectionSpec.MODERN_TLS));
  assertTrue(set.add(ConnectionSpec.COMPATIBLE_TLS));
  assertTrue(set.add(ConnectionSpec.CLEARTEXT));
  assertTrue(set.add(allTlsVersions));
  assertTrue(set.add(allCipherSuites));
  assertTrue(set.remove(ConnectionSpec.MODERN_TLS));
  assertTrue(set.remove(ConnectionSpec.COMPATIBLE_TLS));
  assertTrue(set.remove(ConnectionSpec.CLEARTEXT));
  assertTrue(set.remove(allTlsVersions));
  assertTrue(set.remove(allCipherSuites));
  assertTrue(set.isEmpty());
}
