@Test public void testRfc2109Response() throws Exception {
  CookieManager cookieManager=new CookieManager(null,ACCEPT_ORIGINAL_SERVER);
  client=client.newBuilder().cookieJar(new JavaNetCookieJar(cookieManager)).build();
  MockWebServer server=new MockWebServer();
  server.start();
  HttpUrl urlWithIpAddress=urlWithIpAddress(server,"/path/foo");
  server.enqueue(new MockResponse().addHeader("Set-Cookie: a=android; " + "Comment=this cookie is delicious; " + "Domain=" + urlWithIpAddress.host() + "; "+ "Max-Age=60; "+ "Path=/path; "+ "Secure; "+ "Version=1"));
  get(urlWithIpAddress);
  List<HttpCookie> cookies=cookieManager.getCookieStore().getCookies();
  assertEquals(1,cookies.size());
  HttpCookie cookie=cookies.get(0);
  assertEquals("a",cookie.getName());
  assertEquals("android",cookie.getValue());
  assertEquals(null,cookie.getCommentURL());
  assertEquals(false,cookie.getDiscard());
  assertEquals(60.0,cookie.getMaxAge(),1.0);
  assertEquals("/path",cookie.getPath());
  assertEquals(true,cookie.getSecure());
}
