@Test public void clientDoesNotLimitFlowControl() throws Exception {
  int dataLength=16384;
  peer.sendFrame().settings(new Settings());
  peer.acceptFrame();
  peer.acceptFrame();
  peer.sendFrame().synReply(false,3,headerEntries("b","banana"));
  peer.sendFrame().data(false,3,new Buffer().write(new byte[dataLength]),dataLength);
  peer.sendFrame().data(false,3,new Buffer().write(new byte[dataLength]),dataLength);
  peer.sendFrame().data(false,3,new Buffer().write(new byte[dataLength]),dataLength);
  peer.sendFrame().data(false,3,new Buffer().write(new byte[dataLength]),dataLength);
  peer.sendFrame().data(false,3,new Buffer().write(new byte[1]),1);
  peer.sendFrame().ping(false,2,0);
  peer.acceptFrame();
  peer.play();
  Http2Connection connection=connect(peer);
  Http2Stream stream=connection.newStream(headerEntries("a","android"),false);
  assertEquals(Headers.of("b","banana"),stream.takeHeaders());
  InFrame synStream=peer.takeFrame();
  assertEquals(Http2.TYPE_HEADERS,synStream.type);
  InFrame ping=peer.takeFrame();
  assertEquals(Http2.TYPE_PING,ping.type);
  assertEquals(2,ping.payload1);
}
