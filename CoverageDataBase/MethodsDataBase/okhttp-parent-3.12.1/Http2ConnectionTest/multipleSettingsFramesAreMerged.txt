@Test public void multipleSettingsFramesAreMerged() throws Exception {
  Settings settings1=new Settings();
  settings1.set(HEADER_TABLE_SIZE,10000);
  settings1.set(INITIAL_WINDOW_SIZE,20000);
  settings1.set(MAX_FRAME_SIZE,30000);
  peer.sendFrame().settings(settings1);
  peer.acceptFrame();
  Settings settings2=new Settings();
  settings2.set(INITIAL_WINDOW_SIZE,40000);
  settings2.set(MAX_FRAME_SIZE,50000);
  settings2.set(MAX_CONCURRENT_STREAMS,60000);
  peer.sendFrame().settings(settings2);
  peer.acceptFrame();
  peer.sendFrame().ping(false,2,0);
  peer.acceptFrame();
  peer.play();
  Http2Connection connection=connect(peer);
  assertEquals(Http2.TYPE_SETTINGS,peer.takeFrame().type);
  assertEquals(Http2.TYPE_PING,peer.takeFrame().type);
synchronized (connection) {
    assertEquals(10000,connection.peerSettings.getHeaderTableSize());
    assertEquals(40000,connection.peerSettings.getInitialWindowSize());
    assertEquals(50000,connection.peerSettings.getMaxFrameSize(-1));
    assertEquals(60000,connection.peerSettings.getMaxConcurrentStreams(-1));
  }
}
