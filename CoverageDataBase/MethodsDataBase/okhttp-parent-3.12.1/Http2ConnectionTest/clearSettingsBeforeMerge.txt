@Test public void clearSettingsBeforeMerge() throws Exception {
  Settings settings1=new Settings();
  settings1.set(HEADER_TABLE_SIZE,10000);
  settings1.set(INITIAL_WINDOW_SIZE,20000);
  settings1.set(MAX_FRAME_SIZE,30000);
  peer.sendFrame().settings(settings1);
  peer.acceptFrame();
  peer.sendFrame().ping(false,2,0);
  peer.acceptFrame();
  peer.play();
  Http2Connection connection=connect(peer);
  Settings settings2=new Settings();
  settings2.set(MAX_CONCURRENT_STREAMS,60000);
  connection.readerRunnable.settings(true,settings2);
synchronized (connection) {
    assertEquals(-1,connection.peerSettings.getHeaderTableSize());
    assertEquals(DEFAULT_INITIAL_WINDOW_SIZE,connection.peerSettings.getInitialWindowSize());
    assertEquals(-1,connection.peerSettings.getMaxFrameSize(-1));
    assertEquals(60000,connection.peerSettings.getMaxConcurrentStreams(-1));
  }
}
