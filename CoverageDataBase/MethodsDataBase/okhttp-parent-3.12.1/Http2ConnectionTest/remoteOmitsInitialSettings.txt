@Test public void remoteOmitsInitialSettings() throws Exception {
  peer.acceptFrame();
  peer.sendFrame().synReply(false,3,headerEntries("a","android"));
  peer.acceptFrame();
  peer.play();
  Http2Connection connection=new Http2Connection.Builder(true).socket(peer.openSocket()).build();
  connection.start(false);
  Http2Stream stream=connection.newStream(headerEntries("b","banana"),false);
  try {
    stream.takeHeaders();
    fail();
  }
 catch (  IOException expected) {
    assertEquals("stream was reset: PROTOCOL_ERROR",expected.getMessage());
  }
  InFrame synStream=peer.takeFrame();
  assertEquals(Http2.TYPE_HEADERS,synStream.type);
  InFrame goaway=peer.takeFrame();
  assertEquals(Http2.TYPE_GOAWAY,goaway.type);
  assertEquals(ErrorCode.PROTOCOL_ERROR,goaway.errorCode);
}
