@Test public void serverClosesClientInputStream() throws Exception {
  peer.sendFrame().settings(new Settings());
  peer.acceptFrame();
  peer.acceptFrame();
  peer.sendFrame().synReply(false,3,headerEntries("b","banana"));
  peer.sendFrame().data(true,3,new Buffer().writeUtf8("square"),6);
  peer.acceptFrame();
  peer.sendFrame().ping(true,1,0);
  peer.play();
  Http2Connection connection=connect(peer);
  Http2Stream stream=connection.newStream(headerEntries("a","android"),false);
  Source source=stream.getSource();
  assertStreamData("square",source);
  connection.writePingAndAwaitPong();
  assertEquals(0,connection.openStreamCount());
  InFrame synStream=peer.takeFrame();
  assertEquals(Http2.TYPE_HEADERS,synStream.type);
  assertTrue(synStream.inFinished);
  assertFalse(synStream.outFinished);
}
