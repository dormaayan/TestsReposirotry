@Test public void clientPingsServer() throws Exception {
  peer.sendFrame().settings(new Settings());
  peer.acceptFrame();
  peer.acceptFrame();
  peer.sendFrame().ping(true,1,5);
  peer.play();
  Http2Connection connection=connect(peer);
  long pingAtNanos=System.nanoTime();
  connection.writePingAndAwaitPong();
  long elapsedNanos=System.nanoTime() - pingAtNanos;
  assertTrue(elapsedNanos > 0);
  assertTrue(elapsedNanos < TimeUnit.SECONDS.toNanos(1));
  InFrame pingFrame=peer.takeFrame();
  assertEquals(Http2.TYPE_PING,pingFrame.type);
  assertEquals(0,pingFrame.streamId);
  assertEquals(0x4f4b6f6b,pingFrame.payload1);
  assertEquals(0xf09f8da9,pingFrame.payload2);
  assertFalse(pingFrame.ack);
}
