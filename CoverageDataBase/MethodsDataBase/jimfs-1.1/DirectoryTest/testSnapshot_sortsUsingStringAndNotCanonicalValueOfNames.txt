@Test public void testSnapshot_sortsUsingStringAndNotCanonicalValueOfNames(){
  dir.link(caseInsensitive("FOO"),regularFile(10));
  dir.link(caseInsensitive("bar"),regularFile(10));
  ImmutableSortedSet<Name> snapshot=dir.snapshot();
  Iterable<String> strings=Iterables.transform(snapshot,Functions.toStringFunction());
  assertThat(strings).containsExactly("FOO","bar").inOrder();
}
