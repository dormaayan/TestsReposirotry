@Test public void testDirectoryAccessAndModifiedTimeUpdates() throws IOException {
  Files.createDirectories(path("/foo/bar"));
  FileTimeTester tester=new FileTimeTester(path("/foo/bar"));
  tester.assertAccessTimeDidNotChange();
  tester.assertModifiedTimeDidNotChange();
  Uninterruptibles.sleepUninterruptibly(1,MILLISECONDS);
  Files.createFile(path("/foo/bar/baz.txt"));
  tester.assertAccessTimeDidNotChange();
  tester.assertModifiedTimeChanged();
  Uninterruptibles.sleepUninterruptibly(1,MILLISECONDS);
  try (DirectoryStream<Path> stream=Files.newDirectoryStream(path("/foo/bar"))){
    Iterators.advance(stream.iterator(),Integer.MAX_VALUE);
  }
   tester.assertAccessTimeChanged();
  tester.assertModifiedTimeDidNotChange();
  Uninterruptibles.sleepUninterruptibly(1,MILLISECONDS);
  Files.move(path("/foo/bar/baz.txt"),path("/foo/bar/baz2.txt"));
  tester.assertAccessTimeDidNotChange();
  tester.assertModifiedTimeChanged();
  Uninterruptibles.sleepUninterruptibly(1,MILLISECONDS);
  Files.delete(path("/foo/bar/baz2.txt"));
  tester.assertAccessTimeDidNotChange();
  tester.assertModifiedTimeChanged();
}
