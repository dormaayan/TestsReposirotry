@Test public void generateReports_OnException_StoresEmptyTrendsFile(){
  List<String> jsonReports=Arrays.asList(ReportGenerator.reportFromResource(ReportGenerator.SAMPLE_JSON));
  Configuration configuration=new Configuration(reportDirectory,"myProject"){
    @Override public File getEmbeddingDirectory(){
      throw new IllegalStateException();
    }
  }
;
  ReportBuilder builder=new ReportBuilder(jsonReports,configuration);
  configuration.setTrendsStatsFile(trendsFileTmp);
  Reportable result=builder.generateReports();
  assertPageExists(reportDirectory,ReportBuilder.HOME_PAGE);
  assertThat(countHtmlFiles()).hasSize(1);
  assertThat(result).isNull();
}
