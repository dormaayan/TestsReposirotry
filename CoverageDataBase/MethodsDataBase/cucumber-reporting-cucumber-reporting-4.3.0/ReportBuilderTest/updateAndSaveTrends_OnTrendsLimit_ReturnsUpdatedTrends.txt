@Test public void updateAndSaveTrends_OnTrendsLimit_ReturnsUpdatedTrends(){
  final int trendsLimit=2;
  setUpWithJson(SAMPLE_JSON);
  final String buildNumber="my build";
  configuration.setBuildNumber(buildNumber);
  configuration.setTrends(trendsFileTmp,trendsLimit);
  ReportBuilder builder=new ReportBuilder(jsonReports,configuration);
  Deencapsulation.setField(builder,"reportResult",reportResult);
  Trends trends=Deencapsulation.invoke(builder,"updateAndSaveTrends",reportResult.getFeatureReport());
  assertThat(trends.getBuildNumbers()).hasSize(trendsLimit);
  assertThat(trends.getBuildNumbers()).endsWith(buildNumber);
  assertThat(trends.getFailedScenarios()).hasSize(trendsLimit);
  assertThat(trends.getFailedScenarios()).endsWith(reportResult.getFeatureReport().getFailedScenarios());
}
