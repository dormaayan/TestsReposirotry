@Test public void testComposeFrameTransform() throws MathIllegalArgumentException {
  FieldRotation<DerivativeStructure> r1=new FieldRotation<DerivativeStructure>(createVector(2,-3,5),createAngle(1.7),RotationConvention.FRAME_TRANSFORM);
  FieldRotation<DerivativeStructure> r2=new FieldRotation<DerivativeStructure>(createVector(-1,3,2),createAngle(0.3),RotationConvention.FRAME_TRANSFORM);
  FieldRotation<DerivativeStructure> r3=r2.compose(r1,RotationConvention.FRAME_TRANSFORM);
  FieldRotation<DerivativeStructure> r3Double=r2.compose(new Rotation(r1.getQ0().getReal(),r1.getQ1().getReal(),r1.getQ2().getReal(),r1.getQ3().getReal(),false),RotationConvention.FRAME_TRANSFORM);
  for (double x=-0.9; x < 0.9; x+=0.2) {
    for (double y=-0.9; y < 0.9; y+=0.2) {
      for (double z=-0.9; z < 0.9; z+=0.2) {
        FieldVector3D<DerivativeStructure> u=createVector(x,y,z);
        checkVector(r1.applyTo(r2.applyTo(u)),r3.applyTo(u));
        checkVector(r1.applyTo(r2.applyTo(u)),r3Double.applyTo(u));
      }
    }
  }
}
