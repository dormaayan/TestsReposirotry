/** 
 * Test ValueServer REPLAY_MODE using values in testData file.<br> Check that the values 1,2,1001,1002 match data file values 1 and 2. the sample data file.
 */
@Test public void testReplay() throws Exception {
  double firstDataValue=4.038625496201205;
  double secondDataValue=3.6485326248346936;
  double tolerance=10E-15;
  double compareValue=0.0d;
  vs.setMode(ValueServer.REPLAY_MODE);
  vs.resetReplayFile();
  compareValue=vs.getNext();
  Assert.assertEquals(compareValue,firstDataValue,tolerance);
  compareValue=vs.getNext();
  Assert.assertEquals(compareValue,secondDataValue,tolerance);
  for (int i=3; i < 1001; i++) {
    compareValue=vs.getNext();
  }
  compareValue=vs.getNext();
  Assert.assertEquals(compareValue,firstDataValue,tolerance);
  compareValue=vs.getNext();
  Assert.assertEquals(compareValue,secondDataValue,tolerance);
  vs.closeReplayFile();
  vs.closeReplayFile();
}
