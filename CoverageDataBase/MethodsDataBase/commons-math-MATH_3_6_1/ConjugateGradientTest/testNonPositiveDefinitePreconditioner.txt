@Test(expected=NonPositiveDefiniteOperatorException.class) public void testNonPositiveDefinitePreconditioner(){
  final Array2DRowRealMatrix a=new Array2DRowRealMatrix(2,2);
  a.setEntry(0,0,1d);
  a.setEntry(0,1,2d);
  a.setEntry(1,0,3d);
  a.setEntry(1,1,4d);
  final RealLinearOperator m=new RealLinearOperator(){
    @Override public RealVector operate(    final RealVector x){
      final ArrayRealVector y=new ArrayRealVector(2);
      y.setEntry(0,-x.getEntry(0));
      y.setEntry(1,x.getEntry(1));
      return y;
    }
    @Override public int getRowDimension(){
      return 2;
    }
    @Override public int getColumnDimension(){
      return 2;
    }
  }
;
  final PreconditionedIterativeLinearSolver solver;
  solver=new ConjugateGradient(10,0d,true);
  final ArrayRealVector b=new ArrayRealVector(2);
  b.setEntry(0,-1d);
  b.setEntry(1,-1d);
  solver.solve(a,m,b);
}
