@Test public void testSerializeUnserializable() throws Exception {
  final ExceptionContext cOut=new ExceptionContext(new Exception("Apache Commons Math"));
  cOut.addMessage(LocalizedFormats.SIMPLE_MESSAGE,"OK");
  cOut.addMessage(LocalizedFormats.SIMPLE_MESSAGE,new Unserializable());
  String key="Key 1";
  cOut.setValue(key,new Unserializable());
{
    ByteArrayOutputStream bos=new ByteArrayOutputStream();
    ObjectOutputStream oos=new ObjectOutputStream(bos);
    oos.writeObject(cOut);
    ByteArrayInputStream bis=new ByteArrayInputStream(bos.toByteArray());
    ObjectInputStream ois=new ObjectInputStream(bis);
    ExceptionContext cIn=(ExceptionContext)ois.readObject();
    String nsObjStr=(String)cIn.getValue(key);
    Assert.assertTrue(nsObjStr.matches(".*could not be serialized.*"));
  }
}
