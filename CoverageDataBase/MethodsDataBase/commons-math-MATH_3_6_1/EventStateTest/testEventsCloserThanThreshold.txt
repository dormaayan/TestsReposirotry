@Test public void testEventsCloserThanThreshold() throws DimensionMismatchException, NumberIsTooSmallException, MaxCountExceededException, NoBracketingException {
  FirstOrderDifferentialEquations equation=new FirstOrderDifferentialEquations(){
    public int getDimension(){
      return 1;
    }
    public void computeDerivatives(    double t,    double[] y,    double[] yDot){
      yDot[0]=1.0;
    }
  }
;
  LutherIntegrator integrator=new LutherIntegrator(20.0);
  CloseEventsGenerator eventsGenerator=new CloseEventsGenerator(9.0 - 1.0 / 128,9.0 + 1.0 / 128);
  integrator.addEventHandler(eventsGenerator,1.0,0.02,1000);
  double[] y=new double[1];
  double tEnd=integrator.integrate(equation,0.0,y,100.0,y);
  Assert.assertEquals(2,eventsGenerator.getCount());
  Assert.assertEquals(9.0 + 1.0 / 128,tEnd,1.0 / 32.0);
}
