/** 
 * Regression test for a bug in findInsertionIndex where the hashing in the second probing loop was inconsistent with the first causing duplicate keys after the right sequence of puts and removes.
 */
@Test public void testPutKeysWithCollisions(){
  OpenIntToFieldHashMap<Fraction> map=new OpenIntToFieldHashMap<Fraction>(field);
  int key1=-1996012590;
  Fraction value1=new Fraction(1);
  map.put(key1,value1);
  int key2=835099822;
  map.put(key2,value1);
  int key3=1008859686;
  map.put(key3,value1);
  Assert.assertEquals(value1,map.get(key3));
  Assert.assertEquals(3,map.size());
  map.remove(key2);
  Fraction value2=new Fraction(2);
  map.put(key3,value2);
  Assert.assertEquals(value2,map.get(key3));
  Assert.assertEquals(2,map.size());
}
