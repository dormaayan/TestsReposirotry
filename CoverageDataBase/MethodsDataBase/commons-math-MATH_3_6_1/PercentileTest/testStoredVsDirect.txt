@Test public void testStoredVsDirect(){
  final RandomGenerator rand=new JDKRandomGenerator();
  rand.setSeed(Long.MAX_VALUE);
  for (  final int sampleSize : sampleSizes) {
    final double[] data=new NormalDistribution(rand,4000,50).sample(sampleSize);
    for (    final double p : new double[]{50d,95d}) {
      for (      final Percentile.EstimationType e : Percentile.EstimationType.values()) {
        reset(p,e);
        final Percentile pStoredData=getUnivariateStatistic();
        pStoredData.setData(data);
        final double storedDataResult=pStoredData.evaluate();
        pStoredData.setData(null);
        final Percentile pDirect=getUnivariateStatistic();
        Assert.assertEquals("Sample=" + sampleSize + ",P="+ p+ " e="+ e,storedDataResult,pDirect.evaluate(data),0d);
      }
    }
  }
}
