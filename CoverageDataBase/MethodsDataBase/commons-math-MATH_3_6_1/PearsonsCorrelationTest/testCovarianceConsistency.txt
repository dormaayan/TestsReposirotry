/** 
 * Verify that creating correlation from covariance gives same results as direct computation from the original matrix
 */
@Test public void testCovarianceConsistency(){
  RealMatrix matrix=createRealMatrix(longleyData,16,7);
  PearsonsCorrelation corrInstance=new PearsonsCorrelation(matrix);
  Covariance covInstance=new Covariance(matrix);
  PearsonsCorrelation corrFromCovInstance=new PearsonsCorrelation(covInstance);
  TestUtils.assertEquals("correlation values",corrInstance.getCorrelationMatrix(),corrFromCovInstance.getCorrelationMatrix(),10E-15);
  TestUtils.assertEquals("p values",corrInstance.getCorrelationPValues(),corrFromCovInstance.getCorrelationPValues(),10E-15);
  TestUtils.assertEquals("standard errors",corrInstance.getCorrelationStandardErrors(),corrFromCovInstance.getCorrelationStandardErrors(),10E-15);
  PearsonsCorrelation corrFromCovInstance2=new PearsonsCorrelation(covInstance.getCovarianceMatrix(),16);
  TestUtils.assertEquals("correlation values",corrInstance.getCorrelationMatrix(),corrFromCovInstance2.getCorrelationMatrix(),10E-15);
  TestUtils.assertEquals("p values",corrInstance.getCorrelationPValues(),corrFromCovInstance2.getCorrelationPValues(),10E-15);
  TestUtils.assertEquals("standard errors",corrInstance.getCorrelationStandardErrors(),corrFromCovInstance2.getCorrelationStandardErrors(),10E-15);
}
