@Test public void testConstant(){
  double constantValue=10d;
  double measurementNoise=0.1d;
  double processNoise=1e-5d;
  RealMatrix A=new Array2DRowRealMatrix(new double[]{1d});
  RealMatrix B=null;
  RealMatrix H=new Array2DRowRealMatrix(new double[]{1d});
  RealVector x=new ArrayRealVector(new double[]{constantValue});
  RealMatrix Q=new Array2DRowRealMatrix(new double[]{processNoise});
  RealMatrix R=new Array2DRowRealMatrix(new double[]{measurementNoise});
  ProcessModel pm=new DefaultProcessModel(A,B,Q,new ArrayRealVector(new double[]{constantValue}),null);
  MeasurementModel mm=new DefaultMeasurementModel(H,R);
  KalmanFilter filter=new KalmanFilter(pm,mm);
  Assert.assertEquals(1,filter.getMeasurementDimension());
  Assert.assertEquals(1,filter.getStateDimension());
  assertMatrixEquals(Q.getData(),filter.getErrorCovariance());
  double[] expectedInitialState=new double[]{constantValue};
  assertVectorEquals(expectedInitialState,filter.getStateEstimation());
  RealVector pNoise=new ArrayRealVector(1);
  RealVector mNoise=new ArrayRealVector(1);
  RandomGenerator rand=new JDKRandomGenerator();
  for (int i=0; i < 60; i++) {
    filter.predict();
    pNoise.setEntry(0,processNoise * rand.nextGaussian());
    x=A.operate(x).add(pNoise);
    mNoise.setEntry(0,measurementNoise * rand.nextGaussian());
    RealVector z=H.operate(x).add(mNoise);
    filter.correct(z);
    double diff=FastMath.abs(constantValue - filter.getStateEstimation()[0]);
    Assert.assertTrue(Precision.compareTo(diff,measurementNoise,1e-6) < 0);
  }
  Assert.assertTrue(Precision.compareTo(filter.getErrorCovariance()[0][0],0.02d,1e-6) < 0);
}
