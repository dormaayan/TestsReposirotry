private static class InsecureResponseCache extends ResponseCache {
  private final ResponseCache delegate;
  private InsecureResponseCache(  ResponseCache delegate){
    this.delegate=delegate;
  }
  @Override public CacheRequest put(  URI uri,  URLConnection connection) throws IOException {
    return delegate.put(uri,connection);
  }
  @Override public CacheResponse get(  URI uri,  String requestMethod,  Map<String,List<String>> requestHeaders) throws IOException {
    final CacheResponse response=delegate.get(uri,requestMethod,requestHeaders);
    if (response instanceof SecureCacheResponse) {
      return new CacheResponse(){
        @Override public InputStream getBody() throws IOException {
          return response.getBody();
        }
        @Override public Map<String,List<String>> getHeaders() throws IOException {
          return response.getHeaders();
        }
      }
;
    }
    return response;
  }
}
