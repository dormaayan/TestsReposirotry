private final class SizedUnmodifiableHashMapFactory implements Function0<Map<? extends Object,String>> {
  private final int size;
  private SizedUnmodifiableHashMapFactory(  int size){
    this.size=size;
  }
  @Override public Map<? extends Object,String> value(){
    if (this.size == 0) {
      return Collections.emptyMap();
    }
    if (this.size == 1) {
      return Collections.singletonMap(Integer.valueOf(0),"dummy");
    }
    HashMap<Object,String> map=new HashMap<>(this.size);
    for (int i=0; i < this.size; i++) {
      map.put(AbstractImmutableMapMemoryTest.this.getKeyFactory(),"dummy");
    }
    return Collections.unmodifiableMap(map);
  }
}
