private static final class TestPrintStream extends PrintStream {
  private final List<Integer> assertValues;
  private TestPrintStream(  List<Integer> newAssertValues){
    super(initOutputStream());
    this.assertValues=newAssertValues;
  }
  private static OutputStream initOutputStream(){
    try {
      return new ObjectOutputStream(new ByteArrayOutputStream());
    }
 catch (    IOException ex) {
      Assert.fail("Failed to marshal an object: " + ex.getMessage());
    }
    return null;
  }
  @Override public void println(  Object x){
    super.println(x);
    Assert.assertEquals(this.assertValues.remove(0),x);
  }
  private void shutdown(){
    this.flush();
    this.close();
  }
}
