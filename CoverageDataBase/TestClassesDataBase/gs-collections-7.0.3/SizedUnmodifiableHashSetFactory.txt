private final class SizedUnmodifiableHashSetFactory implements Function0<Set<Object>> {
  private final int size;
  private SizedUnmodifiableHashSetFactory(  int size){
    this.size=size;
  }
  @Override public Set<Object> value(){
    if (this.size == 0) {
      return Collections.emptySet();
    }
    if (this.size == 1) {
      return Collections.singleton(AbstractImmutableSetMemoryTest.this.getKeyFactory().valueOf(0));
    }
    HashSet<Object> set=new HashSet<>(this.size);
    for (int i=0; i < this.size; i++) {
      set.add(AbstractImmutableSetMemoryTest.this.getKeyFactory().valueOf(i));
    }
    return Collections.unmodifiableSet(set);
  }
}
