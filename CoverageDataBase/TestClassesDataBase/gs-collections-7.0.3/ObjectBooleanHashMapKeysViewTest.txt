/** 
 * JUnit test for  {@link ObjectBooleanHashMap#keysView()}.
 */
public class ObjectBooleanHashMapKeysViewTest extends AbstractLazyIterableTestCase {
  @Override protected <T>LazyIterable<T> newWith(  T... elements){
    ObjectBooleanHashMap<T> map=new ObjectBooleanHashMap<>();
    for (int i=0; i < elements.length; i++) {
      map.put(elements[i],(i & 1) == 0);
    }
    return map.keysView();
  }
  @Override @Test public void iterator(){
    MutableSet<String> expected=UnifiedSet.newSetWith("zero","thirtyOne","thirtyTwo");
    MutableSet<String> actual=UnifiedSet.newSet();
    Iterator<String> iterator=ObjectBooleanHashMap.newWithKeysValues("zero",true,"thirtyOne",false,"thirtyTwo",true).keysView().iterator();
    Assert.assertTrue(iterator.hasNext());
    actual.add(iterator.next());
    Verify.assertThrows(UnsupportedOperationException.class,iterator::remove);
    Assert.assertTrue(iterator.hasNext());
    actual.add(iterator.next());
    Assert.assertTrue(iterator.hasNext());
    actual.add(iterator.next());
    Assert.assertFalse(iterator.hasNext());
    Assert.assertEquals(expected,actual);
    Verify.assertThrows(NoSuchElementException.class,(Runnable)iterator::next);
  }
}
