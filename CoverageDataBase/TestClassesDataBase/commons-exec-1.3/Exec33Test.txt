/** 
 * Test the patch for EXEC-33 (https://issues.apache.org/jira/browse/EXEC-33) PumpStreamHandler hangs if System.in is redirect to process input stream .
 * @version $Id$
 */
public class Exec33Test {
  private final Executor exec=new DefaultExecutor();
  private final File testDir=new File("src/test/scripts");
  private final File testScript=TestUtil.resolveScriptForOS(testDir + "/test");
  @Test public void testExec33() throws Exception {
    final CommandLine cl=new CommandLine(testScript);
    final PumpStreamHandler pumpStreamHandler=new PumpStreamHandler(System.out,System.err,System.in);
    final DefaultExecutor executor=new DefaultExecutor();
    executor.setStreamHandler(pumpStreamHandler);
    final int exitValue=executor.execute(cl);
    assertFalse(exec.isFailure(exitValue));
  }
}
