/** 
 * @author Damian Szczepanik (damianszczepanik@github)
 */
public class ErrorPageTest extends PageTest {
  @Before public void setUp(){
    setUpWithJson(SAMPLE_JSON);
  }
  @Test public void prepareReport_AddsCustomProperties(){
    Exception exception=new Exception();
    page=new ErrorPage(null,configuration,exception,jsonReports);
    page.prepareReport();
    VelocityContext context=page.context;
    assertThat(context.getKeys()).hasSize(11);
    assertThat(context.get("classifications")).isInstanceOf(List.class);
    assertThat(context.get("output_message")).isEqualTo(ExceptionUtils.getStackTrace(exception));
    assertThat(context.get("json_files")).isEqualTo(jsonReports);
  }
}
