/** 
 * @author Damian Szczepanik (damianszczepanik@github)
 */
public class ResultTest extends PageTest {
  @Before public void setUp(){
    setUpWithJson(SAMPLE_JSON);
  }
  @Test public void getStatus_ReturnsStatus(){
    Result result=features.get(0).getElements()[0].getSteps()[1].getResult();
    Status status=result.getStatus();
    assertThat(status).isEqualTo(Status.PASSED);
  }
  @Test public void getDuration_ReturnsDuration(){
    Result result=features.get(0).getElements()[0].getSteps()[3].getResult();
    long duration=result.getDuration();
    assertThat(duration).isEqualTo(111111L);
  }
  @Test public void getFormattedDuration_ReturnsDurationAsString(){
    Result result=features.get(0).getElements()[0].getSteps()[2].getResult();
    String duration=result.getFormattedDuration();
    assertThat(duration).isEqualTo("0.007");
  }
  @Test public void getErrorMessage_ReturnsErrorMessage(){
    Result result=features.get(1).getElements()[0].getSteps()[5].getResult();
    String errorMessage=result.getErrorMessage();
    assertThat(errorMessage).isEqualTo("java.lang.AssertionError: \n" + "Expected: is <80>\n" + "     got: <90>\n"+ "\n"+ "\tat org.junit.Assert.assertThat(Assert.java:780)\n"+ "\tat org.junit.Assert.assertThat(Assert.java:738)\n"+ "\tat net.masterthought.example.ATMScenario.checkBalance(ATMScenario.java:69)\n"+ "\tat âœ½.And the account balance should be 90(net/masterthought/example/ATMK.feature:12)\n");
  }
  @Test public void getErrorMessageTitle_OnEmptyMessage_ReturnsTitle(){
    Result result=features.get(1).getElements()[0].getBefore()[1].getResult();
    String messageTitle=result.getErrorMessageTitle();
    assertThat(messageTitle).isEmpty();
  }
}
