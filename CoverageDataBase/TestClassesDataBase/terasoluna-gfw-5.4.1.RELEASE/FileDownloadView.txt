private class FileDownloadView extends AbstractFileDownloadView {
  private InputStream inputStream;
  private boolean throwIOException=false;
  public void setThrowIOException(  boolean throwIOException){
    this.throwIOException=throwIOException;
  }
  public void setInputStream(  InputStream inputStream){
    this.inputStream=inputStream;
  }
  @Override protected InputStream getInputStream(  Map<String,Object> model,  HttpServletRequest request) throws IOException {
    if (throwIOException) {
      throw new IOException();
    }
    return inputStream;
  }
  @Override protected void addResponseHeader(  Map<String,Object> model,  HttpServletRequest request,  HttpServletResponse response){
    response.setHeader("MethodCalled","true");
  }
}
