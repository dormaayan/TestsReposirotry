public class JPAEETest extends CassandraTestBase {
  private static EJBContainer container;
  @PersistenceContext(unitName="homEE") private EntityManager em;
  @Inject private AnEJB ejb;
  @BeforeClass public static void start(){
    container=EJBContainer.createEJBContainer();
  }
  @Before public void inject() throws NamingException {
    container.getContext().bind("inject",this);
  }
  @AfterClass public static void stop(){
    container.close();
  }
  @Test public void testInitializeSaveLoad(){
    MyTestBean o1=new MyTestBean();
    o1.setBaseId(UUID.randomUUID());
    o1.setIntProp1(1);
    o1.setBoolProp1(Boolean.TRUE);
    o1.setLongProp1(123L);
    ejb.persist(o1);
    MyTestBean o2=em.find(MyTestBean.class,o1.getBaseId());
    assertEquals(o1.getBaseId(),o2.getBaseId());
    assertEquals(o1.getIntProp1(),o2.getIntProp1());
    assertEquals(o1.isBoolProp1(),o2.isBoolProp1());
    assertEquals(o1.getLongProp1(),o2.getLongProp1());
  }
@Singleton public static class AnEJB {
    @PersistenceContext(unitName="homEE") private EntityManager em;
    public void persist(    Object o){
      em.persist(o);
    }
  }
}
