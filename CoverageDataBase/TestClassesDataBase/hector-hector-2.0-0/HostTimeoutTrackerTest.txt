public class HostTimeoutTrackerTest {
  private HostTimeoutTracker hostTimeoutTracker;
  @Before public void setup(){
    CassandraHostConfigurator cassandraHostConfigurator=new CassandraHostConfigurator("localhost:9170");
    cassandraHostConfigurator.setHostTimeoutCounter(3);
    HConnectionManager connectionManager=new HConnectionManager("TestCluster",cassandraHostConfigurator);
    hostTimeoutTracker=new HostTimeoutTracker(connectionManager,cassandraHostConfigurator);
  }
  @Test public void testTrackHostLatency(){
    CassandraHost cassandraHost=new CassandraHost("localhost:9170");
    assertFalse(hostTimeoutTracker.checkTimeout(cassandraHost));
    assertFalse(hostTimeoutTracker.checkTimeout(cassandraHost));
    assertFalse(hostTimeoutTracker.checkTimeout(cassandraHost));
    try {
      Thread.currentThread().sleep(501);
    }
 catch (    InterruptedException e) {
    }
    assertTrue(hostTimeoutTracker.checkTimeout(cassandraHost));
  }
}
