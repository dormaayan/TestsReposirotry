/** 
 * @version $Revision$ $Date$
 * @author Rodney Waldhoff
 */
public class TestUnaryFunctionUnaryProcedure extends BaseFunctorTest {
  protected Object makeFunctor(){
    return new UnaryFunctionUnaryProcedure<Object>(Constant.of("K"));
  }
  @Test public void testRun() throws Exception {
class EvaluateCounter implements UnaryFunction<Object,Integer> {
      int count=0;
      public Integer evaluate(      Object a){
        return count++;
      }
    }
    EvaluateCounter counter=new EvaluateCounter();
    UnaryProcedure<Object> p=new UnaryFunctionUnaryProcedure<Object>(counter);
    assertEquals(0,counter.count);
    p.run(null);
    assertEquals(1,counter.count);
    p.run("x");
    assertEquals(2,counter.count);
  }
  @Test public void testEquals() throws Exception {
    UnaryProcedure<Object> p=new UnaryFunctionUnaryProcedure<Object>(Constant.of("K"));
    assertEquals(p,p);
    assertObjectsAreEqual(p,new UnaryFunctionUnaryProcedure<Object>(Constant.of("K")));
    assertObjectsAreNotEqual(p,NoOp.INSTANCE);
    assertObjectsAreNotEqual(p,new UnaryFunctionUnaryProcedure<Object>(Constant.of("J")));
  }
  @Test public void testAdaptNull() throws Exception {
    assertNull(UnaryFunctionUnaryProcedure.adapt(null));
  }
  @Test public void testAdapt() throws Exception {
    assertNotNull(UnaryFunctionUnaryProcedure.adapt(Constant.of("K")));
  }
}
