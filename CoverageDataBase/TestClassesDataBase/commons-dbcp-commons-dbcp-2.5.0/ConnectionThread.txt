private static final class ConnectionThread implements Runnable {
  private final DataSource ds;
  private volatile boolean result=true;
  private ConnectionThread(  final DataSource ds){
    this.ds=ds;
  }
  @Override public void run(){
    Connection conn=null;
    try {
      conn=ds.getConnection();
    }
 catch (    final Exception e) {
      e.printStackTrace();
      result=false;
    }
 finally {
      if (conn != null) {
        try {
          conn.close();
        }
 catch (        final Exception e) {
          e.printStackTrace();
          result=false;
        }
      }
    }
  }
  public boolean getResult(){
    return result;
  }
  @Override public String toString(){
    return "ConnectionThread [ds=" + ds + ", result="+ result+ "]";
  }
}
