private class UncooperativeLocalXAConnectionFactory extends LocalXAConnectionFactory {
  public UncooperativeLocalXAConnectionFactory(  final TransactionManager transactionManager,  final ConnectionFactory connectionFactory){
    super(transactionManager,connectionFactory);
    try {
      final Field field=LocalXAConnectionFactory.class.getDeclaredField("transactionRegistry");
      field.setAccessible(true);
      field.set(this,new UncooperativeTransactionRegistry(transactionManager));
    }
 catch (    final Exception e) {
      e.printStackTrace();
    }
  }
}
