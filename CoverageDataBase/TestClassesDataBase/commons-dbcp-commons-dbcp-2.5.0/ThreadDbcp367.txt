private static class ThreadDbcp367 extends Thread {
  private final DataSource ds;
  private volatile boolean failed=false;
  public ThreadDbcp367(  final DataSource ds){
    this.ds=ds;
  }
  @Override public void run(){
    Connection c=null;
    try {
      for (int j=0; j < 5000; j++) {
        c=ds.getConnection();
        c.close();
      }
    }
 catch (    final SQLException sqle) {
      failed=true;
      sqle.printStackTrace();
    }
  }
  public boolean isFailed(){
    return failed;
  }
}
