/** 
 * Tests for <code> {@link ObjectAssert#isEqualToComparingOnlyGivenFields(Object,String)}</code>.
 * @author Nicolas Fran√ßois
 * @author Mikhail Mazursky
 */
public class ObjectAssert_isEqualToComparingOnlyGivenFields_Test extends ObjectAssertBaseTest {
  private Jedi other=new Jedi("Yoda","Blue");
  @Override protected ObjectAssert<Jedi> invoke_api_method(){
    return assertions.isEqualToComparingOnlyGivenFields(other,"name");
  }
  @Override @SuppressWarnings("unchecked") protected void verify_internal_effects(){
    verify(objects).assertIsEqualToComparingOnlyGivenFields(getInfo(assertions),getActual(assertions),other,EMPTY_MAP,defaultTypeComparators(),"name");
  }
  @Test public void should_be_able_to_use_a_comparator_for_specified_fields(){
    Jedi actual=new Jedi("Yoda","Green");
    Jedi other=new Jedi("Luke","Blue");
    assertThat(actual).usingComparatorForFields(ALWAY_EQUALS_STRING,"name").isEqualToComparingOnlyGivenFields(other,"name");
  }
  @Test public void comparators_for_fields_should_have_precedence_over_comparators_for_types(){
    Comparator<String> comparator=(o1,o2) -> o1.compareTo(o2);
    Jedi actual=new Jedi("Yoda","green");
    Jedi other=new Jedi("Luke","green");
    assertThat(actual).usingComparatorForFields(ALWAY_EQUALS_STRING,"name").usingComparatorForType(comparator,String.class).isEqualToComparingOnlyGivenFields(other,"name");
  }
  @Test public void should_be_able_to_use_a_comparator_for_specified_type(){
    Jedi actual=new Jedi("Yoda","green");
    Jedi other=new Jedi("Luke","blue");
    assertThat(actual).usingComparatorForType(ALWAY_EQUALS_STRING,String.class).isEqualToComparingOnlyGivenFields(other,"name");
  }
}
