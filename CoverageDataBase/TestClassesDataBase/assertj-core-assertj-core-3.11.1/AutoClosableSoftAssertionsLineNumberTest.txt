/** 
 * This test has to be in a package other than org.assertj because otherwise the line number information will be removed by the assertj filtering of internal lines. {@link org.assertj.core.util.Throwables#removeAssertJRelatedElementsFromStackTrace}
 */
public class AutoClosableSoftAssertionsLineNumberTest {
  @Test public void should_print_line_numbers_of_failed_assertions(){
    AutoCloseableSoftAssertions softly=new AutoCloseableSoftAssertions();
    softly.assertThat(1).isLessThan(0).isLessThan(1);
    AssertionError error=catchThrowableOfType(() -> softly.close(),AssertionError.class);
    assertThat(error).hasMessageContaining(format("%n" + "Expecting:%n" + " <1>%n"+ "to be less than:%n"+ " <0> %n"+ "at AutoClosableSoftAssertionsLineNumberTest.should_print_line_numbers_of_failed_assertions(AutoClosableSoftAssertionsLineNumberTest.java:33)%n")).hasMessageContaining(format("%n" + "Expecting:%n" + " <1>%n"+ "to be less than:%n"+ " <1> %n"+ "at AutoClosableSoftAssertionsLineNumberTest.should_print_line_numbers_of_failed_assertions(AutoClosableSoftAssertionsLineNumberTest.java:34)"));
  }
}
