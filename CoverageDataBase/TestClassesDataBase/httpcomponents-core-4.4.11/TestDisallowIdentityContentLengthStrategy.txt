public class TestDisallowIdentityContentLengthStrategy {
  @Test public void testZeroLength() throws Exception {
    final ContentLengthStrategy strat1=Mockito.mock(ContentLengthStrategy.class);
    final HttpMessage message=new DummyHttpMessage();
    Mockito.when(strat1.determineLength(message)).thenReturn(0L);
    final DisallowIdentityContentLengthStrategy strat2=new DisallowIdentityContentLengthStrategy(strat1);
    Assert.assertEquals(0L,strat2.determineLength(message));
  }
  @Test(expected=ProtocolException.class) public void testIdentity() throws Exception {
    final ContentLengthStrategy strat1=Mockito.mock(ContentLengthStrategy.class);
    final HttpMessage message=new DummyHttpMessage();
    Mockito.when(strat1.determineLength(message)).thenReturn((long)ContentLengthStrategy.IDENTITY);
    final DisallowIdentityContentLengthStrategy strat2=new DisallowIdentityContentLengthStrategy(strat1);
    strat2.determineLength(message);
  }
}
