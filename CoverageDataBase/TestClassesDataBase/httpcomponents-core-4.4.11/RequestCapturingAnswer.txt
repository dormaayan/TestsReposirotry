static class RequestCapturingAnswer implements Answer<Void> {
  private final LinkedList<HttpRequest> requests;
  RequestCapturingAnswer(  final LinkedList<HttpRequest> requests){
    super();
    this.requests=requests;
  }
  @Override public Void answer(  final InvocationOnMock invocation) throws Throwable {
    final Object[] args=invocation.getArguments();
    final NHttpServerConnection conn=(NHttpServerConnection)args[0];
    if (conn != null) {
      final HttpRequest request=conn.getHttpRequest();
      if (request != null) {
        requests.add(request);
      }
    }
    return null;
  }
}
