public class TestErrorResponseProducer {
  private ErrorResponseProducer erp;
  private HttpResponse response;
  private HttpEntity entity;
  @Before public void setUp() throws Exception {
    response=new BasicHttpResponse(HttpVersion.HTTP_1_1,200,"OK");
    entity=new StringEntity("stuff");
  }
  @After public void tearDown() throws Exception {
  }
  @Test public void testGenerateResponseKeepAlive(){
    erp=new ErrorResponseProducer(response,entity,true);
    final HttpResponse res=erp.generateResponse();
    Assert.assertEquals(HTTP.CONN_KEEP_ALIVE,res.getFirstHeader(HTTP.CONN_DIRECTIVE).getValue());
    Assert.assertEquals(entity,res.getEntity());
    Assert.assertEquals(200,res.getStatusLine().getStatusCode());
  }
  @Test public void testGenerateResponseClose(){
    erp=new ErrorResponseProducer(response,entity,false);
    final HttpResponse res=erp.generateResponse();
    Assert.assertEquals(HTTP.CONN_CLOSE,res.getFirstHeader(HTTP.CONN_DIRECTIVE).getValue());
    Assert.assertEquals(entity,res.getEntity());
    Assert.assertEquals(200,res.getStatusLine().getStatusCode());
  }
}
