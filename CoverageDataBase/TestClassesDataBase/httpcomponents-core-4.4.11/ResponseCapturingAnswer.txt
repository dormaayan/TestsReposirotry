static class ResponseCapturingAnswer implements Answer<Void> {
  private final LinkedList<HttpResponse> responses;
  ResponseCapturingAnswer(  final LinkedList<HttpResponse> responses){
    super();
    this.responses=responses;
  }
  @Override public Void answer(  final InvocationOnMock invocation) throws Throwable {
    final Object[] args=invocation.getArguments();
    final NHttpClientConnection conn=(NHttpClientConnection)args[0];
    if (conn != null) {
      final HttpResponse response=conn.getHttpResponse();
      if (response != null) {
        responses.add(response);
      }
    }
    return null;
  }
}
