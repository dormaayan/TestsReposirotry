public static class WrapperFilter implements Filter {
  @Override public void init(  FilterConfig filterConfig) throws ServletException {
  }
  @Override public void doFilter(  ServletRequest servletRequest,  ServletResponse servletResponse,  FilterChain filterChain) throws IOException, ServletException {
    filterChain.doFilter(new HttpServletRequestWrapper((HttpServletRequest)servletRequest){
      @Override public Principal getUserPrincipal(){
        return new Principal(){
          @Override public String getName(){
            return "wrapped";
          }
        }
;
      }
    }
,servletResponse);
  }
  @Override public void destroy(){
  }
}
