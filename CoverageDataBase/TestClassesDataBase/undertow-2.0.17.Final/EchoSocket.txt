@ServerEndpoint("/webSocket") public static class EchoSocket {
  private final List<String> echos=new CopyOnWriteArrayList<>();
  public static volatile FutureResult<List<String>> receivedEchos=new FutureResult<>();
  @OnMessage public void onMessage(  ByteBuffer dataBuffer,  Session session) throws IOException {
    byte[] hd=new byte[dataBuffer.remaining()];
    dataBuffer.get(hd);
    String hash=md5(hd);
    echos.add(hash);
    stacks.add(new RuntimeException());
    if (echos.size() == MESSAGES) {
      receivedEchos.setResult(echos);
    }
    session.getBasicRemote().sendBinary(dataBuffer);
  }
}
