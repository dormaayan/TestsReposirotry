private static final class RateLimitedInputStream extends InputStream {
  private final InputStream in;
  private int count;
  RateLimitedInputStream(  InputStream in){
    this.in=in;
  }
  @Override public int read() throws IOException {
    if (count++ % 1000 == 0) {
      try {
        Thread.sleep(1);
      }
 catch (      InterruptedException e) {
        throw new InterruptedIOException();
      }
    }
    return in.read();
  }
  @Override public void close() throws IOException {
    in.close();
  }
}
