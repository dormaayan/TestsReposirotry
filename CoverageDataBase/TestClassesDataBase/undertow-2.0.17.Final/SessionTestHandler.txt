protected static final class SessionTestHandler implements HttpHandler {
  private final SessionCookieConfig sessionConfig;
  protected SessionTestHandler(  SessionCookieConfig sessionConfig){
    this.sessionConfig=sessionConfig;
  }
  @Override public void handleRequest(  final HttpServerExchange exchange) throws Exception {
    final SessionManager manager=exchange.getAttachment(SessionManager.ATTACHMENT_KEY);
    Session session=manager.getSession(exchange,sessionConfig);
    if (session == null) {
      session=manager.createSession(exchange,sessionConfig);
      session.setAttribute(COUNT,0);
    }
    Integer count=(Integer)session.getAttribute(COUNT);
    session.setAttribute(COUNT,count + 1);
    exchange.getResponseSender().send("" + count);
  }
}
