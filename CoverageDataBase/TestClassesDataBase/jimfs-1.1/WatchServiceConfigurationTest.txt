/** 
 * Tests for  {@link WatchServiceConfiguration}.
 * @author Colin Decker
 */
@RunWith(JUnit4.class) public class WatchServiceConfigurationTest {
  private JimfsFileSystem fs;
  @Before public void setUp(){
    fs=(JimfsFileSystem)Jimfs.newFileSystem();
  }
  @After public void tearDown() throws IOException {
    fs.close();
    fs=null;
  }
  @Test public void testPollingConfig(){
    WatchServiceConfiguration polling=WatchServiceConfiguration.polling(50,MILLISECONDS);
    WatchService watchService=polling.newWatchService(fs.getDefaultView(),fs.getPathService());
    assertThat(watchService).isInstanceOf(PollingWatchService.class);
    PollingWatchService pollingWatchService=(PollingWatchService)watchService;
    assertThat(pollingWatchService.interval).isEqualTo(50);
    assertThat(pollingWatchService.timeUnit).isEqualTo(MILLISECONDS);
  }
  @Test public void testDefaultConfig(){
    WatchService watchService=WatchServiceConfiguration.DEFAULT.newWatchService(fs.getDefaultView(),fs.getPathService());
    assertThat(watchService).isInstanceOf(PollingWatchService.class);
    PollingWatchService pollingWatchService=(PollingWatchService)watchService;
    assertThat(pollingWatchService.interval).isEqualTo(5);
    assertThat(pollingWatchService.timeUnit).isEqualTo(SECONDS);
  }
}
