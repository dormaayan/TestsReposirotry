public static class ErrorEntityWriterTestResourceConfig extends DropwizardResourceConfig {
  public ErrorEntityWriterTestResourceConfig(){
    super(true,new MetricRegistry());
    register(DefaultLoggingExceptionMapper.class);
    register(DefaultJacksonMessageBodyProvider.class);
    register(ExceptionResource.class);
    register(new ErrorEntityWriter<ErrorMessage,String>(MediaType.TEXT_HTML_TYPE,String.class){
      @Override protected String getRepresentation(      ErrorMessage entity){
        return "<!DOCTYPE html><html><body>" + entity.getMessage() + "</body></html>";
      }
    }
);
  }
}
