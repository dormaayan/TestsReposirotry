public class DAOTestRuleConfigTest {
  @Rule public final DAOTestRule database=DAOTestRule.newBuilder().setUrl("jdbc:h2:mem:rule-config-test").setDriver(org.h2.Driver.class).setUsername("username").useSqlComments(true).setHbm2DdlAuto("create").setShowSql(true).addEntityClass(TestEntity.class).setProperty(AvailableSettings.FORMAT_SQL,"true").customizeConfiguration(c -> c.setProperty("foobar","baz")).build();
  @Test public void explicitConfigCreatesSessionFactory(){
    final SessionFactory sessionFactory=database.getSessionFactory();
    assertThat(sessionFactory).isNotNull();
    assertThat(sessionFactory.getProperties()).containsEntry(AvailableSettings.FORMAT_SQL,"true").containsEntry("foobar","baz");
    final Session currentSession=sessionFactory.getCurrentSession();
    currentSession.saveOrUpdate(new TestEntity("foo"));
  }
}
