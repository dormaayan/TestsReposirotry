public class OptionalLongValidatedValueUnwrapperTest {
public static class Example {
    @Min(3) @UnwrapValidatedValue public OptionalLong three=OptionalLong.empty();
    @NotNull @UnwrapValidatedValue public OptionalLong notNull=OptionalLong.of(123456789L);
  }
  private final Validator validator=Validation.byProvider(HibernateValidator.class).configure().addValidatedValueHandler(new OptionalLongValidatedValueUnwrapper()).buildValidatorFactory().getValidator();
  @Test public void succeedsWhenAbsent(){
    Example example=new Example();
    Set<ConstraintViolation<Example>> violations=validator.validate(example);
    assertThat(violations).isEmpty();
  }
  @Test public void failsWhenFailingConstraint(){
    Example example=new Example();
    example.three=OptionalLong.of(2);
    Set<ConstraintViolation<Example>> violations=validator.validate(example);
    assertThat(violations).hasSize(1);
  }
  @Test public void succeedsWhenConstraintsMet(){
    Example example=new Example();
    example.three=OptionalLong.of(10);
    Set<ConstraintViolation<Example>> violations=validator.validate(example);
    assertThat(violations).isEmpty();
  }
  @Test public void notNullFailsWhenAbsent(){
    Example example=new Example();
    example.notNull=OptionalLong.empty();
    Set<ConstraintViolation<Example>> violations=validator.validate(example);
    assertThat(violations).hasSize(1);
  }
}
