@Produces(MediaType.APPLICATION_JSON) @Path("/people") public static class PersonResource {
  private final PersonDAO personDao;
  private final DogResource dogResource;
  PersonResource(  PersonDAO dao,  DogDAO dogDao){
    this.personDao=dao;
    this.dogResource=new DogResource(dogDao,personDao);
  }
  @GET @Path("{name}") @UnitOfWork(readOnly=true) public Optional<Person> find(  @PathParam("name") String name){
    return personDao.findByName(name);
  }
  @POST @UnitOfWork public Person save(  Person person){
    return personDao.persist(person);
  }
  @Path("/{ownerName}/dogs") public DogResource dogResource(){
    return dogResource;
  }
}
