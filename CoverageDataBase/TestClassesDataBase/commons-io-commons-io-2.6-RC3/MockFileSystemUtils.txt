static class MockFileSystemUtils extends FileSystemUtils {
  private final int exitCode;
  private final byte[] bytes;
  private final String cmd;
  public MockFileSystemUtils(  final int exitCode,  final String lines){
    this(exitCode,lines,null);
  }
  public MockFileSystemUtils(  final int exitCode,  final String lines,  final String cmd){
    this.exitCode=exitCode;
    this.bytes=lines.getBytes();
    this.cmd=cmd;
  }
  @Override Process openProcess(  final String[] params){
    if (cmd != null) {
      assertEquals(cmd,params[params.length - 1]);
    }
    return new Process(){
      @Override public InputStream getErrorStream(){
        return null;
      }
      @Override public InputStream getInputStream(){
        return new ByteArrayInputStream(bytes);
      }
      @Override public OutputStream getOutputStream(){
        return null;
      }
      @Override public int waitFor() throws InterruptedException {
        return exitCode;
      }
      @Override public int exitValue(){
        return exitCode;
      }
      @Override public void destroy(){
      }
    }
;
  }
}
