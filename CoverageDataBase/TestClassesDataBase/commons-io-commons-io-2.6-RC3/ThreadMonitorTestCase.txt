/** 
 * Tests for  {@link ThreadMonitor}.
 */
public class ThreadMonitorTestCase {
  /** 
 * Test timeout.
 */
  @Test public void testTimeout(){
    try {
      final Thread monitor=ThreadMonitor.start(100);
      TestUtils.sleep(200);
      ThreadMonitor.stop(monitor);
      fail("Expected InterruptedException");
    }
 catch (    final InterruptedException e) {
    }
  }
  /** 
 * Test task completed before timeout.
 */
  @Test public void testCompletedWithoutTimeout(){
    try {
      final Thread monitor=ThreadMonitor.start(200);
      TestUtils.sleep(100);
      ThreadMonitor.stop(monitor);
    }
 catch (    final InterruptedException e) {
      fail("Timed Out");
    }
  }
  /** 
 * Test No timeout.
 */
  @Test public void testNoTimeout(){
    try {
      final Thread monitor=ThreadMonitor.start(-1);
      assertNull("Timeout -1, Monitor should be null",monitor);
      TestUtils.sleep(100);
      ThreadMonitor.stop(monitor);
    }
 catch (    final Exception e) {
      fail("Timeout -1, threw " + e);
    }
    try {
      final Thread monitor=ThreadMonitor.start(0);
      assertNull("Timeout 0, Monitor should be null",monitor);
      TestUtils.sleep(100);
      ThreadMonitor.stop(monitor);
    }
 catch (    final Exception e) {
      fail("Timeout 0, threw " + e);
    }
  }
}
