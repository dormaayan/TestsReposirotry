/** 
 * Test base class that keeps track of Closeable objects and cleans them up.
 */
public class ClosingBase {
  private final List<Closeable> toClose=new ArrayList<>();
  protected <T extends Closeable>T willClose(  final T t){
    toClose.add(t);
    return t;
  }
  @Before public void setup() throws IOException {
    toClose.clear();
  }
  @After public void cleanup(){
    for (    final Closeable c : toClose) {
      try {
        c.close();
      }
 catch (      final IOException ignored) {
      }
    }
  }
}
