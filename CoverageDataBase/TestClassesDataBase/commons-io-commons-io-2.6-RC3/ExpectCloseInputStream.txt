/** 
 * A mock InputStream that expects <code>close()</code> to be called.
 */
private static class ExpectCloseInputStream extends InputStream {
  private boolean _closeCalled;
  public void assertCloseCalled(){
    assertTrue(_closeCalled);
  }
  @Override public void close() throws IOException {
    _closeCalled=true;
  }
  @Override public int read() throws IOException {
    return -1;
  }
}
