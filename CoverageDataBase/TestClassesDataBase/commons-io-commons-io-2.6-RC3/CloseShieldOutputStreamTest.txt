/** 
 * JUnit Test Case for  {@link CloseShieldOutputStream}.
 */
public class CloseShieldOutputStreamTest {
  private ByteArrayOutputStream original;
  private OutputStream shielded;
  private boolean closed;
  @Before public void setUp(){
    original=new ByteArrayOutputStream(){
      @Override public void close(){
        closed=true;
      }
    }
;
    shielded=new CloseShieldOutputStream(original);
    closed=false;
  }
  @Test public void testClose() throws IOException {
    shielded.close();
    assertFalse("closed",closed);
    try {
      shielded.write('x');
      fail("write(b)");
    }
 catch (    final IOException ignore) {
    }
    original.write('y');
    assertEquals(1,original.size());
    assertEquals('y',original.toByteArray()[0]);
  }
}
