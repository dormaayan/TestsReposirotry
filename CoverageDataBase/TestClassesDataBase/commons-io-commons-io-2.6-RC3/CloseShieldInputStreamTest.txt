/** 
 * JUnit Test Case for  {@link CloseShieldInputStream}.
 */
public class CloseShieldInputStreamTest {
  private byte[] data;
  private InputStream original;
  private InputStream shielded;
  private boolean closed;
  @Before public void setUp(){
    data=new byte[]{'x','y','z'};
    original=new ByteArrayInputStream(data){
      @Override public void close(){
        closed=true;
      }
    }
;
    shielded=new CloseShieldInputStream(original);
    closed=false;
  }
  @Test public void testClose() throws IOException {
    shielded.close();
    assertFalse("closed",closed);
    assertEquals("read()",-1,shielded.read());
    assertEquals("read()",data[0],original.read());
  }
}
