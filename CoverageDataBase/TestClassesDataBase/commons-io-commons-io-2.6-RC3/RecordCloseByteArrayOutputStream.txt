private static class RecordCloseByteArrayOutputStream extends ByteArrayOutputStream {
  boolean closed;
  @Override public void close() throws IOException {
    super.close();
    closed=true;
  }
}
